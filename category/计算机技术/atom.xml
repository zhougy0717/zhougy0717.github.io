<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://zhougy0717.github.io</id>
    <title>Big Ben â€¢ Posts by &#34;è®¡ç®—æœºæŠ€æœ¯&#34; category</title>
    <link href="https://zhougy0717.github.io" />
    <updated>2021-10-02T04:26:16.078Z</updated>
    <category term="javascript" />
    <category term="angular" />
    <category term="æ“ä½œç³»ç»Ÿ" />
    <category term="arm" />
    <category term="å•ç‰‡æœº" />
    <category term="machine learning" />
    <category term="deep learning" />
    <category term="Linux" />
    <category term="å†…å­˜ç®¡ç†" />
    <category term="Markdown" />
    <category term="python" />
    <category term="win32com" />
    <category term="nas" />
    <category term="synology" />
    <category term="USB" />
    <category term="Linux Device Drivers" />
    <category term="uboot" />
    <category term="http" />
    <category term="åŒæ­¥" />
    <category term="ç®—æ³•" />
    <category term="è¯»ä¹¦ç¬”è®°" />
    <category term="ç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“" />
    <category term="c/c++" />
    <category term="rap" />
    <category term="Eminem" />
    <category term="hexo" />
    <category term="security" />
    <category term="SELinux" />
    <category term="ç¼–è¯‘" />
    <category term="C++" />
    <category term="selinux" />
    <category term="iptables" />
    <category term="capability" />
    <category term="LD_PRELOAD" />
    <category term="coding" />
    <category term="çº¢æ¥¼æ¢¦" />
    <category term="æ•™è‚²" />
    <category term="UT" />
    <category term="TDD" />
    <category term="code review" />
    <category term="committer" />
    <category term="å°è±¡ç¬”è®°" />
    <category term="Obsidian" />
    <category term="ç¾¤æ™–" />
    <category term="Calibre" />
    <category term="ç”µå­ä¹¦" />
    <category term="Android" />
    <category term="xposed" />
    <category term="GitHub" />
    <category term="ä¸­æ–­å¤„ç†" />
    <category term="docker" />
    <category term="ttrss" />
    <category term="rsshub" />
    <category term="wallabag" />
    <category term="can" />
    <category term="network" />
    <category term="unittest" />
    <category term="mockito" />
    <category term="powermock" />
    <category term="QT" />
    <category term="nlp" />
    <category term="vim" />
    <category term="SpaceVim" />
    <category term="tmux" />
    <category term="é¢å‘å¯¹è±¡" />
    <category term="promise" />
    <category term="mongodb" />
    <category term="Programming" />
    <category term="C++11" />
    <category term="IoT" />
    <category term="broadlink" />
    <category term="domoticz" />
    <category term="UML" />
    <category term="socket" />
    <category term="neural network" />
    <category term="mock" />
    <category term="æ·±åº¦å­¦ä¹ " />
    <category term="schedule algorithm" />
    <category term="glibc" />
    <category term="gtest" />
    <category term="gmock" />
    <category term="golang" />
    <category term="elf" />
    <category term="è½¯ä»¶å¼€å‘" />
    <category term="è®¾è®¡æ¨¡å¼" />
    <entry>
        <id>https://zhougy0717.github.io/2021/10/02/obsidian_posts/%E6%96%B0%E4%BA%BA%E4%B8%8Ecode%20review/</id>
        <title>æ–°äººä¸code review</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/10/02/obsidian_posts/%E6%96%B0%E4%BA%BA%E4%B8%8Ecode%20review/"/>
        <content type="html">&lt;p&gt;é€šå¸¸commtteréƒ½æ˜¯ä¸€äº›æ¯”è¾ƒèµ„æ·±çš„å‘˜å·¥ï¼Œå› ä¸ºé€šè¿‡é˜…è¯»ä»£ç å‘ç°é—®é¢˜ï¼Œéœ€è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿…é€Ÿè¯»æ‡‚ä»£ç ï¼Œæ„å‘³ç€æ¯”è¾ƒå¥½çš„ä»£ç æŠ½è±¡èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;é€šè¿‡é˜…è¯»ä»£ç è¯†åˆ«é—®é¢˜ï¼Œæ„å‘³ç€æ¯”è¾ƒä¸°å¯Œçš„ç¼–ç ç»éªŒå’Œè°ƒè¯•ç»éªŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‚£æ˜¯ä¸æ˜¯èŒåœºæ–°äººå°±ä¸é€‚åˆå¯¹åˆ«äººçš„ä»£ç code reviewå‘¢ï¼Ÿè¿™å¯èƒ½æ˜¯å¾ˆå¤šäººçš„ç¬¬ä¸€å°è±¡ï¼Œä½†å¦‚æœä½ æ˜¯æ–°äººï¼Œä¹Ÿè¿™ä¹ˆæƒ³ï¼Œé‚£ä¹ˆä½ å°±å¤±å»äº†å¾ˆå¤šä¸»åŠ¨å­¦ä¹ çš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;code reviewæ›´å¤šçš„æ˜¯ä¸€ä¸ªæ²Ÿé€šè¿‡ç¨‹ã€‚è¯„å®¡äººæ¯•ç«Ÿä¸æ˜¯ownerï¼Œä»–å¯¹ä»£ç çš„ç†Ÿæ‚‰ç¨‹åº¦å¤§æ¦‚ç‡æ˜¯è¿œä¸å¦‚æäº¤äººçš„ã€‚è¯„å®¡è€…å¤šæ˜¯æ ¹æ®è‡ªèº«çš„å¼€å‘ç»éªŒï¼Œä»¥åŠçŸ­æ—¶é—´å†…å¯¹æäº¤ä»£ç çš„ç†è§£å‘ç°é—®é¢˜ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œå› ä¸ºæ¯ä¸ªäººçš„ç»éªŒï¼Œæ€§æ ¼ï¼Œçœ‹é—®é¢˜çš„è§’åº¦ä¸åŒï¼Œå¤šæ•°æ—¶å€™æ˜¯æŠ›å‡ºä¸€äº›é—®é¢˜ï¼Œå¹¶å½¢æˆè®¨è®ºã€‚å½“æ€æƒ³å‘ç”Ÿç¢°æ’æ—¶ï¼Œç¡®å®ä¼šå‘ç°ä¸€äº›é—®é¢˜ï¼Œæˆ–è€…å½¢æˆä¸€äº›æ›´å¥½çš„æƒ³æ³•å’Œè®¾è®¡ã€‚è¿™äº›éƒ½æ˜¯code reviewèƒ½å¤Ÿå¸¦æ¥çš„å¥½å¤„ã€‚è™½ç„¶ä»£ç è¯„å®¡éœ€è¦æ¯”è¾ƒæ·±åšçš„ç¼–ç åŠŸåŠ›ï¼Œä½†å¹¶ä¸æ„å‘³ç€å‚ä¸ä»£ç è¯„å®¡å¯¹æ–°äººæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ–°äººå‚ä¸code-reviewçš„å¥½å¤„&#34;&gt;&lt;a href=&#34;#æ–°äººå‚ä¸code-reviewçš„å¥½å¤„&#34; class=&#34;headerlink&#34; title=&#34;æ–°äººå‚ä¸code reviewçš„å¥½å¤„&#34;&gt;&lt;/a&gt;æ–°äººå‚ä¸code reviewçš„å¥½å¤„&lt;/h1&gt;&lt;p&gt;æ®æˆ‘çœ‹ï¼Œè‡³å°‘æœ‰ä»¥ä¸‹çš„å¥½å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šå¸¸æˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå¼€å‘é¢†åŸŸæäº¤çš„ä»£ç ã€‚é‚£ä¹ˆåœ¨è¯„å®¡ä»£ç çš„åŒæ—¶ï¼Œå¯ä»¥é˜…è¯»å·²æœ‰ä»£ç ï¼Œé€šè¿‡æ–°æäº¤çš„ä»£ç äº†è§£æŸä¸€å—çš„å®ç°é€»è¾‘ï¼Œä»¥å­¦ä¹ å­˜é‡ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæäº¤äººæ˜¯æ¯”è¾ƒèµ„æ·±çš„å¼€å‘ï¼Œé‚£ä¹ˆå¯ä»¥å€Ÿæ­¤æœºä¼šï¼Œæå‡ºä¸€äº›é—®é¢˜ï¼Œå‘å‰è¾ˆè¯·æ•™ã€‚åœ¨é˜…è¯»èµ„æ·±å¼€å‘æäº¤çš„ä»£ç æ—¶ï¼Œä¹Ÿå¯ä»¥å­¦ä¹ ä¸€äº›å¥½çš„ç¼–ç å®è·µï¼Œè€Œè¿™äº›é€šå¸¸ä¹¦æœ¬ä¸Šæ˜¯ä¸ä¼šæœ‰çš„ã€‚å¦‚æœä¾é é˜…è¯»æµ·é‡çš„å­˜é‡ä»£ç æ¥å­¦ä¹ ï¼Œå¯èƒ½å¾ˆå¿«å°±è¿·å¤±äº†ï¼Œæ•ˆç‡ä¹Ÿä¼šæ¯”è¾ƒä½ã€‚è€Œä¸€æ¬¡ä»£ç æäº¤çš„ä»£ç é‡æ˜¯æ¯”è¾ƒæœ‰é™çš„ï¼Œä¸”åŠŸèƒ½ç›¸å¯¹å†…èšï¼Œæ¯”è¾ƒå®¹æ˜“æç‚¼ä¸€äº›æŠ½è±¡é€»è¾‘ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ çš„æœºä¼šã€‚å¹¶ä¸”ç”±äºæäº¤äººéœ€è¦åˆå…¥ä¸€ä»½æ–°çš„ä»£ç ï¼Œä»–å¯èƒ½ä¹Ÿæ›´ä¹äºè®¨è®ºä»–æäº¤çš„è¿™ä¸€ä»½ä»£ç ï¼Œè¿›è€Œå‘ç°é—®é¢˜ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å€™æå‡ºé—®é¢˜ï¼Œé€šå¸¸ä¼šå¾—åˆ°æ¯”è¾ƒç§¯æçš„å›å¤ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæäº¤äººåŒæ ·èµ„å†ä¹Ÿæ¯”è¾ƒæµ…ï¼Œé‚£ä¹ˆé€šè¿‡é˜…è¯»åˆ«äººçš„ä»£ç ï¼Œæ¥å‘ç°é—®é¢˜ï¼Œé€šå¸¸æ˜¯æˆ‘ä»¬æ£€éªŒæ‰€å­¦çŸ¥è¯†çš„å¾ˆå¥½çš„ä¸€æ¬¡é”»ç‚¼æœºä¼šã€‚çŸ¥è¯†ç®¡ç†å­¦æ­ç¤ºï¼Œé€šè¿‡å­¦ä¹ ä¹ å¾—çš„çŸ¥è¯†åªæœ‰é€šè¿‡ä¸åœçš„ä½¿ç”¨ï¼Œæ‰ä¼šå†…åŒ–ï¼Œè¿›è€Œå˜æˆè‡ªå·±çš„çŸ¥è¯†ã€‚å®é™…å¼€å‘ä¸­ä½¿ç”¨å¯ä»¥å†…åŒ–çŸ¥è¯†ï¼Œä½¿ç”¨è‡ªå·±çš„ç»éªŒå’Œä¹¦æœ¬æ‰€å­¦ï¼Œå¯¹åˆ«äººçš„ä»£ç è¿›è¡Œè¯„å®¡ï¼Œå¹¶å‘ç°é—®é¢˜ï¼Œä¹Ÿæ˜¯å¯¹æ‰€å­¦çŸ¥è¯†çš„ä¸€ç§ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;æ–°äººç”šå°‘å‚ä¸code-reviewçš„åŸå› å‰–æ&#34;&gt;&lt;a href=&#34;#æ–°äººç”šå°‘å‚ä¸code-reviewçš„åŸå› å‰–æ&#34; class=&#34;headerlink&#34; title=&#34;æ–°äººç”šå°‘å‚ä¸code reviewçš„åŸå› å‰–æ&#34;&gt;&lt;/a&gt;æ–°äººç”šå°‘å‚ä¸code reviewçš„åŸå› å‰–æ&lt;/h1&gt;&lt;p&gt;ä½†å¯æƒœçš„æ˜¯ï¼Œæ®æˆ‘è§‚å¯Ÿï¼Œä¸»åŠ¨æŠ•å…¥code reviewçš„èŒåœºæ–°äººçœŸçš„å¤ªå°‘äº†ã€‚æˆ‘æ€»ç»“åŸå› å¯èƒ½æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿˜æ˜¯èŒåœºä¸Šç£¨ä¸å¼€é¢å­ï¼Œå°¤å…¶æ˜¯å®³ç¾è…¼è…†çš„å›½å†…æ–°èŒåœºäººã€‚å¦‚æœå‚è€ƒGoogleçš„code reviewæŒ‡å—ï¼ŒæŠŠæ¡æå‡ºé—®é¢˜çš„æ–¹å¼ï¼Œåº”è¯¥æ²¡é—®é¢˜çš„&lt;/li&gt;
&lt;li&gt;ä¸­å›½æ•™è‚²é€ æˆçš„ä¸»åŠ¨æ€ç»´å¤ªå°‘ï¼Œæ–°äººä»¬æ›´å…³æ³¨å®‰æ’çš„ä»»åŠ¡ï¼Œè€Œç¼ºä¹ä¸»åŠ¨å­¦ä¹ æ€è€ƒçš„é”»ç‚¼ã€‚å…¶å®ä½ çš„é¢†å¯¼å’ŒåŒäº‹ï¼Œå¤§å¤šæ•°æ—¶å€™å…³æ³¨çš„æ˜¯å·¥ä½œè¾“å‡ºï¼Œè‡ªå·±çš„è¿›æ­¥è¿˜éœ€è¦è‡ªå·±åšä¸»ã€‚å› ä¸ºä½ æ‰æ˜¯è‡ªå·±çš„ownerã€‚&lt;/li&gt;
&lt;li&gt;åŠ ç­æ–‡åŒ–æ‰¼æ€äº†å¾ˆå¤šæ€è€ƒçš„æ—¶é—´ã€‚æœ¬æ¥å›½äººçš„ä¸»è§‚èƒ½åŠ¨æ€§å°±æ¯”è¾ƒå·®ï¼Œå†åŠ ä¸Š996çš„ç’€ç’¨ï¼Œç•™ç»™æ–°äººä»¬æ€è€ƒæ€»ç»“å’Œè§„åˆ’çš„æ—¶é—´å°±è¶Šæ¥è¶Šå°‘äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;æ€»ç»“&#34;&gt;&lt;a href=&#34;#æ€»ç»“&#34; class=&#34;headerlink&#34; title=&#34;æ€»ç»“&#34;&gt;&lt;/a&gt;æ€»ç»“&lt;/h1&gt;&lt;p&gt;æ‰€æœ‰çš„å¼€å‘éƒ½åº”å½“ç§¯æçš„æŠ•èº«code reviewæ´»åŠ¨ä¸­ï¼Œæ–°æ‰‹å¼€å‘æ›´åº”è¯¥å‚ä¸å…¶ä¸­ã€‚å¯èƒ½ä½ ä¸€å¼€å§‹å¹¶ä¸èƒ½å¾ˆå¿«æå‡ºæœ‰æ•ˆæ„è§ï¼Œä½†code reviewæ›´å¤šçš„æ—¶å€™æ˜¯ä¸€ç§å­¦ä¹ å’Œäº¤æµï¼ŒæŠ•èº«å…¶ä¸­æœ‰ç™¾åˆ©è€Œæ— ä¸€å®³ã€‚ç¥æ„¿æ‰€æœ‰æ–°æ‰‹èƒ½å¤Ÿè¿…é€Ÿèµ°å‡ºæ–°æ‰‹æ‘ã€‚&lt;/p&gt;
</content>
        <category term="code review" />
        <updated>2021-10-02T04:26:16.078Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/09/19/obsidian_posts/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%20vs.%20%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95/</id>
        <title>å•å…ƒæµ‹è¯• vs. åŠŸèƒ½æµ‹è¯•</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/09/19/obsidian_posts/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%20vs.%20%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
        <content type="html">&lt;p&gt;æœ€è¿‘åœ¨æŸä¸€æ¬¡è®¨è®ºæµ‹è¯•çš„è¯é¢˜ä¸­ï¼Œæœ‰ä¸€ä½åŒäº‹è®¤ä¸ºâ€œé‡æ„ç»“æœçœ‹æŠ¤ï¼Œç”¨é›†æˆæµ‹è¯•ï¼ˆIntegration Testï¼‰å°±å¯ä»¥äº†ï¼ŒUTçœ‹æŠ¤çš„é€»è¾‘å¤ªå°ï¼Œå¯¼è‡´ä¿®æ”¹è¿‡äºé¢‘ç¹ï¼Œç»´æŠ¤æˆæœ¬å¤ªé«˜ï¼Œæ²¡å¿…è¦ã€‚â€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å‡ ç§æµ‹è¯•åè¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•ï¼ˆUnit Testæˆ–UTï¼‰&lt;br&gt;é’ˆå¯¹å°çš„ä»£ç é€»è¾‘ç¼–å†™çš„æµ‹è¯•ï¼Œä¸éœ€è¦è¿è¡Œåœ¨çœŸå®ç¯å¢ƒä¸Šçš„ï¼Œå¯ä»¥éšæ—¶éƒ¨ç½²ï¼Œéšæ—¶è¿è¡Œï¼Œç»“æœåº”å½“ä¿æŒä¸€è‡´&lt;/li&gt;
&lt;li&gt;åŠŸèƒ½æµ‹è¯•ï¼ˆFunction Testï¼‰&lt;br&gt;é’ˆå¯¹ç‰¹æ€§åŠŸèƒ½ç¼–å†™çš„æµ‹è¯•ï¼Œåº”å½“ä¸å®é™…è¿è¡Œç¯å¢ƒä¿æŒä¸€è‡´ï¼Œæµ‹è¯•è½¯ä»¶äº§å“ç«¯åˆ°ç«¯åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;é›†æˆæµ‹è¯•ï¼ˆIntegration Testï¼‰&lt;br&gt;é’ˆå¯¹ç³»ç»Ÿæˆ–å­ç³»ç»Ÿä¸­æŸä¸ªç»„ä»¶çš„ç‰¹æ€§åŠŸèƒ½ç¼–å†™çš„æµ‹è¯•ï¼Œå¯¹å…¶ä¾èµ–ç»„ä»¶è¿›è¡Œæ‰“æ¡©ï¼Œå¹¶åœ¨çœŸå®ç¯å¢ƒè¿›è¡Œéƒ¨ç½²æµ‹è¯•ï¼Œé€šå¸¸ç”¨äºçœ‹æŠ¤ä»£ç æäº¤è´¨é‡&lt;/li&gt;
&lt;li&gt;å†’çƒŸæµ‹è¯•ï¼ˆSmoke Testï¼‰&lt;br&gt;æˆ‘ä»¬é€šå¸¸è¯´çš„STæŒ‡çš„æ˜¯å†’çƒŸæµ‹è¯•ï¼Œè€Œéç³»ç»Ÿæµ‹è¯•ï¼ˆSystem Testï¼‰ï¼Œå†’çƒŸæµ‹è¯•ä¸é›†æˆæµ‹è¯•æŒ‡ä»£åŒä¸€ç§æµ‹è¯•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦å¤–ï¼ŒITæˆ–STéƒ½æ˜¯ä¸€ç§åŠŸèƒ½æµ‹è¯•ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰çœ‹æŠ¤å®Œæ•´ç‰¹æ€§åŠŸèƒ½çš„æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•ç­‰ï¼Œéƒ½å±äºåŠŸèƒ½æµ‹è¯•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä½åŒå­¦ç»™å‡ºITå¯ä»¥èƒœä»»çœ‹æŠ¤é‡æ„ç»“æœçš„åŸå› æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ITé€šè¿‡å¯¹å‘¨è¾¹ä¾èµ–è¿›è¡Œæ‰“æ¡©ï¼Œå¯ä»¥è¾¾åˆ°80%çš„è¦†ç›–ç‡ï¼Œçœ‹æŠ¤åŠ›åº¦è¶³å¤Ÿ&lt;/li&gt;
&lt;li&gt;åªè¦è®¾è®¡è¶³å¤Ÿç²¾å·§ï¼Œå®Œæˆä¸€ä¸ªå¤§å‹å·¥ç¨‹çš„ITåªéœ€è¦ååˆ†é’Ÿï¼Œè¿è¡Œé€Ÿåº¦è¶³å¤Ÿå¿«&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› ä¸ºåœ¨é‡æ„ä¸­ï¼ŒITå®Œå…¨å¯ä»¥çœ‹æŠ¤ä»£ç è´¨é‡&lt;sup&gt;1âƒ£ï¸&lt;/sup&gt;ï¼Œæ‰€ä»¥UTçš„ä½œç”¨å°±å‰Šå¼±äº†&lt;sup&gt;2âƒ£ï¸&lt;/sup&gt;ã€‚åˆå› ä¸ºUTçœ‹æŠ¤ç²’åº¦è¿‡ç»†ï¼Œå¯¼è‡´UTä»£ç ç»´æŠ¤å›°éš¾ï¼Œç»´æŠ¤UTå¾—ä¸å¿å¤±&lt;sup&gt;3âƒ£ï¸&lt;/sup&gt;ã€‚è€Œå®é™…ä¸Šï¼Œé‚£ä¸ªæ¦œæ ·éƒ¨é—¨å°±æ˜¯è¿™æ ·åšçš„â€”â€”åªç”¨ITçœ‹æŠ¤é‡æ„ï¼Œåº“ä¸Šä»£ç æ”¾å¼ƒå¼€å‘ç»´æŠ¤UTã€‚&lt;/p&gt;
&lt;p&gt;å…ˆä¸é‘è®ºè¯¥éƒ¨é—¨åšæ³•çš„å¯¹ä¸é”™ï¼Œæˆ‘ä»¬é¦–å…ˆé’ˆå¯¹ä¸Šé¢æåˆ°çš„ä¸‰ä¸ªè§‚ç‚¹è¿›è¡Œå‰–æã€‚&lt;/p&gt;
&lt;h1 id=&#34;ITå®Œå…¨å¯ä»¥çœ‹æŠ¤ä»£ç è´¨é‡&#34;&gt;&lt;a href=&#34;#ITå®Œå…¨å¯ä»¥çœ‹æŠ¤ä»£ç è´¨é‡&#34; class=&#34;headerlink&#34; title=&#34;ITå®Œå…¨å¯ä»¥çœ‹æŠ¤ä»£ç è´¨é‡&#34;&gt;&lt;/a&gt;ITå®Œå…¨å¯ä»¥çœ‹æŠ¤ä»£ç è´¨é‡&lt;/h1&gt;&lt;p&gt;è¿™ä¸€ç‚¹æˆ‘æ˜¯è®¤åŒçš„ã€‚UTçš„å…³æ³¨ç‚¹æ˜¯ç»„æˆæ¥å£ä»£ç çš„å°é€»è¾‘ã€‚è™½ç„¶ç†è®ºä¸Šåªè¦ä¿è¯æ¯ä¸ªå°é€»è¾‘çš„è¾“å…¥è¾“å‡ºæ­£ç¡®ï¼Œå°±å¯ä»¥ä¿è¯ä¸€ä¸ªæ¥å£çš„æ­£ç¡®æ€§ï¼Œè¿›è€Œåˆ°æ¨¡å—ï¼Œç»„ä»¶ï¼Œç³»ç»Ÿçº§åˆ«ã€‚ä½†æ˜¯ï¼Œå› ä¸ºUTå¯¹æ¨¡å—çš„åˆ’åˆ†æ¯”è¾ƒç»†ï¼Œæ¨¡å—ä¹‹é—´é‡‡ç”¨æ‰“æ¡©çš„æ–¹å¼è§£å†³ä¾èµ–é—®é¢˜ï¼Œè€Œmockè´¨é‡å‚å·®ä¸é½ï¼ŒåŠ¿å¿…ä¼šé€ æˆå¯¹æ¥å£é—´ï¼Œæ¨¡å—é—´çš„æµ‹è¯•è¯¯å·®ã€‚è¿™ä¹Ÿæ˜¯ä¸å¯æµ‹æ€§çš„ä¸€ç§ä½“ç°ã€‚ç›¸åï¼Œå› ä¸ºITçš„æµ‹è¯•å…³æ³¨ç‚¹ï¼Œåœ¨ç‰¹æ€§åŠŸèƒ½ï¼ˆè‡³å°‘æ˜¯ç»„ä»¶çº§çš„åŠŸèƒ½ï¼‰ï¼Œæ‰€ä»¥ITæ›´æ“…é•¿äºå‘ç°ç»„ä»¶é›†æˆæ—¶çš„bugï¼ˆæ‰€ä»¥å«é›†æˆæµ‹è¯•å˜›ï¼‰ã€‚&lt;/p&gt;
&lt;h1 id=&#34;UTçš„ä½œç”¨è¢«å‰Šå¼±äº†&#34;&gt;&lt;a href=&#34;#UTçš„ä½œç”¨è¢«å‰Šå¼±äº†&#34; class=&#34;headerlink&#34; title=&#34;UTçš„ä½œç”¨è¢«å‰Šå¼±äº†&#34;&gt;&lt;/a&gt;UTçš„ä½œç”¨è¢«å‰Šå¼±äº†&lt;/h1&gt;&lt;p&gt;åˆšæ‰è¯´åˆ°ITç›¸æ¯”UTæ›´æ“…é•¿çœ‹æŠ¤ä»£ç è´¨é‡ï¼Œé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€UTæ²¡ç”¨äº†å‘¢ï¼Ÿ&lt;br&gt;ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯ITä¸æ“…é•¿çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”±äºITå…³æ³¨çš„ä»£ç ç²’åº¦è¾ƒå¤§ï¼Œçœ‹æŠ¤çš„æ˜¯æ¨¡å—æˆ–ç»„ä»¶é—´çš„ç‰¹æ€§æ¥å£ï¼Œä¸åˆ©äºæ„é€ ç»†ç²’åº¦çš„caseï¼Œè¿™é€ æˆåˆ†æ”¯è¦†ç›–ç‡ä½ã€‚æˆ–è€…è¯´å¦‚æœè¦å®ç°è¶…é«˜åˆ†æ”¯è¦†ç›–ç‡ï¼ŒITä»˜å‡ºçš„æˆæœ¬ä¼šæ¯”è¾ƒé«˜ã€‚å…¶ç»“æœå°±æ˜¯æµ‹è¯•ç¨³å®šæ€§é«˜äº†ï¼ˆéšä»£ç æ”¹åŠ¨è€Œå¤±è´¥çš„é¢‘ç‡é™ä½ï¼Œåªè¦ç»„ä»¶é—´æ¥å£ä¿æŒä¸€è‡´ï¼ŒITå°±ä¸éœ€è¦å˜æ›´ï¼‰ï¼Œä½†å¯¹ä»£ç ä¿®æ”¹çš„æ•æ„Ÿåº¦é™ä½ã€‚&lt;/li&gt;
&lt;li&gt;ITçš„å¼€å‘æˆæœ¬é«˜ã€‚å› ä¸ºæ¶‰åŠåˆ°å¤šæ¨¡å—ç”šè‡³å¤šç»„ä»¶ååŒï¼Œcaseå¤æ‚åº¦é«˜ã€‚å¦‚æœæ¶‰åŠæ¨¡å—é—´æ¥å£æ‰“æ¡©ï¼Œç”±äºæ¥å£å¤æ‚åº¦é«˜ï¼Œæ¡©ä»£ç å®ç°ä¹Ÿæ›´ä¸ºå¤æ‚ã€‚åœ¨ç‰¹æ€§ä»£ç å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ— æ³•è¿›è¡Œæœ‰æ•ˆçš„ITå¼€å‘å’Œæµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;ITè¿è¡Œæ—¶é—´ä¹…ã€‚å‰é¢è¯´åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å·¥ç¨‹è¿è¡Œä¸€æ¬¡ITï¼Œè¿è¡Œæ—¶é—´å¯ä»¥æ§åˆ¶åˆ°ååˆ†é’Ÿã€‚å¯èƒ½å¾ˆå¤šäººéƒ½è®¤ä¸ºååˆ†é’Ÿæ˜¯èƒ½å¤Ÿå¿å—çš„é•¿åº¦ã€‚å¯¹äºITæ¥è¯´ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆä¼˜ç§€çš„æ•°å­—äº†ï¼ˆæˆ‘æƒ³ä¸ºäº†å®ç°è¿™ä¸€ç‚¹æœ¬èº«ä¹Ÿæ˜¯è¦ä»˜å‡ºå¾ˆå¤§çš„ä»£ä»·çš„ï¼‰ã€‚ä½†æ˜¯å¦‚æœå°†å…¶è¿ç”¨åˆ°red-green-refactorçš„å¼€å‘èŠ‚å¥ä¸­ï¼Œè¿˜æ˜¯æœ‰äº›ä¸åˆæ—¶å®œã€‚è¯•æƒ³ï¼Œä½ è¦è¿è¡Œä¸€ä¸ªé¢„è®¡ååˆ†é’Ÿä¼šå®Œæˆçš„æµ‹è¯•ï¼Œä½ ä¼šå…¨èº«çŒæ³¨åœ°ç›¯ç€å±å¹•ï¼Œç­‰å¾…ååˆ†é’Ÿç›´åˆ°æµ‹è¯•å®Œæˆå—ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;/2021/09/19/obsidian_posts/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%20vs.%20%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95/Pasted%20image%2020210829201431.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘æƒ³é€šå¸¸æ˜¯ä¸ä¼šçš„ã€‚è¿™æ—¶å€™ï¼Œè‡ªåˆ¶åŠ›å·®ä¸€ç‚¹çš„åŒå­¦å°±å¼€å§‹åˆ·æ‰‹æœºäº†ï¼Œè‡ªåˆ¶åŠ›å¥½ä¸€ç‚¹çš„åŒå­¦ä¼šç€æ‰‹å¤„ç†å…¶ä»–é—®é¢˜ã€‚è¿™å…¶å®å°±æ˜¯å¦ä¸€ç§è¢«æ‰“æ–­ã€‚è€Œè¢«æ‰“æ–­æ˜¯è½¯ä»¶å¼€å‘çš„å¤§å¿Œã€‚ä½ ä¸ä»…å¤±å»è¿›å…¥â€œå¿ƒæµâ€çš„æœºä¼šï¼Œå¹¶ä¸”ä½ å›åˆ°ä¸»çº¿å¼€å‘çš„æ—¶é—´é—´éš”è¶Šé•¿ï¼ŒèŠ±è´¹åœ¨é‡å»ºç°åœºçš„é¢å¤–å¼€é”€å°±ä¼šè¶Šå¤§ï¼Œè¿›è€Œå½±å“ä½ çš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆçœ‹çœ‹æˆ‘ä»¬åˆ©ç”¨ITè¿›è¡Œä¸€æ¬¡å‰æ–‡æåˆ°çš„å¤§å‹â€œé‡æ„â€çš„æµç¨‹ä¼šæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œè¯´çš„é‡æ„ï¼Œæˆ‘è®¤ä¸ºç§°ä¸ºre-architectureæ›´åˆé€‚ï¼Œå’Œæˆ‘ä»¬å¹³æ—¶è¯´çš„refactorè¿˜æ˜¯ä¸å¤ªä¸€æ ·ã€‚ä»–ä»¬çš„å…±åŒç‚¹æ˜¯ï¼Œä¿è¯ä»£ç åŠŸèƒ½ä¸å˜çš„å‰æä¸‹ï¼Œä¼˜åŒ–ä»£ç æ¶æ„å’Œå®ç°ã€‚åŒºåˆ«æ˜¯ï¼Œre-architectureæ˜¯ä¸€æ¬¡æ ¹æœ¬æ€§çš„æ¶æ„å˜æ›´ï¼Œå¯èƒ½æ¶‰åŠåˆ°å¾ˆå¤šæ¨¡å—éœ€è¦é‡å†™ï¼Œè€Œrefactoræ›´å¤šçš„æ˜¯åœ¨å¹³æ—¶åšä¸€äº›ä»£ç è°ƒæ•´ï¼Œå³æ‰€è°“çš„å°æ­¥é‡æ„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;å®šå¥½ç‰¹æ€§æ¶æ„ï¼Œå¼€å§‹ç‰¹æ€§å¼€å‘&lt;/li&gt;
&lt;li&gt;ç‰¹æ€§ä»£ç æ¥è¿‘å®Œæˆæ—¶ï¼Œå¼€å§‹å¼€å‘IT&lt;/li&gt;
&lt;li&gt;å¼€å‘ITçš„åŒæ—¶ï¼Œä¸€è¾¹è°ƒè¯•ITï¼Œä¸€è¾¹ä½¿ç”¨ITæµ‹è¯•ç‰¹æ€§ä»£ç &lt;/li&gt;
&lt;li&gt;é‡å¤æ­¥éª¤3ç›´åˆ°ITä»£ç å’Œç‰¹æ€§ä»£ç å‡æ²¡æœ‰é—®é¢˜ï¼Œå³è¾¾åˆ°å¯äº¤ä»˜çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å‰æ–‡æåˆ°ITçš„æµ‹è¯•æ—¶é—´ç›¸æ¯”UTè¿˜æ˜¯æ¯”è¾ƒä¹…çš„ï¼Œå¦‚æœå°†å…¶è¿ç”¨åˆ°red-green-refactorèŠ‚å¥ä¸­ï¼Œåˆ™å®¹æ˜“é€ æˆæ³¨æ„åŠ›åˆ†æ•£ï¼Œè¿›è€Œå¼•èµ·æ—¶é—´ç®¡ç†å›°å¢ƒ&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰UTï¼Œæ­¥éª¤2é€šå¸¸ä¼šä¸€ç›´å¤„äºâ€œè£¸å¥”â€çŠ¶æ€ï¼Œâ€œè£¸å¥”â€çš„æ—¶é—´å–å†³äºå¼€å‘è€…å¯¹ç‰¹æ€§ä»£ç å¼€å‘çŠ¶æ€çš„è¯„ä¼°ï¼Œä¸€èˆ¬è¦åˆ°ç‰¹æ€§ä»£ç æ¯”è¾ƒæ¥è¿‘å®Œå·¥æ°´å¹³æ—¶ï¼Œæ‰å¯ä»¥ç¼–å†™ITã€‚ç”±äºITå¼€å‘è°ƒè¯•éš¾åº¦é«˜ï¼ŒåŸºæœ¬ä¹Ÿä¸å¤ªå¯èƒ½å’Œç‰¹æ€§ä»£ç ä¸€åŒå¼€å‘ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºITå¼€å‘å’Œè¿è¡Œçš„æˆæœ¬é«˜ï¼Œé‚£ä¹ˆåŠ¿å¿…é€ æˆå¼€å‘æ—¶ï¼Œé’ˆå¯¹ç‰¹æ€§ä»£ç çš„æµ‹è¯•è¿è¿‡å°‘ï¼Œé‚£ä¹ˆç”±äºå¼€å‘çš„ä¸ç¨³å®šæ€§ï¼Œäº§ç”Ÿçš„è¿”å·¥å¯èƒ½æ€§å¤§ï¼Œæˆæœ¬é«˜ã€‚ï¼ˆæ¢å¥è¯è¯´ï¼Œå¦‚æœå¼€å‘å¯¹äºç‰¹æ€§çš„ç†Ÿæ‚‰ç¨‹åº¦éå¸¸é«˜ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥ä¸ä¸€å®šå³æ—¶UTï¼Œè¿˜æ˜¯é€‰æ‹©ä¸å¹³è¡¡é—®é¢˜ã€‚ä¸è¿‡è¿™ç§æƒ…å†µæ®æˆ‘è§‚å¯Ÿè¿˜æ˜¯æ¯”è¾ƒå°‘çš„ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥æŠ›å¼ƒUTï¼Œç¡®å®èŠ‚çœäº†ä¸€äº›ä»£ç å¼€å‘æ—¶é—´ï¼Œä½†ä¹Ÿä¸¢å¤±äº†ä¸€ä»¶éå¸¸é‡è¦çš„æ­¦å™¨ï¼Œå¯¼è‡´æˆ‘ä»¬çš„å¼€å‘èŠ‚å¥åˆå›åˆ°äº†ç€‘å¸ƒå¼å¼€å‘ï¼Œè€Œæ— æ³•å®ç°å°æ­¥å¿«è·‘çš„å³æ—¶é‡æ„å¼€å‘æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šæˆ‘è®¤ä¸ºï¼Œ&lt;strong&gt;å¼•å…¥UTå°±æ˜¯ä¸ºäº†å¼•å…¥reg-green-refactorçš„å¼€å‘èŠ‚å¥ï¼Œä»è€Œé€šè¿‡å®æ—¶é‡æ„ï¼ŒåŠæ—¶æ¶ˆé™¤ä»£ç åå‘³é“ï¼Œè¿›è€Œå®ç°ä»£ç è‡ªä¸‹è€Œä¸Šçš„æ¶æ„è®¾è®¡&lt;/strong&gt;ã€‚ä¸å‰æœŸè‡ªä¸Šè€Œä¸‹çš„ç‰¹æ€§è®¾è®¡é…åˆï¼Œä»¥å®ç°æœ€åˆç†çš„ä»£ç æ¶æ„ã€‚é¿å…åœ¨ç‰¹æ€§è®¾è®¡é˜¶æ®µè¿‡äºå…³æ³¨å®ç°ç»†èŠ‚ï¼Œä¹Ÿé¿å…åœ¨å¼€å‘é˜¶æ®µï¼Œè¿‡äºçº ç»“æƒè¡¡æ¬ è®¾è®¡ä¸è¿‡è®¾è®¡å¯¼è‡´çš„æ•ˆç‡ä½ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;UTçš„è¿è¡Œæˆæœ¬éå¸¸ä½ï¼Œè¿™æ˜¯å› ä¸ºUTä¸å…³æ³¨ä»£ç åŠŸèƒ½ï¼Œåªå…³æ³¨ä»£ç è¾“å…¥è¾“å‡ºé€»è¾‘ã€‚å…¨ç¨‹å¯¹ä¾èµ–æ¥å£è¿›è¡Œæ‰“æ¡©å®ç°ï¼Œè¿è¡Œé€Ÿåº¦å¾ˆå¿«ï¼ˆæ²¡æœ‰ä»»ä½•çš„å»¶æ—¶å’Œå¤šçº¿ç¨‹æ“ä½œï¼Œä¹Ÿå¯èƒ½è¿IOæ“ä½œéƒ½æ²¡æœ‰ï¼‰ã€‚UTé’ˆå¯¹å°é€»è¾‘ç»„ç»‡caseï¼Œå•caseå¤æ‚åº¦ä½ï¼Œcaseä¹‹é—´çš„ä¾èµ–å…³ç³»è¢«ä¸¥æ ¼æ§åˆ¶ã€‚æ‰€ä»¥è¿è¡Œçš„æ—¶å€™ï¼Œä¸€æ–¹é¢é€Ÿåº¦å¿«ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥æ ¹æ®éœ€è¦ï¼Œéšæ„ç»„åˆè¿è¡Œçš„caseä»¥è¾¾åˆ°éœ€è¦çš„æµ‹è¯•èŒƒå›´å’Œç²’åº¦ã€‚ä¾‹å¦‚ï¼šå¯ä»¥é€‰æ‹©è¿è¡Œä¸€ä¸ªcaseæˆ–æ˜¯ä¸€ä¸ªsuiteï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¿è¡Œå¤šä¸ªcaseï¼Œæˆ–è€…å®Œæ•´è¿è¡Œæ‰€æœ‰çš„caseã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šå¯è§ï¼ŒUTå’ŒITæ˜¯ä¸¤ç±»ç”¨é€”å®Œå…¨ä¸åŒçš„æµ‹è¯•æ–¹æ³•ã€‚ä¸€ä¸ªå¥½æ¯”å†›åˆ€ï¼Œå¯ä»¥ä¸Šæˆ˜åœºæ€æ•Œï¼›ä¸€ä¸ªå¥½æ¯”èœåˆ€ï¼Œå¯ä»¥çƒ¹å°é²œæ…°å†›ã€‚ä¸€ä¸ªçœ‹æŠ¤ç»“æœï¼›ä¸€ä¸ªä¿ƒè¿›è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h1 id=&#34;UTç»´æŠ¤å›°éš¾ï¼Œç»´æŠ¤UTå¾—ä¸å¿å¤±&#34;&gt;&lt;a href=&#34;#UTç»´æŠ¤å›°éš¾ï¼Œç»´æŠ¤UTå¾—ä¸å¿å¤±&#34; class=&#34;headerlink&#34; title=&#34;UTç»´æŠ¤å›°éš¾ï¼Œç»´æŠ¤UTå¾—ä¸å¿å¤±&#34;&gt;&lt;/a&gt;UTç»´æŠ¤å›°éš¾ï¼Œç»´æŠ¤UTå¾—ä¸å¿å¤±&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;é‚£UTå¸¦æ¥çš„å·¥ä½œé‡å‘¢ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åˆšæ‰è¯´ï¼Œå¦‚æœæ²¡æœ‰UTï¼Œå…¶å®ä¼šå¼•å…¥å¾ˆå¤šéšæ€§å·¥ä½œé‡ã€‚å¦‚æœè¦è¡¡é‡å·¥ä½œé‡ï¼Œæ›´å…¬å¹³çš„æ¯”è¾ƒåº”å½“æ˜¯å°†ç»´æŠ¤UTçš„å·¥ä½œé‡ä¸è¿™äº›éšæ€§å·¥ä½œé‡è¿›è¡Œæ¯”è¾ƒã€‚é€šå¸¸æˆ‘å¬åˆ°çš„å¯¹UTçš„æŠ±æ€¨å¤§å¤šæ˜¯å› ä¸ºUTçœ‹æŠ¤å†…éƒ¨æ¨¡å—è¾¹ç•Œã€‚å½“ç»„ä»¶å†…éƒ¨å®ç°ä¿®æ”¹æ—¶ï¼Œä¾‹å¦‚å‡½æ•°æ”¹åå­—ï¼Œå˜æ›´å‡½æ•°åŸå‹ç­‰ä¸€äº›ç‰¹åˆ«é¢‘ç¹çš„é‡æ„æ“ä½œï¼Œç”±äºITçœ‹æŠ¤ç»„ä»¶è¾¹ç•Œæ¥å£ï¼ŒITæ›´ç¨³å®šä¸éœ€è¦å˜åŠ¨ã€‚è€ŒUTç”±äºçœ‹æŠ¤äº†å†…éƒ¨æ¨¡å—è¾¹ç•Œï¼Œæ‰€ä»¥UTè¦éšä¹‹æ›´æ–°ã€‚è¿™äº›ç¡®å®çœ‹èµ·æ¥æ˜¯é¢å¤–çš„å·¥ä½œé‡ï¼Œä½†å½“å‰æµè¡Œçš„å¼€å‘å·¥å…·ï¼Œä¾‹å¦‚ä¸€äº›IDEæˆ–è€…VS codeï¼Œéƒ½å·²ç»èƒ½å¤Ÿæä¾›å¾ˆå¥½çš„é‡æ„å·¥å…·ï¼Œåœ¨ä¿®æ”¹å‡½æ•°åå­—ï¼Œä¿®æ”¹å‡½æ•°åŸå‹ï¼Œæˆ–è€…æŠ½å–å‡½æ•°æˆ–å†…è”å‡½æ•°ç­‰æ“ä½œä¸Šï¼Œéƒ½å·²ç»å¯ä»¥å¤§å¤§å‡å°‘å¼€å‘è€…çš„æ“ä½œéš¾åº¦ã€‚å¦å¤–ï¼Œç”±äºUTå¯¹ä»£ç çš„æ•æ„Ÿæ€§ï¼Œè®©ä½ å®æ—¶éƒ½æ„Ÿå—åˆ°ä½ çš„ä»£ç å˜åŠ¨éƒ½æ˜¯ç»è¿‡æµ‹è¯•çš„ï¼Œæ¯ä¸€æ¬¡å˜åŠ¨éƒ½è¢«çœ‹æŠ¤ï¼Œè¿™ç§æ„Ÿè§‰ä¸æ˜¯å¾ˆä»¤äººæœ‰å®‰å…¨æ„Ÿå—ğŸ˜Šï¼Ÿ&lt;/p&gt;
&lt;p&gt;è€Œä¼ ç»Ÿçš„ç€‘å¸ƒå¼å¼€å‘å¸¦æ¥çš„éšæ€§é—®é¢˜ï¼Œå¾ˆå¤šæ˜¯å› ä¸ºäººç±»æ€è€ƒæ–¹å¼å¯¼è‡´çš„ã€‚ä¾‹å¦‚æ€è·¯æ‰“æ–­ï¼Œå¯¹è¿‡è®¾è®¡å’Œæ¬ è®¾è®¡çš„ææƒ§ï¼Œä¸åœè¿”å·¥å¼•èµ·çš„æ²®ä¸§å¿ƒæƒ…ã€‚è¿™äº›å¸¦æ¥çš„å½±å“å¾ˆéš¾å»ä¼°é‡ï¼Œä»–ä»¬å¯èƒ½å¾ˆä¸¥é‡ï¼Œä¹Ÿå¯èƒ½æ— è¶³è½»é‡ï¼Œå®Œå…¨å–å†³äºå¼€å‘è€…è‡ªèº«çš„ç´ è´¨ã€‚ä»¥æˆ‘ä¸ªäººçš„ç»éªŒçœ‹ï¼Œæˆ‘æ˜¯æ›´æ„¿æ„èŠ±ä¸€äº›åˆ‡å®çš„UTæˆæœ¬ï¼Œæ¥æ¶ˆé™¤è¿™äº›ä¸ç¡®å®šæ€§ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ€»ç»“&#34;&gt;&lt;a href=&#34;#æ€»ç»“&#34; class=&#34;headerlink&#34; title=&#34;æ€»ç»“&#34;&gt;&lt;/a&gt;æ€»ç»“&lt;/h1&gt;&lt;p&gt;å†å›è¿‡å¤´æ¥åˆ†æä¸€ä¸‹é‚£ä¸ªæˆåŠŸéƒ¨é—¨çš„åšæ³•ã€‚é€šè¿‡ITçœ‹æŠ¤é‡æ„ç»“æœï¼Œå¹¶ä¸¢å¼ƒUTè¿™ç§æµ‹è¯•æ–¹æ³•ã€‚é¦–å…ˆï¼Œé‡æ„ç»“æœå¤§æ¦‚ç‡ä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæœ‰è¶³å¤Ÿæµ‹è¯•åŠ›åº¦çš„ITä½œä¸ºçœ‹æŠ¤å·¥å…·ã€‚å…¶æ¬¡ï¼Œå› ä¸ºç¼ºä¹åŠæ—¶è¿è¡Œçš„æµ‹è¯•caseï¼Œé‡æ„å¼€å‘æ—¶æ•ˆç‡å¾—ä¸åˆ°ä¿è¯ã€‚å¤§æ¦‚ç‡åªèƒ½é€šè¿‡æ¨¡å—é‡å†™å®ç°ã€‚å¦å¤–ï¼Œåˆå› ä¸ºé‡æ„æ•ˆç‡ä½ï¼Œæˆæœ¬é«˜ï¼Œé‡æ„åªèƒ½ç§¯æ”’èµ·æ¥ä¸€æ¬¡æ€§å®Œæˆã€‚äºæ˜¯refactorå˜æˆre-architectureã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¯è¯´å›æ¥ï¼Œæµ‹è¯•ç­–ç•¥å¹¶æ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œæ°¸è¿œæ˜¯é¡¹ç›®ç»„æ ¹æ®è‡ªèº«æƒ…å†µï¼Œæƒè¡¡å¾—å‡ºçš„ã€‚å¯èƒ½é¡¹ç›®ç»„ä¸€æ—¶æ— æ³•è·å¾—UTçš„ä»·å€¼ï¼Œæˆ–è€…é¡¹ç›®ç»„å¯¹UTå¯¹æŠ€æœ¯ç§¯ç´¯ä¸å……åˆ†ï¼Œä»è€Œæ— æ³•å¾ˆå¥½å¯¹å®è·µUTã€‚ä½†æˆ‘ä»¬è¿˜æ˜¯åº”è¯¥å˜æ¸…å•å…ƒæµ‹è¯•å’ŒåŠŸèƒ½æµ‹è¯•çš„å·®åˆ«ï¼Œåˆ†æ¸…åº”ç”¨åœºåˆï¼Œè¿™æ ·æ‰èƒ½æ›´å¥½åœ°æœæ­£ç¡®çš„æ–¹å‘æ¼”è¿›ã€‚&lt;/p&gt;
</content>
        <category term="UT" />
        <category term="TDD" />
        <updated>2021-09-19T12:40:57.189Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/09/18/obsidian_posts/RBAC/</id>
        <title>RBAC</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/09/18/obsidian_posts/RBAC/"/>
        <content type="html">&lt;p&gt;RBAC, Role Based Access Control, æ˜¯SELinuxçš„å¦ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§ã€‚ä½†ä»–å¹¶ä¸æ˜¯ä¸€ç§ç‹¬ç«‹çš„æ§åˆ¶æ–¹å¼ï¼Œè€Œæ˜¯å¯¹TEACçš„ä¸€ç§è¡¥å……ã€‚å…¶ä¸»è¦çš„ä½œç”¨æ˜¯ï¼Œæ„å»ºSELinuxæä¾›çš„è¿›ç¨‹çº§çš„MACæœºåˆ¶ä¸Linuxçš„ç”¨æˆ·ç³»ç»Ÿçš„æ˜ å°„å…³ç³»ã€‚&lt;/p&gt;
&lt;h1 id=&#34;RBACå·¥ä½œåŸç†&#34;&gt;&lt;a href=&#34;#RBACå·¥ä½œåŸç†&#34; class=&#34;headerlink&#34; title=&#34;RBACå·¥ä½œåŸç†&#34;&gt;&lt;/a&gt;RBACå·¥ä½œåŸç†&lt;/h1&gt;&lt;p&gt;RBACå¹¶ä¸æä¾›å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼Œè€Œæ˜¯é€šè¿‡userï¼Œroleï¼Œtypeä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œæ¥æ§åˆ¶type_transitionç­–ç•¥èƒ½å¦æˆåŠŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;role-vs-type&#34;&gt;&lt;a href=&#34;#role-vs-type&#34; class=&#34;headerlink&#34; title=&#34;role vs. type&#34;&gt;&lt;/a&gt;role vs. type&lt;/h2&gt;&lt;p&gt;role basedæœ€åŸºæœ¬çš„å°±æ˜¯å®šä¹‰roleåˆ°typeåˆ°å¯¹åº”å…³ç³»ã€‚ä½¿ç”¨roleè¯­å¥å¯ä»¥å®ç°ï¼š&lt;code&gt;role role_name [types type_set];&lt;/code&gt;ã€‚ä¾‹å¦‚ï¼š&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;role user_r types user_t;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;role user_r types &amp;#123; staff_t, admin_t &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;roleå®šä¹‰æ˜¯ç´¯ç§¯çš„ï¼Œå³åé¢çš„å¯¹åº”å…³ç³»ä¸ä¼šè¦†ç›–å‰é¢è¯­å¥å®šä¹‰çš„å¯¹åº”å…³ç³»ï¼Œè€Œåªä¼šè¿½åŠ è¿™ç§å…³ç³»&lt;/li&gt;
&lt;li&gt;roleè¯­å¥é€šå¸¸å®šä¹‰åœ¨typeå£°æ˜é™„è¿‘ï¼Œä»¥ç¡®ä¿è¯¥å¯¹åº”å…³ç³»è¢«åŠæ—¶å®šä¹‰&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å®šä¹‰å­role (period)&lt;/strong&gt;&lt;br&gt;A period is used to indicate restrictions on the set of types that may be assigned to a role. For example, the set of types for a role called &lt;strong&gt;&lt;em&gt;apache.cgi&lt;/em&gt;&lt;/strong&gt; must be a &lt;strong&gt;&lt;em&gt;subset&lt;/em&gt;&lt;/strong&gt; of the type set of a role called &lt;strong&gt;&lt;em&gt;apache&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;roleè¯­å¥å®šä¹‰çš„åŸºæœ¬é€»è¾‘å°±æ˜¯ï¼Œå®šä¹‰äº†role=&amp;gt;{ types }é›†åˆçš„æ˜ å°„å…³ç³»ã€‚å½“å‘ç”Ÿtype transitionæ—¶ï¼Œå¦‚æœè½¬æ¢åçš„{roleï¼Œtype}ç»„åˆæœªå®šä¹‰ï¼Œåˆ™è§†ä¸ºæƒé™é”™è¯¯ã€‚ä»è¿™ä¸ªå±‚é¢çœ‹ï¼Œroleå¯¹åº”çš„æ˜¯ä¸»ä½“typeï¼Œå³domain typeï¼Œè€Œéobject typeã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç‰¹æ®Šçš„role-object-r&#34;&gt;&lt;a href=&#34;#ç‰¹æ®Šçš„role-object-r&#34; class=&#34;headerlink&#34; title=&#34;ç‰¹æ®Šçš„role: object_r&#34;&gt;&lt;/a&gt;ç‰¹æ®Šçš„role: object_r&lt;/h3&gt;&lt;p&gt;object_ræ˜¯å†…æ ¸SELinuxæ¨¡å—é¢„å®šä¹‰çš„ä¸€ä¸ªroleï¼Œæ— éœ€åœ¨policyä¸­å£°æ˜ã€‚è€Œè¿™ä¸ªobject_rè¢«ä¸“é—¨ç”¨æ¥å®šä¹‰å®¢ä½“çš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;user-vs-role&#34;&gt;&lt;a href=&#34;#user-vs-role&#34; class=&#34;headerlink&#34; title=&#34;user vs. role&#34;&gt;&lt;/a&gt;user vs. role&lt;/h2&gt;&lt;p&gt;useræ˜¯å¯¹roleçš„å†ä¸€æ¬¡æ‰©å……ï¼Œé€šè¿‡userå°†roleä¸Linux userçš„æ˜ å°„å…³ç³»å»ºç«‹èµ·æ¥ã€‚SELinuxçš„ç”¨æˆ·ç³»ç»Ÿç‹¬ç«‹äºLinuxç”¨æˆ·ç³»ç»Ÿã€‚é€šè¿‡seusersæ–‡ä»¶æˆ–è€…&lt;code&gt;semanage user&lt;/code&gt;å‘½ä»¤å¯ä»¥å®šä¹‰ä»–ä»¬ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚ä½†å®é™…å¯å®šä¹‰çš„è‡ªç”±åº¦å¹¶æ²¡æœ‰é‚£ä¹ˆé«˜ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The design decision for SELinux to have a distinct user identifier (rather than share that of Linux) is motivated by the desire to create an immutable SELinux user identifier.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å®šä¹‰ä¸€ä¸ªuserä¸roleçš„æ˜ å°„å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨userè¯­å¥ï¼š&lt;code&gt;user user_name roles &amp;#123; role_set &amp;#125;;&lt;/code&gt;&lt;br&gt;userè¯­å¥æ‰€ä½“ç°çš„é€»è¾‘å’Œroleè¯­å¥ç±»ä¼¼ï¼Œå³å®šä¹‰äº†user=&amp;gt;{ roles }é›†åˆçš„æ˜ å°„å…³ç³»ã€‚å½“åº”ç”¨å¯åŠ¨æ—¶å‘ç”Ÿrole transitionæ—¶ï¼Œå¦‚æœè½¬æ¢åçš„{user, role}æœªå®šä¹‰ï¼Œåˆ™è§†ä¸ºæƒé™é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å½“SELinuxé€šè¿‡RBACï¼Œå»ºç«‹èµ·user=&amp;gt;role=&amp;gt;typeçš„æ˜ å°„å…³ç³»ä»¥åï¼Œè¿˜è·å¾—äº†ä¸€ä¸ªå¥½å¤„ã€‚Linuxç³»ç»Ÿçš„ç”¨æˆ·æ•°å¯èƒ½å¾ˆå¤šï¼Œè€Œç”¨æˆ·çš„ç±»å‹å¾ˆå°‘ã€‚ç”¨æˆ·å¹¶ä¸æ˜¯ä¸ºäº†å®šä¹‰æƒé™çš„ï¼Œä¸åŒçš„ç”¨æˆ·ä¹‹é—´çš„ä½¿ç”¨æ•°æ®éœ€è¦éš”ç¦»ã€‚ä½†å¾€å¾€ä¸€ç±»ç”¨æˆ·çš„æƒé™æ˜¯ç›¸åŒçš„ã€‚ä¾‹å¦‚è¶…çº§ç”¨æˆ·ï¼Œç®¡ç†å‘˜ç”¨æˆ·ï¼Œæ™®é€šç”¨æˆ·ç­‰ç­‰ã€‚ç³»ç»Ÿçš„æƒé™é›†æœ€å°ç²’åº¦ç”±domainå®šä¹‰ã€‚å¯èƒ½æ¯ä¸ªè¿›ç¨‹çš„æƒé™ä¸åŒï¼Œä¹Ÿå¯èƒ½ä¸€ç»„è¿›ç¨‹çš„æƒé™ç›¸åŒã€‚ä½†å¾€å¾€domainçš„æ•°é‡ä¹Ÿå¾ˆåºå¤§ã€‚å¦‚æœæ²¡æœ‰RBACï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰useråˆ°domainåˆ°æ˜ å°„ã€‚è¿™æ ·ä¹Ÿä¸æ˜¯ä¸èƒ½åšï¼Œä½†å´ä¸å¤ªä¼˜é›…ã€‚æ¯æ¬¡æ–°å¢ç”¨æˆ·æ—¶ï¼Œéœ€è¦ä¸ºæ–°å¢ç”¨æˆ·ç»‘å®šä¸€å †domainã€‚å®šä¹‰äº†roleä¹‹åï¼Œroleç›¸å½“äºè¾ƒç¨³å®šçš„ä¸€å±‚æŠ½è±¡ï¼Œroleåˆ°typesçš„æ˜ å°„å…³ç³»æ˜¯åœ¨å®šä¹‰typeæ—¶å€™å°±å®šä¹‰äº†çš„ã€‚å¢åŠ æ–°userçš„æ—¶å€™ï¼Œåªè¦å®šä¹‰useråˆ°roleçš„æ˜ å°„å³å¯ã€‚è¿™å°±æ˜¯å¼•å…¥RBACçš„åŸå› ã€‚&lt;/p&gt;
&lt;pre class=&#34;mermaid&#34;&gt;graph LR
A[user] --&gt; B[role]
A --&gt; C[role]
A --&gt; D[role]
C --&gt; E[domain]
C --&gt; F[domain]
C --&gt; G[domain]&lt;/pre&gt;

&lt;h3 id=&#34;Linuxç”¨æˆ·-vs-SELinux-user&#34;&gt;&lt;a href=&#34;#Linuxç”¨æˆ·-vs-SELinux-user&#34; class=&#34;headerlink&#34; title=&#34;Linuxç”¨æˆ· vs. SELinux user&#34;&gt;&lt;/a&gt;Linuxç”¨æˆ· vs. SELinux user&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å½“å‰ç³»ç»Ÿçš„ç”¨æˆ·å¯ä»¥é€šè¿‡æŸ¥çœ‹/etc/passwdæ–‡ä»¶è·å–ï¼Œä¹Ÿå¯ä»¥å‚è€ƒ&lt;a href=&#34;https://zhuanlan.zhihu.com/p/41161408&#34;&gt;åˆ—å‡º Linux ç³»ç»Ÿä¸Šæ‰€æœ‰ç”¨æˆ·çš„ 3 ç§æ–¹æ³•&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹SELinuxçš„ç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤&lt;code&gt;semanage user -l&lt;/code&gt;.&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;               æ ‡è®°ä¸­        MLS/       MLS/                          &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;SELinux ç”¨æˆ·      å‰ç¼€         MCS çº§åˆ«     MCS èŒƒå›´                         SELinux è§’è‰²&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;guest_u         user       s0         s0                             guest_r&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;root            user       s0         s0-s0:c0.c1023                 staff_r sysadm_r system_r unconfined_r&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;staff_u         user       s0         s0-s0:c0.c1023                 staff_r sysadm_r unconfined_r&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sysadm_u        user       s0         s0-s0:c0.c1023                 sysadm_r&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;system_u        user       s0         s0-s0:c0.c1023                 system_r unconfined_r&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;unconfined_u    user       s0         s0-s0:c0.c1023                 system_r unconfined_r&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;user_u          user       s0         s0                             user_r&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;xguest_u        user       s0         s0                             xguest_r&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹ä¸¤è€…çš„æ˜ å°„å…³ç³»å¯ä»¥é€šè¿‡å‘½ä»¤&lt;code&gt;semanage login -l&lt;/code&gt;.&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ç™»å½•å                  SELinux ç”¨æˆ·           MLS/MCS èŒƒå›´           æœåŠ¡&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;__default__          unconfined_u         s0-s0:c0.c1023       *&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;john                 user_u               s0                   *&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;root                 unconfined_u         s0-s0:c0.c1023       *&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Linuxç”¨æˆ·å’ŒSELinuxç”¨æˆ·çš„åˆå§‹æ˜ å°„å…³ç³»ç”±seusersæ–‡ä»¶æŒ‡å®šã€‚è¿™ä¸ªæ–‡ä»¶ä¸å±äºç­–ç•¥äºŒè¿›åˆ¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå¯ä»¥ç›´æ¥ä¿®æ”¹ç”Ÿæ•ˆã€‚å½“ç„¶æ›´ä¼˜é›…çš„åŠæ³•æ˜¯é€šè¿‡semanageå‘½ä»¤æ¥ä¿®æ”¹ã€‚&lt;br&gt;å¦å¤–ï¼Œåœ¨ä¿®æ”¹äº†contextä»¥åï¼Œæˆ–è€…æ–°å»ºäº†ç”¨æˆ·ä»¥åï¼Œå¿…é¡»è¦ä½¿ç”¨æ³¨é”€ç™»å½•çš„æ–¹æ³•ï¼Œæ‰èƒ½ä½¿æ–°çš„contextç”Ÿæ•ˆï¼Œè€Œåªä½¿ç”¨suå‘½ä»¤åˆ‡æ¢ç”¨æˆ·ï¼Œå¹¶ä¸ä¼šåˆ‡æ¢contextã€‚æ¨æµ‹æ³¨é”€ç™»å½•ä½¿ç”¨çš„æ˜¯PAMç™»å½•ç¨‹åºï¼Œè€Œsuå‘½ä»¤ä¸­ï¼Œå¹¶æ²¡æœ‰é‡æ–°åŠ è½½user contextçš„åŠŸèƒ½ã€‚&lt;br&gt;Linuxç”¨æˆ·ç™»å½•åï¼Œè·å–shellå®‰å…¨ä¸Šä¸‹æ–‡çš„æ­¥éª¤ï¼Œå¯ä»¥å‚è€ƒæ–‡çŒ®ã€2ã€‘ã€‚ç®€è¿°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ ¹æ®seusersæ–‡ä»¶ï¼Œæ˜ å°„SELinuxç”¨æˆ·ï¼Œå¦‚æœæ²¡æœ‰seusersæ–‡ä»¶ï¼Œç³»ç»Ÿå°±æ— æ³•å¯åŠ¨äº†ã€‚å¦‚æœseusersæ–‡ä»¶æ²¡æœ‰å¯¹åº”çš„ç”¨æˆ·æè¿°ï¼Œåˆ™ç»Ÿä¸€æ˜ å°„ä¸º&lt;code&gt;__default__&lt;/code&gt;ç”¨æˆ·ã€‚å¦‚æœ&lt;code&gt;__default__&lt;/code&gt;ç”¨æˆ·æè¿°ä¸å­˜åœ¨ï¼Œåˆ™æ— æ³•ç™»å½•ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®SELinuxçš„æœç´¢ä¼˜å…ˆçº§ï¼Œæ‰¾åˆ°å¯¹åº”SELinuxç”¨æˆ·çš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å‹˜è¯¯&lt;/strong&gt;&lt;br&gt;åœ¨[1]ä¸­ï¼Œå¯¹Linuxç”¨æˆ·å’ŒSELinuxçš„æ˜ å°„å…³ç³»æœ‰å¦‚ä¸‹æè¿°ï¼š&lt;br&gt;On login, if there is an SELinux user identifier that is exactly the same as the Linux user identifier, the matching SELinux user identifier becomes the user identifier in the security context for the initial shell process. In this way, if a Linux user identifier also exists as a user identifier in the SELinux policy, all login processes will set the initial shell process security context user identifier to that matching Linux identity.&lt;br&gt;ç»å®éªŒè¯æ˜ï¼Œå¹¶éå¦‚æ­¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®šä¹‰äº†ä¸€ä¸ªguest_uç”¨æˆ·ï¼Œç™»å½•åï¼Œå…¶shellçš„å®‰å…¨ä¸Šä¸‹æ–‡ä»ä¸ºï¼š&lt;br&gt;&lt;img src=&#34;/2021/09/18/obsidian_posts/RBAC/163C5090-847B-49EC-B709-3AAA87D776D9.png&#34; alt=&#34;1ca6909a350aa84947ea565bb4c8eaa2&#34;&gt;&lt;/li&gt;
&lt;li&gt;ä½†äº‹å®è¯æ˜ï¼Œæ˜æ˜å°±æœ‰guest_uè¿™ä¸ªç”¨æˆ·&lt;br&gt;&lt;img src=&#34;/2021/09/18/obsidian_posts/RBAC/CA68A544-BEE4-4B4E-9BC5-EA3452F816F9.png&#34; alt=&#34;7737fbc74190005733b9f01b60178907&#34;&gt;&lt;br&gt;æ¨æµ‹ï¼Œå¯èƒ½æ˜¯å› ä¸ºSELinuxä¹Ÿä¸€ç›´åœ¨å‘å±•æ”¹è¿›ä¸­ã€‚[1]d æˆä¹¦æ—¶é—´æ˜¯2006å¹´ï¼Œå½¼æ—¶è¿˜æ˜¯FCï¼ˆFedora Coreï¼‰5çš„å¹´ä»£ï¼Œç°åœ¨æœ€æ–°ç‰ˆå·²ç»æ˜¯Fedora 33ï¼Œ2020å¹´10æœˆä»½å‘å¸ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;&lt;a href=&#34;#æ€»ç»“&#34; class=&#34;headerlink&#34; title=&#34;æ€»ç»“&#34;&gt;&lt;/a&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;ç°åœ¨å¯ä»¥å¼•ç”¨[1]ä¸­çš„ä¸€å¹…å›¾æ¥æ€»ç»“ä¸€ä¸‹RBACçš„å·¥ä½œåŸç†äº†ã€‚&lt;br&gt;&lt;img src=&#34;/2021/09/18/obsidian_posts/RBAC/6903A6B7-B8D6-4621-8AF4-C276F4EAD57F.png&#34; alt=&#34;115b4d2e2576fd1b93937d66425645d5&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Linuxç³»ç»Ÿæœ‰ä¸€ä¸ªç”¨æˆ·è¾ƒjoe&lt;/li&gt;
&lt;li&gt;SELinuxcelueä¸­è§„å®šjoeå’Œuser_rç»‘å®šï¼Œuser_rå’Œuser_tç»‘å®š&lt;/li&gt;
&lt;li&gt;å½“joeç™»å½•æ—¶ï¼Œç³»ç»Ÿæ ¹æ®seusersï¼ˆæ­¤å¤„ä¸å›¾ä¸åŒï¼Œå‚è§ä¸Šä¸€ç« å‹˜è¯¯ï¼‰ï¼Œæ‰¾åˆ°å¯¹åº”çš„SELinux userï¼Œæ‰¾ä¸åˆ°å°±æ˜¯&lt;strong&gt;default&lt;/strong&gt;, &lt;strong&gt;default&lt;/strong&gt;æ²¡æœ‰å°±ä¸èƒ½ç™»å½•äº†&lt;/li&gt;
&lt;li&gt;æ ¹æ®ä»¥ä¸‹contextæ–‡ä»¶é¡ºåºï¼Œå†³å®šå…¶shellçš„å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œå³joe:user_r:user_t&lt;ul&gt;
&lt;li&gt;/etc/selinux/specified-policy/contexts/users&lt;/li&gt;
&lt;li&gt;/etc/selinux/specified-policy/contexts/default_contexts&lt;/li&gt;
&lt;li&gt;/etc/selinux/specified-policy/contexts/failsafe_context&lt;/li&gt;
&lt;li&gt;sid kernelçš„å®‰å…¨ä¸Šä¸‹æ–‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;joeæ‰§è¡Œäº†ä¸€ä¸ªåº”ç”¨ï¼Œå¼€å§‹è¿›è¡Œdomain_transition, è¦ä»user_tåˆ‡æ¢åˆ°passwd_t&lt;ul&gt;
&lt;li&gt;å¦‚æœå®šä¹‰äº†&lt;code&gt;role user_r types passwd_t&lt;/code&gt;å’Œ&lt;code&gt;role user_r types user_t&lt;/code&gt;ï¼Œåˆ™è¿™æ¬¡domain transitionå¯ä»¥æˆåŠŸ&lt;/li&gt;
&lt;li&gt;å¦åˆ™ä»»æ„ä¸€ä¸ªæœªå®šä¹‰ï¼Œdomain transitionéƒ½ä¼šå¤±è´¥&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;é«˜é˜¶ç”¨æ³•&#34;&gt;&lt;a href=&#34;#é«˜é˜¶ç”¨æ³•&#34; class=&#34;headerlink&#34; title=&#34;é«˜é˜¶ç”¨æ³•&#34;&gt;&lt;/a&gt;é«˜é˜¶ç”¨æ³•&lt;/h1&gt;&lt;h2 id=&#34;role-transition&#34;&gt;&lt;a href=&#34;#role-transition&#34; class=&#34;headerlink&#34; title=&#34;role_transition&#34;&gt;&lt;/a&gt;role_transition&lt;/h2&gt;&lt;p&gt;role transitionå’Œdomain transitionéå¸¸ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åœ¨æŸä¸ªdomainè¿›ç¨‹åœ¨æ‰§è¡ŒæŸä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå³execç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œåˆ‡æ¢è¿›ç¨‹ä¸»ä½“çš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚domain transitionåˆ‡æ¢çš„æ—¶domainï¼Œrole transtionåˆ‡æ¢çš„æ˜¯roleã€‚å®ç°æ–¹å¼é€šè¿‡ä»¥ä¸‹ä¸¤æ¡è¯­å¥ï¼š&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;allow staff_r sysadm_r; # å…è®¸ä»staff_råˆ‡æ¢åˆ°sysadm_r&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;role_transition sysadm_r http_exec_t system_r; # sysadm_rè¿›ç¨‹æ‰§è¡Œhttp_exec_tç±»å‹æ–‡ä»¶æ—¶ï¼Œroleåˆ‡æ¢ä¸ºsystem_r&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;role-dominance&#34;&gt;&lt;a href=&#34;#role-dominance&#34; class=&#34;headerlink&#34; title=&#34;role_dominance&#34;&gt;&lt;/a&gt;role_dominance&lt;/h2&gt;&lt;p&gt;å¯ä»¥åˆ©ç”¨roleæ¥å®šä¹‰å…¶ä»–roleï¼Œå³role dominanceã€‚&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;dominance &amp;#123; role super_r &amp;#123;role sysadm_r; role secadm_r; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;ä¸Šé¢ä¾‹å­ä¸­çš„super_rç§°ä¸ºdominant roleï¼Œå®ƒå¯ä»¥ä»å®ƒå…³è”çš„roleä¸­å³æˆtypesã€‚ä½†å®ƒåªèƒ½ç»§æ‰¿è¯¥æ¡è¯­å¥ä¹‹å‰å…³è”çš„typesã€‚æˆ‘ä»¬ä¹‹å‰è¯´roleè¯­å¥æ˜¯å¯ä»¥ç´¯ç§¯çš„ã€‚é‚£ä¹ˆåœ¨role_dominanceè¯­å¥ä¹‹åå®šä¹‰çš„typesï¼Œå¹¶ä¸èƒ½åŠ¨æ€çš„æ·»åŠ åˆ°dominant roleä¸Šã€‚&lt;/p&gt;
&lt;h1 id=&#34;ç›¸å…³å·¥å…·&#34;&gt;&lt;a href=&#34;#ç›¸å…³å·¥å…·&#34; class=&#34;headerlink&#34; title=&#34;ç›¸å…³å·¥å…·&#34;&gt;&lt;/a&gt;ç›¸å…³å·¥å…·&lt;/h1&gt;&lt;p&gt;è·Ÿroleç›¸å…³çš„ä¸»è¦æ˜¯semnageçš„ä¸€äº›ç”¨æ³•ï¼Œå¦å¤–[1]è¿˜ä»‹ç»äº†ä¸€ä¸ªapolçš„å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥æ£€ç´¢userå’Œroleçš„æ•°æ®ã€‚æˆ‘ç†è§£semanageé€šè¿‡å‘½ä»¤è¡Œä¹Ÿéƒ½å¯ä»¥å®ç°ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‰æ–‡ä»‹ç»è¿‡çš„&lt;code&gt;semanage user -l&lt;/code&gt;å’Œ&lt;code&gt;semanage login -l&lt;/code&gt;, å‰è€…ç”¨æ¥æŸ¥çœ‹æ‰€æœ‰SELinuxçš„ç”¨æˆ·ï¼Œåè€…ç”¨æ¥æŸ¥çœ‹Linuxç”¨æˆ·å’ŒSELinuxç”¨æˆ·ä¸¤è€…çš„æ˜ å°„å…³ç³».&lt;/li&gt;
&lt;li&gt;Modify the default user on the system to the guest_u user&lt;ul&gt;
&lt;li&gt;&lt;code&gt;semanage login -m -s guest_u __default__&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹userå’Œroleçš„å¯¹åº”å…³ç³»&lt;ul&gt;
&lt;li&gt;&lt;code&gt;semanage user -m -R &amp;quot;message_filter_r unconfined_r&amp;quot; user_u&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ·»åŠ ä¸€ä¸ªç”¨æˆ·å¹¶æŒ‡å®šSELinuxç”¨æˆ·&lt;ul&gt;
&lt;li&gt;&lt;code&gt;useradd joe -Z user_u&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;a href=&#34;#å‚è€ƒæ–‡çŒ®&#34; class=&#34;headerlink&#34; title=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;/a&gt;å‚è€ƒæ–‡çŒ®&lt;/h1&gt;&lt;p&gt;[1] &lt;a href=&#34;https://app.yinxiang.com/shard/s10/nl/161681/ea41e2f7-d7a8-4629-9f8c-c08696f578af/&#34;&gt;SELinux by Example_ Using Security Enhanced Linux&lt;/a&gt;&lt;br&gt;[2] &lt;a href=&#34;https://blog.csdn.net/keheinash/article/details/81047520&#34;&gt;SELinuxåˆå§‹åŒ–ç™»å½•ç”¨æˆ·å®‰å…¨ä¸Šä¸‹æ–‡çš„æ–¹æ³•&lt;/a&gt;&lt;/p&gt;
</content>
        <category term="security" />
        <category term="SELinux" />
        <updated>2021-09-18T14:17:35.996Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/09/18/obsidian_posts/initializer-list%E5%92%8C%E5%88%97%E8%A1%A8%E5%88%9D%E5%A7%8B%E5%8C%96/</id>
        <title>initializer-listå’Œåˆ—è¡¨åˆå§‹åŒ–</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/09/18/obsidian_posts/initializer-list%E5%92%8C%E5%88%97%E8%A1%A8%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
        <content type="html">&lt;h1 id=&#34;C-11çš„åˆ—è¡¨åˆå§‹åŒ–&#34;&gt;&lt;a href=&#34;#C-11çš„åˆ—è¡¨åˆå§‹åŒ–&#34; class=&#34;headerlink&#34; title=&#34;C++11çš„åˆ—è¡¨åˆå§‹åŒ–&#34;&gt;&lt;/a&gt;C++11çš„åˆ—è¡¨åˆå§‹åŒ–&lt;/h1&gt;&lt;p&gt;åœ¨Cè¯­è¨€å’ŒC++98/03ä¸­ï¼Œå¤§æ‹¬å·å¯ä»¥ç”¨æ¥åˆå§‹åŒ–æ•°ç»„ï¼Œä¾‹å¦‚ï¼š&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; a[] = &amp;#123;&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; b[&lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;] = &amp;#123;&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;&amp;#125;; &lt;span class=&#34;comment&#34;&gt;// å¦‚æœä¸ªæ•°ä¸è¶³çš„ï¼Œç”¨0åˆå§‹åŒ–&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;C++11å°†è¿™ç±»å¤§æ‹¬å·åˆå§‹åŒ–ï¼Œæ‰©å±•åˆ°è‡ªå®šä¹‰ç±»å‹ï¼Œä½†éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œå¦åˆ™ä¼šç¼–è¯‘æŠ¥é”™ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒ&lt;a href=&#34;https://blog.csdn.net/JinhuCheng/article/details/107330983&#34;&gt;C++11æ–°ç‰¹æ€§ä¹‹åˆ—è¡¨åˆå§‹åŒ–ã€PODã€èšåˆç±»&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;C++98/03æ ‡å‡†ä¸­å¯¹äºæ™®é€šæ•°ç»„å’ŒPODç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;C++11æ ‡å‡†ä¸­å¯¹äºæ™®é€šæ•°ç»„å’Œèšåˆç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;C++11æ ‡å‡†ä¸­å¯¹äºéèšåˆç±»å‹å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ„é€ å‡½æ•°çš„æ–¹å¼ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–ã€‚&lt;br&gt;&lt;a href=&#34;https://blog.csdn.net/hailong0715/article/details/54018002&#34;&gt;C++11æ–°ç‰¹æ€§ä¹‹åˆ—è¡¨åˆå§‹åŒ–&lt;/a&gt;æåˆ°éèšåˆç±»å‹ä¸èƒ½ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–æ˜¯ä¸å¯¹çš„ã€‚å®éªŒè¯æ˜ï¼Œä¸è®ºæ˜¯ä¸æ˜¯èšåˆç±»å‹ï¼Œå‡å¯ä»¥é‡‡ç”¨åˆ—è¡¨åˆå§‹åŒ–ã€‚&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;A&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; a1) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(std::initializer_list&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt; l) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; a &amp;#123;&lt;span class=&#34;number&#34;&gt;12&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	A a = &amp;#123;&lt;span class=&#34;number&#34;&gt;123&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
é¦–å…ˆå£°æ˜&lt;code&gt;A a=&amp;#123;123&amp;#125;&lt;/code&gt;æˆ–è€…&lt;code&gt;A a&amp;#123;123&amp;#125;&lt;/code&gt;è¿™ä¸¤ç§æ„é€ æ–¹æ³•æ˜¯ä¸€è‡´çš„ã€‚&lt;br&gt;å…¶æ¬¡ï¼Œå¯¹äºè¿™ç§æ„é€ æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šå…ˆå°è¯•ç”¨&lt;code&gt;A(std::initializer_list&amp;lt;int&amp;gt; l)&lt;/code&gt;å»åŒ¹é…ï¼Œå¦‚æœä¸æˆåŠŸï¼Œåˆ™ä¼šå°è¯•&lt;code&gt;A(int)&lt;/code&gt;ï¼Œå¦‚æœè¿™ä¸¤ç§æ„é€ å‡½æ•°éƒ½æœªå®šä¹‰ï¼Œå°±ä¼šç¼–è¯‘æŠ¥é”™ã€‚&lt;br&gt;å¦å¤–ï¼Œæˆå‘˜å˜é‡ä¹Ÿå¯ä»¥é‡‡ç”¨å°±åœ°åˆå§‹åŒ–, è™½ç„¶è¿™ä¼šå¯¼è‡´ç±»æˆä¸ºéèšåˆç±»ï¼Œä½†å¹¶ä¸å¦¨ç¢å…¶é‡‡ç”¨åˆ—è¡¨åˆå§‹åŒ–æ–¹æ³•ã€‚ä½¿ç”¨è™šå‡½æ•°ï¼Œæœ‰åŸºç±»çš„æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸å½±å“åˆ—è¡¨åˆå§‹åŒ–æ–¹æ³•çš„ä½¿ç”¨ã€‚&lt;h2 id=&#34;C-11ä¸­çš„å‡ ç§åˆå§‹åŒ–æ–¹æ³•&#34;&gt;&lt;a href=&#34;#C-11ä¸­çš„å‡ ç§åˆå§‹åŒ–æ–¹æ³•&#34; class=&#34;headerlink&#34; title=&#34;C++11ä¸­çš„å‡ ç§åˆå§‹åŒ–æ–¹æ³•&#34;&gt;&lt;/a&gt;C++11ä¸­çš„å‡ ç§åˆå§‹åŒ–æ–¹æ³•&lt;/h2&gt;&lt;/li&gt;
&lt;li&gt;å°±åœ°åˆå§‹åŒ–&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;A&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; a1 &amp;#123;&lt;span class=&#34;number&#34;&gt;12&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;double&lt;/span&gt; a2 = &amp;#123;&lt;span class=&#34;number&#34;&gt;12.0&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;float&lt;/span&gt; a3 = &lt;span class=&#34;number&#34;&gt;12.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        B b&amp;#123;&lt;span class=&#34;number&#34;&gt;123&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        C c = &amp;#123;&lt;span class=&#34;number&#34;&gt;123&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;A&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;() : &lt;span class=&#34;built_in&#34;&gt;a&lt;/span&gt;(&lt;span class=&#34;number&#34;&gt;123&lt;/span&gt;), &lt;span class=&#34;built_in&#34;&gt;b&lt;/span&gt;(&lt;span class=&#34;number&#34;&gt;456&lt;/span&gt;) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; a;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; b;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;åˆ—è¡¨åˆå§‹åŒ–&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;A&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;, &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(std::initializer_list&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;, &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt;) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; a;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; b;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt; &lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// ä¼˜å…ˆåŒ¹é…A(std::initializer_list&amp;lt;int, int&amp;gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// å†åŒ¹é…A(int, int)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// å¦åˆ™æŠ¥é”™&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    A a &amp;#123;&lt;span class=&#34;number&#34;&gt;123&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;456&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å°±åœ°åˆå§‹åŒ–ä¼šæœ€å…ˆå¾—åˆ°æ‰§è¡Œï¼Œæ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ä¼šè¦†ç›–å°±åœ°åˆå§‹åŒ–çš„å€¼&lt;/li&gt;
&lt;li&gt;å¦‚æœé‡‡ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Œå³&lt;code&gt;a&amp;#123;...&amp;#125;&lt;/code&gt;åˆå§‹åŒ–ï¼Œ&lt;code&gt;std::initializer_list&amp;lt;T&amp;gt;&lt;/code&gt;çš„æ„é€ å‡½æ•°ä¼šä¼˜å…ˆå¾—åˆ°æ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;å¦‚æœé‡‡ç”¨åŸç”Ÿæ„é€ å‡½æ•°ï¼Œå³&lt;code&gt;a(int)&lt;/code&gt;åˆå§‹åŒ–ï¼Œ&lt;code&gt;A(init)&lt;/code&gt;ä¼˜å…ˆå¾—åˆ°æ‰§è¡Œ&lt;h1 id=&#34;ä»€ä¹ˆæ˜¯initializer-list&#34;&gt;&lt;a href=&#34;#ä»€ä¹ˆæ˜¯initializer-list&#34; class=&#34;headerlink&#34; title=&#34;ä»€ä¹ˆæ˜¯initializer-list&#34;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯initializer-list&lt;/h1&gt;&lt;strong&gt;æ‘˜å½•&lt;a href=&#34;https://blog.csdn.net/hailong0715/article/details/54018002&#34;&gt;C++11æ–°ç‰¹æ€§ä¹‹åˆ—è¡¨åˆå§‹åŒ–&lt;/a&gt;&lt;/strong&gt;-åˆå§‹åŒ–åˆ—è¡¨&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;å®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®¹å™¨ç±»å‹ï¼Œå†…éƒ¨å®šä¹‰äº†è¿­ä»£å™¨iteratorç­‰å®¹å™¨å¿…é¡»çš„ä¸€äº›æ¦‚å¿µã€‚ &lt;/li&gt;
&lt;li&gt;initialzer-list&lt;T&gt;æ¥è¯´ï¼Œå®ƒå¯ä»¥æ¥å—ä»»æ„é•¿åº¦çš„åˆå§‹åŒ–åˆ—è¡¨ï¼Œä½†æ˜¯å…ƒç´ å¿…é¡»æ˜¯è¦ç›¸åŒçš„æˆ–è€…å¯ä»¥è½¬æ¢ä¸ºTç±»å‹çš„ã€‚  &lt;/T&gt;&lt;/li&gt;
&lt;li&gt;ä¸‰ä¸ªæˆå‘˜æ¥å£ï¼Œbegin(),end(),size(),å…¶ä¸­size()è¿”å›initialzer-listçš„é•¿åº¦ã€‚  &lt;/li&gt;
&lt;li&gt;èƒ½è¢«æ•´ä½“çš„åˆå§‹åŒ–å’Œèµ‹å€¼ï¼Œéå†åªèƒ½é€šè¿‡beginå’Œendè¿­ä»£å™¨æ¥ï¼Œéå†å–å¾—çš„æ•°æ®æ˜¯å¯è¯»çš„ï¼Œæ˜¯ä¸èƒ½å¯¹å•ä¸ªè¿›è¡Œä¿®æ”¹çš„ã€‚  &lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ³¨æ„ä¸€ï¼š&lt;br&gt;initialzer-list&lt;T&gt;ä¿å­˜çš„æ˜¯Tç±»å‹çš„å¼•ç”¨ï¼Œå¹¶ä¸å¯¹Tç±»å‹çš„æ•°æ®è¿›è¡Œæ‹·è´ï¼Œå› æ­¤éœ€è¦æ³¨æ„å˜é‡çš„ç”Ÿå­˜æœŸ&lt;/T&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;std::initializer_list&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt; &lt;span class=&#34;title&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt;&amp;#123; &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;3&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;auto&lt;/span&gt; c = &lt;span class=&#34;built_in&#34;&gt;func&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; (&lt;span class=&#34;keyword&#34;&gt;auto&lt;/span&gt; it = c.&lt;span class=&#34;built_in&#34;&gt;begin&lt;/span&gt;(); it != c.&lt;span class=&#34;built_in&#34;&gt;end&lt;/span&gt;(); it++)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		std::cout &amp;lt;&amp;lt; it - c.&lt;span class=&#34;built_in&#34;&gt;begin&lt;/span&gt;() &amp;lt;&amp;lt; &lt;span class=&#34;string&#34;&gt;&amp;quot;:&amp;quot;&lt;/span&gt; &amp;lt;&amp;lt; (*it) &amp;lt;&amp;lt; std::endl;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ­¤å¤„æ‰“å°æ˜¯ä¹±çš„ã€‚å› ä¸ºfuncè¿”å›çš„æ˜¯å³å€¼å¼•ç”¨ï¼Œåœ¨é€€å‡ºå‡½æ•°åå¤±æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„äºŒï¼š&lt;br&gt;åˆ—è¡¨åˆå§‹åŒ–é˜²æ­¢ç±»å‹æ”¶çª„&lt;br&gt;&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; a = &lt;span class=&#34;number&#34;&gt;1.1&lt;/span&gt;; &lt;span class=&#34;comment&#34;&gt;//OK&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; b&amp;#123; &lt;span class=&#34;number&#34;&gt;1.1&lt;/span&gt; &amp;#125;; &lt;span class=&#34;comment&#34;&gt;//error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;float&lt;/span&gt; f1 = &lt;span class=&#34;number&#34;&gt;1e40&lt;/span&gt;; &lt;span class=&#34;comment&#34;&gt;//OK, ç§‘å­¦è®¡æ•°æ³•10^40&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;float&lt;/span&gt; f2&amp;#123; &lt;span class=&#34;number&#34;&gt;1e40&lt;/span&gt; &amp;#125;; &lt;span class=&#34;comment&#34;&gt;//error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; x = &lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt;, y = &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; c = x; &lt;span class=&#34;comment&#34;&gt;//OK&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; d&amp;#123; x &amp;#125;;&lt;span class=&#34;comment&#34;&gt;//error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; e = y;&lt;span class=&#34;comment&#34;&gt;//error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; f&amp;#123; y &amp;#125;;&lt;span class=&#34;comment&#34;&gt;//error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;a href=&#34;#å‚è€ƒæ–‡çŒ®&#34; class=&#34;headerlink&#34; title=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;/a&gt;å‚è€ƒæ–‡çŒ®&lt;/h1&gt;&lt;p&gt;&lt;a href=&#34;https://en.cppreference.com/w/cpp/utility/initializer_list&#34;&gt;initializer_list - cppreference.com&lt;/a&gt;&lt;br&gt;&lt;a href=&#34;https://blog.csdn.net/hailong0715/article/details/54018002&#34;&gt;C++11æ–°ç‰¹æ€§ä¹‹åˆ—è¡¨åˆå§‹åŒ–&lt;/a&gt;&lt;br&gt;&lt;a href=&#34;https://blog.csdn.net/JinhuCheng/article/details/107330983&#34;&gt;C++11æ–°ç‰¹æ€§ä¹‹åˆ—è¡¨åˆå§‹åŒ–ã€PODã€èšåˆç±»&lt;/a&gt;&lt;/p&gt;
</content>
        <category term="C++" />
        <updated>2021-09-18T14:07:11.246Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/09/18/obsidian_posts/%E8%81%9A%E5%90%88%E7%B1%BB%E5%9E%8B&amp;POD/</id>
        <title>èšåˆç±»å‹&amp;POD</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/09/18/obsidian_posts/%E8%81%9A%E5%90%88%E7%B1%BB%E5%9E%8B&amp;POD/"/>
        <content type="html">&lt;h1 id=&#34;ä»€ä¹ˆæ˜¯èšåˆç±»å‹&#34;&gt;&lt;a href=&#34;#ä»€ä¹ˆæ˜¯èšåˆç±»å‹&#34; class=&#34;headerlink&#34; title=&#34;ä»€ä¹ˆæ˜¯èšåˆç±»å‹&#34;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯èšåˆç±»å‹&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;C++03å®šä¹‰&lt;/strong&gt;&lt;br&gt;An aggregate is an array or a class (clause 9) with no user-declared constructors (12.1), no private or protected non-static data members (clause 11), no base classes (clause 10), and no virtual functions (10.3).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;C++11å®šä¹‰&lt;/strong&gt;&lt;br&gt;An aggregate is an array or a class (Clause 9) with no user-provided constructors (12.1), no brace-or-equal-initializers for non-static data members (9.2), no private or protected non-static data members (Clause 11), no base classes (Clause 10), and no virtual functions (10.3).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»“åˆC++03å’ŒC++11æ ‡å‡†å®šä¹‰ï¼Œç½—åˆ—ä¸€ä¸‹èšåˆç±»å‹çš„ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;èšåˆç±»å‹å¯ä»¥æœ‰æ„é€ å‡½æ•°ï¼Œä½†åªèƒ½æ˜¯ç¼–è¯‘å™¨å®šä¹‰çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œæˆ–è€…ç”¨&lt;code&gt;=default&lt;/code&gt;å®šä¹‰çš„æ„é€ å‡½æ•°&lt;/li&gt;
&lt;li&gt;èšåˆç±»å‹ä¸èƒ½æœ‰privateï¼Œprotectedéstaticå˜é‡&lt;/li&gt;
&lt;li&gt;èšåˆç±»å‹å¯ä»¥æœ‰copy-assignment operator and/or destructor&lt;/li&gt;
&lt;li&gt;æ•°ç»„æ˜¯èšåˆç±»å‹ï¼Œå³ä¾¿æ•°ç»„æˆå‘˜æ˜¯éèšåˆç±»å‹&lt;/li&gt;
&lt;li&gt;èšåˆç±»å‹çš„æ•°ç»„å¯ä»¥æ˜¯éèšåˆç±»å‹&lt;/li&gt;
&lt;li&gt;èšåˆç±»å‹ä¸èƒ½ç”¨brace-or-equal-initializersï¼ˆå³å°±åœ°åˆå§‹åŒ–ï¼‰åˆå§‹åŒ–éstaticæˆå‘˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èšåˆç±»å‹å˜é‡åˆå§‹åŒ–&#34;&gt;&lt;a href=&#34;#èšåˆç±»å‹å˜é‡åˆå§‹åŒ–&#34; class=&#34;headerlink&#34; title=&#34;èšåˆç±»å‹å˜é‡åˆå§‹åŒ–&#34;&gt;&lt;/a&gt;èšåˆç±»å‹å˜é‡åˆå§‹åŒ–&lt;/h2&gt;&lt;p&gt;èšåˆç±»å‹å¯ä»¥é‡‡ç”¨åˆ—è¡¨åˆå§‹åŒ–ï¼ˆå…¶å®éèšåˆç±»å‹ï¼Œé€šè¿‡è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨åˆ—è¡¨åˆå§‹åŒ–ï¼‰&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt;(m == n)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// the ith element of the array is initialized with ai&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt;(m &amp;lt; n) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// the first m elements of the array are initialized with a1,  a2, â€¦, am and the other n - m elements are, if possible, value-initialized (see below for the explanation of the term)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt;(m &amp;gt; n) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// the compiler will issue an error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;comment&#34;&gt;/*(this is the case when n isn&amp;#x27;t specified at all like int a[] = &amp;#123;1, 2, 3&amp;#125;;) */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// the size of the array (n) is assumed to be equal to m, so int a[] = &amp;#123;1, 2, 3&amp;#125;; is equivalent to int a[3] = &amp;#123;1, 2, 3&amp;#125;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;èšåˆå˜é‡æœ€å¤§çš„ç‰¹ç‚¹å¯ä»¥åš&lt;strong&gt;èšåˆåˆå§‹åŒ–&lt;/strong&gt;ï¼Œé™¤äº†åŸºæœ¬çš„åˆ—è¡¨åˆå§‹åŒ–è§„åˆ™ï¼Œèšåˆåˆå§‹åŒ–è¿˜ä½“ç°åœ¨å¯ä»¥é€’å½’åˆå§‹åŒ–ã€‚&lt;br&gt;&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;X&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; i1;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; i2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;Y&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; c;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  X x;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; i[&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;float&lt;/span&gt; f; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;protected&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;double&lt;/span&gt; d;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&amp;#123;&amp;#125;      &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;Z&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; a;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  X x;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;built_in&#34;&gt;Z&lt;/span&gt;(&lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; a1) &amp;#123;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Y y = &amp;#123;&lt;span class=&#34;string&#34;&gt;&amp;#x27;a&amp;#x27;&lt;/span&gt;, &amp;#123;&lt;span class=&#34;number&#34;&gt;10&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;20&lt;/span&gt;&amp;#125;, &amp;#123;&lt;span class=&#34;number&#34;&gt;20&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;30&lt;/span&gt;&amp;#125;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;&lt;code&gt;y.x&lt;/code&gt;ä¹Ÿè¢«åˆå§‹åŒ–äº†ã€‚å¦‚æœå¯¹Zç”¨é€’å½’èšåˆåˆå§‹åŒ–ï¼Œä¾‹å¦‚&lt;code&gt;Z z = &amp;#123;&amp;#39;a&amp;#39;, &amp;#123;&amp;#39;b&amp;#39;&amp;#125;&amp;#125;&lt;/code&gt;ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚å› ä¸ºZä¸æ˜¯èšåˆç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šå»æ‰¾å¯¹åº”çš„æ„é€ å‡½æ•°ï¼Œæ˜¾ç„¶Zæ²¡å®šä¹‰è¿™æ ·çš„æ„é€ å‡½æ•°ã€‚&lt;br&gt;å…·ä½“ä»‹ç»å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://en.cppreference.com/w/cpp/language/aggregate_initialization&#34;&gt;Aggregate initialization&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h1 id=&#34;ä»€ä¹ˆæ˜¯PODå˜é‡&#34;&gt;&lt;a href=&#34;#ä»€ä¹ˆæ˜¯PODå˜é‡&#34; class=&#34;headerlink&#34; title=&#34;ä»€ä¹ˆæ˜¯PODå˜é‡&#34;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯PODå˜é‡&lt;/h1&gt;&lt;p&gt;POD = Plain Old Dataï¼Œå¯è§è¿™æ˜¯ä¸€ç§å…¼å®¹å‹æ¯”è¾ƒå¥½çš„å½¢æ€ã€‚ç”šè‡³å¯ä»¥å¯¼å‡ºä¸å…¶ä»–è¯­è¨€å…±äº«æ­¤ç±»å˜é‡å®šä¹‰ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;C++03å®šä¹‰&lt;/strong&gt;&lt;br&gt;A POD-struct is an aggregate class that has no non-static data members of type non-POD-struct, non-POD-union (or array of such types) or reference, and has no user-defined copy assignment operator and no user-defined destructor. Similarly, a POD-union is an aggregate union that has no non-static data members of type non-POD-struct, non-POD-union (or array of such types) or reference, and has no user-defined copy assignment operator and no user-defined destructor. A POD class is a class that is either a POD-struct or a POD-union.&lt;/p&gt;
&lt;p&gt;C++11å®šä¹‰å˜å¾—éå¸¸ä¼˜é›…&lt;br&gt;&lt;strong&gt;A POD struct is a non-union class that is both a trivial class and a standard-layout class&lt;/strong&gt;, and has no non-static data members of type non-POD struct, non-POD union (or array of such types). Similarly, a POD union is a union that is both a trivial class and a standard layout class, and has no non-static data members of type non-POD struct, non-POD union (or array of such types). A POD class is a class that is either a POD struct or a POD union.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼š&lt;br&gt;PODç±»å‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„èšåˆç±»å‹ï¼Œä¸€ä¸ªPODç±»å‹ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ‡é‡ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„è‡ªå®šä¹‰ç±»å‹ï¼š&lt;ul&gt;
&lt;li&gt;C++11ä¹‹å‰ï¼š&lt;ul&gt;
&lt;li&gt;èšåˆç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰éPODç±»å‹çš„éé™æ€æˆå‘˜å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰å¼•ç”¨ç±»å‹çš„éé™æ€æˆå‘˜å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰è‡ªå®šä¹‰çš„æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;C++11ä¹‹åï¼š&lt;ul&gt;
&lt;li&gt;æ˜¯å¹³å‡¡ç±»ã€‚&lt;/li&gt;
&lt;li&gt;æ˜¯æ ‡å‡†å¸ƒå±€ç±»ã€‚&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰éPODç±»å‹çš„éé™æ€æˆå‘˜å˜é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PODç±»å‹çš„æ•°ç»„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;èšåˆç±»å‹æˆ–æ˜¯PODå˜é‡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ&#34;&gt;&lt;a href=&#34;#èšåˆç±»å‹æˆ–æ˜¯PODå˜é‡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ&#34; class=&#34;headerlink&#34; title=&#34;èšåˆç±»å‹æˆ–æ˜¯PODå˜é‡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ&#34;&gt;&lt;/a&gt;èšåˆç±»å‹æˆ–æ˜¯PODå˜é‡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ&lt;/h1&gt;&lt;p&gt;èšåˆç±»æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥é‡‡ç”¨èšåˆåˆå§‹åŒ–ã€‚&lt;br&gt;PODçš„ç‰¹ç‚¹æ›´ä¸ºå®ç”¨ä¸€äº›&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;PODçš„ç”¨é€”&lt;/strong&gt;&lt;br&gt;å¹³å‡¡ç±»çš„ç”¨é€”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¹³å‡¡ç±»çš„å¯¹è±¡å¯ä»¥ä¸å­—èŠ‚æµä¹‹é—´å®‰å…¨è½¬æ¢ï¼Œå³ï¼š&lt;ul&gt;
&lt;li&gt;è‹¥è¦å°†å¯¹è±¡è½¬ä¸ºå­—èŠ‚æµï¼Œç›´æ¥å–å…¶åœ°å€å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥è¦å°†å­—èŠ‚æµè½¬ä¸ºå¯¹è±¡ï¼Œç›´æ¥å°†è¯¥åœ°å€castä¸ºå¯¹è±¡æŒ‡é’ˆå³å¯ã€‚&lt;/li&gt;
&lt;li&gt;ç›´æ¥é€šè¿‡å¤åˆ¶å­—èŠ‚çš„æ–¹å¼å¤åˆ¶å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®‰å…¨çš„é™æ€åˆå§‹åŒ–ã€‚&lt;ul&gt;
&lt;li&gt;C++11çš„thread_localå˜é‡å¯ä»¥æ˜¯éå¹³å‡¡ç±»å‹ï¼Œä½†åœ¨æŸäº›ç¼–è¯‘å™¨ä¸‹ä¼šæœ‰æ¯”è¾ƒå¤§çš„æ€§èƒ½å¼€é”€ã€‚gccæ‰©å±•çš„__threadåªèƒ½ä½¿ç”¨PODç±»å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ ‡å‡†å¸ƒå±€ç±»çš„ç”¨é€”ï¼š&lt;/strong&gt;&lt;br&gt;è·¨è¿›ç¨‹ã€è·¨è¯­è¨€ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;åè¯è§£é‡Š&#34;&gt;&lt;a href=&#34;#åè¯è§£é‡Š&#34; class=&#34;headerlink&#34; title=&#34;åè¯è§£é‡Š&#34;&gt;&lt;/a&gt;åè¯è§£é‡Š&lt;/h1&gt;&lt;h2 id=&#34;value-initialization&#34;&gt;&lt;a href=&#34;#value-initialization&#34; class=&#34;headerlink&#34; title=&#34;value initialization&#34;&gt;&lt;/a&gt;value initialization&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å¯¹äºæ™®é€šç±»å‹å˜é‡(bool, int, char, double, pointers, etc.)&lt;br&gt;it means it is initialized with 0 for that type (false for bool, 0.0 for double, etc.). &lt;/li&gt;
&lt;li&gt;å¯¹äºclassç±»å‹&lt;ul&gt;
&lt;li&gt;å¦‚æœæœ‰è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼Œåˆ™è°ƒç”¨è‡ªå®šä¹‰æ„é€ å‡½æ•°&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰è‡ªå®šä¸€æ„é€ å‡½æ•°ï¼Œåˆ™è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰å¯¹åº”çš„æ„é€ å‡½æ•°ï¼Œåˆ™æŠ¥é”™&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸¾ä¾‹&lt;br&gt;&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;A&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;) &amp;#123;&amp;#125; &lt;span class=&#34;comment&#34;&gt;//no default constructor&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;built_in&#34;&gt;B&lt;/span&gt;() &amp;#123;&amp;#125; &lt;span class=&#34;comment&#34;&gt;//default constructor available&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  A a1[&lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;] = &amp;#123;&lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;), &lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;), &lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(&lt;span class=&#34;number&#34;&gt;14&lt;/span&gt;)&amp;#125;; &lt;span class=&#34;comment&#34;&gt;//OK n == m&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  A a2[&lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;] = &amp;#123;&lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;)&amp;#125;; &lt;span class=&#34;comment&#34;&gt;//ERROR A has no default constructor. Unable to value-initialize a2[1] and a2[2]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  B b1[&lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;] = &amp;#123;&lt;span class=&#34;built_in&#34;&gt;B&lt;/span&gt;()&amp;#125;; &lt;span class=&#34;comment&#34;&gt;//OK b1[1] and b1[2] are value initialized, in this case with the default-ctor&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; Array1[&lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;] = &amp;#123;&lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;&amp;#125;; &lt;span class=&#34;comment&#34;&gt;//All elements are initialized with 0;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; Array2[&lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;] = &amp;#123;&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;&amp;#125;; &lt;span class=&#34;comment&#34;&gt;//Attention: only the first element is 1, the rest are 0;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;bool&lt;/span&gt; Array3[&lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;] = &amp;#123;&amp;#125;; &lt;span class=&#34;comment&#34;&gt;//the braces can be empty too. All elements initialized with false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; Array4[&lt;span class=&#34;number&#34;&gt;1000&lt;/span&gt;]; &lt;span class=&#34;comment&#34;&gt;//no initializer. This is different from an empty &amp;#123;&amp;#125; initializer in that&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;comment&#34;&gt;//the elements in this case are not value-initialized, but have indeterminate values &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;comment&#34;&gt;//(unless, of course, Array4 is a global array)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; array[&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;] = &amp;#123;&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;4&lt;/span&gt;&amp;#125;; &lt;span class=&#34;comment&#34;&gt;//ERROR, too many initializers&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å¤§æ‹¬å·ä¸­ä¸ªæ•°ä¸è¶³çš„ï¼Œç”¨value initializationè¡¥è¶³ã€‚è¿™å°±æ˜¯&lt;code&gt;A a = &amp;#123;1&amp;#125;;&lt;/code&gt;æˆ–è€…&lt;code&gt;A a = &amp;#123;&amp;#125;&lt;/code&gt;çš„å«ä¹‰ã€‚å¤§æ‹¬å·ä¸­ä¸ªæ•°è¶…è¿‡å£°æ˜çš„ä¸ªæ•°çš„ï¼Œåˆ™ç¼–è¯‘æŠ¥é”™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;brace-or-equal-initializers&#34;&gt;&lt;a href=&#34;#brace-or-equal-initializers&#34; class=&#34;headerlink&#34; title=&#34;brace-or-equal-initializers&#34;&gt;&lt;/a&gt;brace-or-equal-initializers&lt;/h2&gt;&lt;p&gt;ç±»æˆå‘˜çš„ä¸€ç§åˆå§‹åŒ–æ–¹æ³•&lt;br&gt;&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;B&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;built_in&#34;&gt;B&lt;/span&gt;(&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;)&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;A&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; a = &lt;span class=&#34;number&#34;&gt;123&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; b &amp;#123;&lt;span class=&#34;number&#34;&gt;456&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    B c &amp;#123;&lt;span class=&#34;number&#34;&gt;12&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    B d = &amp;#123;&lt;span class=&#34;number&#34;&gt;34&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;copy-assignment-operator&#34;&gt;&lt;a href=&#34;#copy-assignment-operator&#34; class=&#34;headerlink&#34; title=&#34;copy-assignment operator&#34;&gt;&lt;/a&gt;copy-assignment operator&lt;/h2&gt;&lt;p&gt;æ‹·è´èµ‹å€¼æ–¹æ³•&lt;br&gt;&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;A&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;function&#34;&gt;A &lt;span class=&#34;title&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;)&lt;/span&gt; &lt;/span&gt;&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;built_in&#34;&gt;A&lt;/span&gt;(&lt;span class=&#34;keyword&#34;&gt;const&lt;/span&gt; &amp;amp;) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    A&amp;amp; &lt;span class=&#34;keyword&#34;&gt;operator&lt;/span&gt;= (&lt;span class=&#34;keyword&#34;&gt;const&lt;/span&gt; A&amp;amp;a) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    A a;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    A b = a; &lt;span class=&#34;comment&#34;&gt;// è¿™é‡Œè°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ å‡½æ•°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    A c;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    c = a; &lt;span class=&#34;comment&#34;&gt;// è¿™é‡Œæ‰ä¼šè°ƒç”¨æ‹·è´å¤åˆ¶å‡½æ•°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;trial-stuff&#34;&gt;&lt;a href=&#34;#trial-stuff&#34; class=&#34;headerlink&#34; title=&#34;trial stuff&#34;&gt;&lt;/a&gt;trial stuff&lt;/h2&gt;&lt;h3 id=&#34;trivial-copyable&#34;&gt;&lt;a href=&#34;#trivial-copyable&#34; class=&#34;headerlink&#34; title=&#34;trivial copyable&#34;&gt;&lt;/a&gt;trivial copyable&lt;/h3&gt;&lt;p&gt;å‚è€ƒ&lt;a href=&#34;https://en.cppreference.com/w/cpp/named_req/TriviallyCopyable&#34;&gt;C++ named requirements: TriviallyCopyable&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The following types are collectively called trivially copyable types:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Scalar types&lt;/li&gt;
&lt;li&gt;Trivially copyable classes, i.e. classes satisfying following requirements:&lt;ul&gt;
&lt;li&gt;At least one copy constructor, move constructor, copy assignment operator, or move assignment operator is eligible&lt;/li&gt;
&lt;li&gt;Every eligible copy constructor (if any) is trivial&lt;/li&gt;
&lt;li&gt;Every eligible move constructor (if any) is trivial&lt;/li&gt;
&lt;li&gt;Every eligible copy assignment operator (if any) is trivial&lt;/li&gt;
&lt;li&gt;Every eligible move assignment operator (if any) is trivial&lt;/li&gt;
&lt;li&gt;Has a trivial non-deleted destructor&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Arrays of TriviallyCopyable objects&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This implies that a trivially copyable class has no virtual functions or virtual base classes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€šè¿‡æ¨¡ç‰ˆ&lt;a href=&#34;https://en.cppreference.com/w/cpp/types/is_trivially_copyable&#34;&gt;std::is_trivially_copyable&lt;/a&gt;å¯ä»¥æ£€éªŒä¸€ä¸ªç±»æ˜¯å¦trivially copyableã€‚&lt;/p&gt;
&lt;h3 id=&#34;trivial-constructor-destructor&#34;&gt;&lt;a href=&#34;#trivial-constructor-destructor&#34; class=&#34;headerlink&#34; title=&#34;trivial constructor/destructor&#34;&gt;&lt;/a&gt;trivial constructor/destructor&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç¼–è¯‘å™¨å®šä¹‰çš„æ„é€ /ææ„å‡½æ•°&lt;/li&gt;
&lt;li&gt;ç”¨&lt;code&gt;=default&lt;/code&gt;å®šä¹‰çš„æ„é€ ææ„å‡½æ•°&lt;h3 id=&#34;trivial-class&#34;&gt;&lt;a href=&#34;#trivial-class&#34; class=&#34;headerlink&#34; title=&#34;trivial class&#34;&gt;&lt;/a&gt;trivial class&lt;/h3&gt;The standard defines a trivial class as follows:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A trivially copyable class is a class that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;has no non-trivial copy constructors (12.8),&lt;/li&gt;
&lt;li&gt;has no non-trivial move constructors (12.8),&lt;/li&gt;
&lt;li&gt;has no non-trivial copy assignment operators (13.5.3, 12.8),&lt;/li&gt;
&lt;li&gt;has no non-trivial move assignment operators (13.5.3, 12.8), and&lt;/li&gt;
&lt;li&gt;has a trivial destructor (12.4).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A trivial class is a class that has a trivial default constructor (12.1) and is trivially copyable.&lt;/p&gt;
&lt;p&gt;[ Note: In particular, a trivially copyable or trivial class does not have virtual functions or virtual base classes. ]&lt;br&gt;å¦å¤–trivial classæ˜¯é€’å½’çš„ï¼Œå³trivial classä¸èƒ½æœ‰étrivial classçš„éstaticæˆå‘˜ã€‚&lt;br&gt;ç”¨æ¨¡ç‰ˆ&lt;a href=&#34;https://en.cppreference.com/w/cpp/types/is_trivial&#34;&gt;std::is_trivial&lt;/a&gt;æ¥æµ‹è¯•&lt;/p&gt;
&lt;h2 id=&#34;standard-layout&#34;&gt;&lt;a href=&#34;#standard-layout&#34; class=&#34;headerlink&#34; title=&#34;standard layout&#34;&gt;&lt;/a&gt;standard layout&lt;/h2&gt;&lt;p&gt;A standard-layout class is a class that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;has no non-static data members of type non-standard-layout class (or array of such types) or reference,&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;has no virtual functions (10.3) and no virtual base classes (10.1),&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;has the same access control (Clause 11) for all non-static data members,&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;has no non-standard-layout base classes,&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;either has no non-static data members in the most derived class and at most one base class with non-static data members, or has no base classes with non-static data members, (è¦ä¹ˆç»ˆç‚¹ç±»æ²¡æœ‰éé™æ€æˆå‘˜ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªåŸºç±»æœ‰éé™æ€æˆå‘˜ï¼›è¦ä¹ˆæ²¡æœ‰åŸºç±»æœ‰éé™æ€æˆå‘˜)ï¼Œand&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;has no base classes of the same type as the first non-static data member.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A standard-layout struct is a standard-layout class defined with the class-key struct or the class-key class.&lt;/p&gt;
&lt;p&gt;A standard-layout union is a standard-layout class defined with the class-key union.&lt;/p&gt;
&lt;p&gt;[ Note: Standard-layout classes are useful for communicating with code written in other programming languages. Their layout is specified in 9.2.]&lt;/p&gt;
&lt;p&gt;æ ‡å‡†å†…å­˜åˆ†å¸ƒï¼Œç¡®ä¿å¯¹è±¡å†…å­˜å’ŒCè¯­è¨€çš„ç»“æ„ä½“å†…å­˜åˆ†å¸ƒå®Œå…¨ä¸€è‡´ã€‚ä½¿å¾—PODå˜é‡å…·å¤‡äº†Cå…¼å®¹æ€§ã€‚&lt;br&gt;ç”¨æ¨¡ç‰ˆ&lt;a href=&#34;https://en.cppreference.com/w/cpp/types/is_standard_layout&#34;&gt;std::is_standard_layout&lt;/a&gt;å¯ä»¥æµ‹è¯•&lt;/p&gt;
&lt;h1 id=&#34;æ€»ç»“&#34;&gt;&lt;a href=&#34;#æ€»ç»“&#34; class=&#34;headerlink&#34; title=&#34;æ€»ç»“&#34;&gt;&lt;/a&gt;æ€»ç»“&lt;/h1&gt;&lt;p&gt;ç”¨&lt;a href=&#34;https://en.cppreference.com/w/cpp/types/is_pod&#34;&gt;std::is_pod&lt;/a&gt;æ¥æµ‹è¯•ä½ çš„ç±»å§ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;a href=&#34;#å‚è€ƒæ–‡çŒ®&#34; class=&#34;headerlink&#34; title=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;/a&gt;å‚è€ƒæ–‡çŒ®&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special&#34;&gt;What are Aggregates and PODs and how/why are they special?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://fuzhe1989.github.io/2018/03/15/cpp-object-model-pod/&#34;&gt;C++å¯¹è±¡æ¨¡å‹ï¼ˆä¸‰ï¼‰POD&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
        <category term="C++" />
        <updated>2021-09-18T14:03:05.792Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/09/12/obsidian_posts/setcap%20vs.%20LD_PRELOAD/</id>
        <title>setcap vs. LD_PRELOAD</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/09/12/obsidian_posts/setcap%20vs.%20LD_PRELOAD/"/>
        <content type="html">&lt;p&gt;åœ¨Linuxä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹æ‹‰èµ·å¦ä¸€ä¸ªè¿›ç¨‹çš„æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;pre class=&#34;mermaid&#34;&gt;graph LR;
F[parent process] --&gt; A[start]
A --fork--&gt; B[child]
A --&gt; C[wait]
B --exec--&gt; D[new process]
D --&gt; E[end]
C --&gt; E&lt;/pre&gt;&lt;br&gt;æœ€å¸¸è§çš„å°±æ˜¯é€šè¿‡shellç»ˆç«¯æ‰§è¡Œå‘½ä»¤ã€‚æ­¤åœºæ™¯ä¸‹ï¼Œ/bin/bashå°±æ˜¯è¿™ä¸ªparent processï¼Œè€Œè¦æ‰§è¡Œçš„é‚£ä¸ªå‘½ä»¤å°±æ˜¯new processã€‚&lt;br&gt;Linuxæœ‰ä¸€äº›ç‰¹æ€§ï¼Œå¯ä»¥ä½¿å¾—åˆ›å»ºå‡ºçš„è¿›ç¨‹æ¯”æ‹‰èµ·çš„è¿›ç¨‹æƒé™é«˜ã€‚ä¾‹å¦‚å¯æ‰§è¡Œæ–‡ä»¶é…ç½®äº†set-user-IDä½ï¼Œåˆ™æ‹‰èµ·çš„è¿›ç¨‹å°±æ˜¯rootæƒé™ï¼Œè€Œå…¶çˆ¶è¿›ç¨‹æœ‰å¯èƒ½æ˜¯æ™®é€šç”¨æˆ·æƒé™ã€‚å¦‚æœå¯æ‰§è¡Œæ–‡ä»¶é…ç½®äº†file capabilityï¼Œåˆ™åˆ›å»ºå‡ºçš„è¿›ç¨‹å°±å…·å¤‡äº†æŸäº›capabilityï¼Œå¦‚æœçˆ¶è¿›ç¨‹æ²¡æœ‰è¿™äº›capabilityï¼Œåˆ™è¿™ä¹Ÿæ˜¯ä¸€ç§æƒé™æ”¾å¤§çš„åœºæ™¯ã€‚&lt;br&gt;å½“å‘ç”Ÿè¿™ç§æƒé™æ”¾å¤§çš„åœºæ™¯æ—¶ï¼ŒLinuxçš„å®‰å…¨ç‰¹æ€§è¦æ±‚ï¼Œæ­¤æ—¶å­è¿›ç¨‹ä¸­çš„æŸäº›æ•æ„Ÿç¯å¢ƒå˜é‡ä¼šè¢«æ¸…ç©ºï¼Œä¾‹å¦‚ï¼šLD_PRELOAD,LD_LIBRARY_PATHã€‚ç”±äºè¿™äº›ç¯å¢ƒå˜é‡éƒ½æ˜¯ä»çˆ¶è¿›ç¨‹ç»§æ‰¿è¿‡æ¥çš„ï¼Œå¦‚æœä¸æ¸…ç©ºï¼Œåˆ™è¡¨æ˜ä¼šä½¿ç”¨é«˜æƒé™çº§åˆ«æ‰§è¡Œè¿™äº›ç¯å¢ƒå˜é‡æŒ‡å®šçš„å¯æ‰§è¡Œä»£ç ã€‚&lt;/p&gt;
&lt;h1 id=&#34;LD-LIBRARY-PATH&#34;&gt;&lt;a href=&#34;#LD-LIBRARY-PATH&#34; class=&#34;headerlink&#34; title=&#34;LD_LIBRARY_PATH&#34;&gt;&lt;/a&gt;LD_LIBRARY_PATH&lt;/h1&gt;&lt;p&gt;å‚è€ƒæ–‡çŒ®[1]ï¼Œld.soæœç´¢åŠ¨æ€åº“çš„é¡ºåºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;DT_PATHæŒ‡å®šçš„åº“æ–‡ä»¶ï¼ˆdeprecatedï¼‰&lt;/li&gt;
&lt;li&gt;LD_LIBRARY_PATHæŒ‡å®šçš„åº“æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;DT_RUNPATHæŒ‡å®šçš„åº“æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;/etc/ld.so.cacheè¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æŒ‡å®šçš„åº“æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶é€šè¿‡ldconfigå‘½ä»¤ç”Ÿæˆ&lt;/li&gt;
&lt;li&gt;In the default path /lib, and then /usr/lib.  (On some 64-bit architectures, the default paths for 64-bit shared objects are /lib64, and then /usr/lib64.)  If the binary was linked with the -z nodeflib linker option, this step is skipped.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€ä»¥é’ˆå¯¹LD_LIBRARY_PATHï¼Œé™¤äº†ç¬¬äºŒæ¡çš„æ–¹æ³•å¤±æ•ˆï¼Œå…¶ä»–çš„éƒ½å¯ä»¥ç”¨ã€‚&lt;/p&gt;
&lt;h1 id=&#34;LD-PRELOAD&#34;&gt;&lt;a href=&#34;#LD-PRELOAD&#34; class=&#34;headerlink&#34; title=&#34;LD_PRELOAD&#34;&gt;&lt;/a&gt;LD_PRELOAD&lt;/h1&gt;&lt;p&gt;é‚£é’ˆå¯¹LD_PRELOADï¼Œæ˜¯ä¸æ˜¯å°±æ²¡æ³•ç”¨å‘¢ï¼Ÿå…¶å®ä¹Ÿä¸æ˜¯ã€‚&lt;br&gt;åœ¨æ²¡æœ‰setcapä»¥åŠset-user-IDçš„æƒ…å†µä¸‹ï¼Œå¦‚æœld.soéœ€è¦é¢„åŠ è½½ä¸€ä¸ªåº“æ–‡ä»¶ï¼ŒæŒ‡å®šæ–¹æ³•åœ¨æ–‡çŒ®[1]ä¸­åŒæ ·æœ‰æè¿°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The &lt;code&gt;LD_PRELOAD&lt;/code&gt; environment variable.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;--preload&lt;/code&gt; command-line option when invoking the dynamic linker directly.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;/etc/ld.so.preload&lt;/code&gt; file.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨secure-executionæ¨¡å¼ä¸‹ï¼Œæ–¹æ³•2å’Œæ–¹æ³•3å‡ä¸å—å½±å“ã€‚æ–¹æ³•1ä¹Ÿä»ç„¶å¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯éœ€è¦ä¸€äº›ç‰¹æ®Šçš„è®¾ç½®ï¼Œåœ¨[1]ä¸­ä¹Ÿæœ‰æè¿°ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In secure-execution mode, &lt;strong&gt;preload pathnames containing slashes are ignored&lt;/strong&gt;.  Furthermore, shared objects are preloaded &lt;strong&gt;only from the standard search directories&lt;/strong&gt; and only if &lt;strong&gt;they have set-user-ID mode bit enabled&lt;/strong&gt; (which is not typical).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»¼ä¸Šï¼Œéœ€è¦3ç‚¹é…ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LD_PRELOADç¯å¢ƒå˜é‡æŒ‡å®šçš„åº“æ–‡ä»¶ä¸èƒ½åŒ…å«æ–œçº¿â€™/â€˜&lt;/li&gt;
&lt;li&gt;åº“æ–‡ä»¶åªä¼šä»æ ‡å‡†è·¯å¾„ä¸‹åŠ è½½ã€‚è¿™é‡Œæ ‡å‡†è·¯å¾„å¯ä»¥å‚è€ƒLD_LIBRARY_PATHä¸­çš„æè¿°ã€‚æ³¨æ„ï¼Œæ­¤æ—¶ld.soåªä¼šæœç´¢æ ‡å‡†è·¯å¾„ï¼Œä¸ä¼šæœç´¢é€šè¿‡å…¶ä»–æ‰‹æ®µé…ç½®çš„è·¯å¾„ï¼ˆå¦‚ä¸Šä¸€èŠ‚æè¿°çš„ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åº“æ–‡ä»¶å¿…é¡»ä½¿èƒ½äº†set-user-idä½&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;ç¤ºä¾‹ä»£ç &#34;&gt;&lt;a href=&#34;#ç¤ºä¾‹ä»£ç &#34; class=&#34;headerlink&#34; title=&#34;ç¤ºä¾‹ä»£ç &#34;&gt;&lt;/a&gt;ç¤ºä¾‹ä»£ç &lt;/h1&gt;&lt;p&gt;ä»£ç ç›®å½•æ ‘ï¼š&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ tree .&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;â”œâ”€â”€ lib.c&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;â”œâ”€â”€ libtest.so&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;â”œâ”€â”€ main&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;â”œâ”€â”€ main.c&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;â”œâ”€â”€ test&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;â””â”€â”€ test.c&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;main.cç”Ÿæˆmainå¯æ‰§è¡Œç¨‹åºï¼Œtest.cç”Ÿæˆtestå¯æ‰§è¡Œç¨‹åºï¼Œlib.cç”Ÿæˆlibtest.soã€‚&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// main.c&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;sys/wait.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;pid_t&lt;/span&gt; pid = fork();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; (pid == &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; *envp[] = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                        &lt;span class=&#34;string&#34;&gt;&amp;quot;LD_PRELOAD=libtest.so&amp;quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                        &lt;span class=&#34;comment&#34;&gt;// &amp;quot;LD_PRELOAD=./libtest.so&amp;quot;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                        &lt;span class=&#34;literal&#34;&gt;NULL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; *argv[] = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                        &lt;span class=&#34;string&#34;&gt;&amp;quot;test&amp;quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                        &lt;span class=&#34;literal&#34;&gt;NULL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; err = execve(&lt;span class=&#34;string&#34;&gt;&amp;quot;./test&amp;quot;&lt;/span&gt;, argv, envp);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; status;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                wait(&amp;amp;status);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// test.c&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt; &lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; *preload = getenv(&lt;span class=&#34;string&#34;&gt;&amp;quot;LD_PRELOAD&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;printf&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;LD_PRELOAD = %s\n&amp;quot;&lt;/span&gt;, preload);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// lib.c&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt;)&lt;/span&gt; __&lt;span class=&#34;title&#34;&gt;attribute__&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;((constructor))&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;printf&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;I&amp;#x27;m libtest.so loaded\n&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;åœ¨testå¯æ‰§è¡Œç¨‹åºæ˜¯æ™®é€šçš„äºŒè¿›åˆ¶æ—¶ï¼Œè¾“å‡ºä¸º&lt;br&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ ./main&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;I&amp;#x27;m libtest.so loaded&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;LD_PRELOAD = ./libtest.so&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å½“testé…ç½®äº†capabilityä»¥åï¼š&lt;br&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ sudo setcap cap_net_admin,cap_net_raw=eip ./test&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ ./main&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;LD_PRELOAD = (null)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å¯è§LD_PRELOADæŒ‡å®šlibtest.soæœªè¢«åŠ è½½ï¼Œä¸”LD_PRELOADç¯å¢ƒå˜é‡è¢«æ¸…ç©ºäº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;LD-PRELOADä¸å«æ–œçº¿&#34;&gt;&lt;a href=&#34;#LD-PRELOADä¸å«æ–œçº¿&#34; class=&#34;headerlink&#34; title=&#34;LD_PRELOADä¸å«æ–œçº¿&#34;&gt;&lt;/a&gt;LD_PRELOADä¸å«æ–œçº¿&lt;/h2&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ ./main&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ERROR: ld.so: object &amp;#x27;libtest.so&amp;#x27; from LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;LD_PRELOAD = (null)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;LD_PRELOADä»ç„¶è¢«æ¸…ç©ºäº†ï¼Œä½†ld.soä¼¼ä¹å°è¯•å»åŠ è½½libtest.soäº†ï¼Œä½†æ˜¯æ²¡æ‰¾ç€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å°†libtest-soæ”¾å…¥æ ‡å‡†è·¯å¾„&#34;&gt;&lt;a href=&#34;#å°†libtest-soæ”¾å…¥æ ‡å‡†è·¯å¾„&#34; class=&#34;headerlink&#34; title=&#34;å°†libtest.soæ”¾å…¥æ ‡å‡†è·¯å¾„&#34;&gt;&lt;/a&gt;å°†libtest.soæ”¾å…¥æ ‡å‡†è·¯å¾„&lt;/h2&gt;&lt;p&gt;å¦‚æœæ²¡æœ‰é…ç½®set-user-idä½ï¼š&lt;br&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ ./main&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ERROR: ld.so: object &amp;#x27;libtest.so&amp;#x27; from LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;LD_PRELOAD = (null)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;ä»ç„¶æç¤ºæ‰¾ä¸åˆ°ã€‚å¦‚æœè®¾ç½®äº†set-user-idä½ï¼š&lt;br&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ sudo chmod a+s /usr/lib64/libtest.so &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ ./main&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;I&amp;#x27;m libtest.so loaded&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;LD_PRELOAD = (null)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;åœ¨æ»¡è¶³ä¸Šä¸€èŠ‚æåˆ°çš„3ä¸ªæ¡ä»¶æ—¶ï¼Œlibteso.soå°±å¯ä»¥æ­£å¸¸åŠ è½½äº†ã€‚&lt;br&gt;çœ‹çœ‹å¦‚æœæ”¾åˆ°/usr/libä¸‹é¢ä¼šæ€ä¹ˆæ ·ï¼Ÿ&lt;br&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ ls /usr/lib/libtest.so -l&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rwsr-sr-x. 1 root root 8208 1æœˆ  24 19:48 /usr/lib/libtest.so&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost test]$ ./main&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ERROR: ld.so: object &amp;#x27;libtest.so&amp;#x27; from LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;LD_PRELOAD = (null)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;çœ‹çœ‹è¿˜æ˜¯ä¸€æ ·æ‰¾ä¸åˆ°ã€‚å¯è§åœ¨x64å¹³å°ä¸Šï¼Œ/usr/libå¹¶éæ ‡å‡†è·¯å¾„ï¼Œè€Œ/usr/lib64ä»¥åŠ/lib64æ‰æ˜¯ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;a href=&#34;#å‚è€ƒæ–‡çŒ®&#34; class=&#34;headerlink&#34; title=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;/a&gt;å‚è€ƒæ–‡çŒ®&lt;/h1&gt;&lt;p&gt;[1] &lt;a href=&#34;https://man7.org/linux/man-pages/man8/ld.so.8.html&#34;&gt;ld.so(8) â€” Linux manual page&lt;/a&gt;&lt;br&gt;[2] &lt;a href=&#34;https://stackoverflow.com/questions/18058426/does-using-linux-capabilities-disables-ld-preload&#34;&gt;Stackoverflow - Does using linux capabilities disables LD_PRELOAD&lt;/a&gt;&lt;/p&gt;
</content>
        <category term="Linux" />
        <category term="capability" />
        <category term="LD_PRELOAD" />
        <updated>2021-09-12T06:29:34.553Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/09/12/obsidian_posts/%E8%AF%A6%E8%A7%A3SELinux%20SID/</id>
        <title>è¯¦è§£SELinux SID</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/09/12/obsidian_posts/%E8%AF%A6%E8%A7%A3SELinux%20SID/"/>
        <content type="html">&lt;h1 id=&#34;Intro&#34;&gt;&lt;a href=&#34;#Intro&#34; class=&#34;headerlink&#34; title=&#34;Intro&#34;&gt;&lt;/a&gt;Intro&lt;/h1&gt;&lt;p&gt;SID = Security Identifier (å³Security ID)ã€‚å…¶ä½œç”¨å°±æ˜¯å–ä»£å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œåœ¨æƒé™åŒ¹é…æ—¶ï¼Œæå‡è§„åˆ™æœç´¢é€Ÿåº¦ï¼Œä»¥åŠé™ä½æ•´ä¸ªç­–ç•¥æ•°æ®çš„ç©ºé—´å¤æ‚åº¦ï¼Œæå‡äº†æ•´ä¸ªSELinuxç‰¹æ€§çš„æ€§èƒ½æŸè€—ã€‚&lt;br&gt;ä¾‹å¦‚ä¸€æ¬¡æƒé™åŒ¹é…çš„å‡½æ•°è°ƒç”¨åŸå‹å¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;avc_has_perm&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(struct selinux_state *state, u32 ssid, u32 tsid, u16 tclass,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;		 u32 requested, struct common_audit_data *auditdata)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ssid, tsidå°±ä»£è¡¨äº†æº(source)SIDå’Œç›®çš„(target)SIDã€‚åœ¨æœ€ç»ˆçš„av(access vector)è®¡ç®—ä¸­ï¼ŒSIDè¢«è½¬åŒ–ä¸ºcontextã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯contextï¼Ÿ&lt;br&gt;contextï¼Œå³å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œæ˜¯SELinuxçš„æ ¸å¿ƒæ¦‚å¿µã€‚å½¢å¦‚&lt;code&gt;user_u:role_r:type_t:s0-s1:c0,c1-c255&lt;/code&gt;çš„å°±æ˜¯contextã€‚å…¶ä¸­userå­—æ®µå’Œroleå­—æ®µç”¨äºRBACï¼Œtypeå­—æ®µç”¨äºTEACï¼Œåé¢çš„s0-s1,c1-c255ç”¨äºmls/mcsã€‚è€Œæ‰€æœ‰çš„è¿™äº›å­—æ®µï¼Œéƒ½ç”±ç­–ç•¥ç¼–è¯‘å·¥å…·ç”Ÿæˆäº†æ•´æ•°æ•°æ®ï¼Œåœ¨SELinuxåŠ è½½ç­–ç•¥æ—¶ä¸€å¹¶åŠ è½½åˆ°å†…å­˜policydbä¸­ã€‚&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// contextå®šä¹‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;context&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	u32 user;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	u32 role;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	u32 type;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	u32 len;        &lt;span class=&#34;comment&#34;&gt;/* length of string in bytes */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;mls_range&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;range&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; *str;	&lt;span class=&#34;comment&#34;&gt;/* string representation if context cannot be mapped. */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// contextåŠ è½½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;context_read_and_validate&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(struct context *c,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;				     struct policydb *p,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;				     &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; *fp)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    c-&amp;gt;user = le32_to_cpu(buf[&lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    c-&amp;gt;role = le32_to_cpu(buf[&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    c-&amp;gt;type = le32_to_cpu(buf[&lt;span class=&#34;number&#34;&gt;2&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨çœŸæ­£çš„æƒé™åŒ¹é…æ—¶ï¼ŒSELinuxé€šè¿‡SIDè·å–åˆ°å¯¹åº”çš„contextï¼Œå†é€šè¿‡contextä¸­çš„typeå±æ€§ï¼Œæ‰€æœpolicydbä¸­ç›¸åº”çš„hashè¡¨æ‰¾åˆ°å¯¹åº”çš„map arrayï¼Œå¹¶è·å–å¯¹åº”æŸä¸ªæƒé™çš„ä¸€ä¸ªbitä½ï¼Œæ¥å¾—åˆ°æƒé™åˆ¤å®šç»“æœã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// æœç´¢sidtabè·å–SIDå¯¹åº”çš„contextï¼Œå¹¶ç”¨contextæ•°æ®ç»“æ„æ¥è®¡ç®—æƒé™&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;security_compute_av&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(struct selinux_state *state,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 u32 ssid,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 u32 tsid,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 u16 orig_tclass,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 struct av_decision *avd,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 struct extended_perms *xperms)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    scontext = sidtab_search(sidtab, ssid);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    tcontext = sidtab_search(sidtab, tsid);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    context_struct_compute_av(policydb, scontext, tcontext, tclass, avd,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;				  xperms);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;// é€šè¿‡contextçš„typeå­—æ®µä»policydbä¸­è·å–æƒé™æ•°æ®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;context_struct_compute_av&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(struct policydb *policydb,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;				      struct context *scontext,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;				      struct context *tcontext,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;				      u16 tclass,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;				      struct av_decision *avd,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;				      struct extended_perms *xperms)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    sattr = flex_array_get(policydb-&amp;gt;type_attr_map_array,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                   scontext-&amp;gt;type - &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    tattr = flex_array_get(policydb-&amp;gt;type_attr_map_array,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                   tcontext-&amp;gt;type - &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ebitmap_for_each_positive_bit(sattr, snode, i) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        ebitmap_for_each_positive_bit(tattr, tnode, j) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; (node = avtab_search_node(&amp;amp;policydb-&amp;gt;te_avtab,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                              &amp;amp;avkey);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                 node;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                 node = avtab_search_node_next(node, avkey.specified)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;comment&#34;&gt;// Get and assign perm data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&#34;initial-SID&#34;&gt;&lt;a href=&#34;#initial-SID&#34; class=&#34;headerlink&#34; title=&#34;initial SID&#34;&gt;&lt;/a&gt;initial SID&lt;/h1&gt;&lt;p&gt;initial SIDæ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„SIDã€‚ä»–åœ¨ç­–ç•¥ç¼–è¯‘å’ŒSELinuxå¯åŠ¨ä¸­éƒ½æ‰®æ¼”äº†éå¸¸é‡è¦çš„è§’è‰²ã€‚é€šå¸¸åœ¨ç¼–è¯‘policyçš„æ—¶å€™ï¼Œéœ€è¦ä¸€äº›flaskæ–‡ä»¶ï¼Œä¾‹å¦‚Fedora refpolicyï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;bash&#34;&gt; ls refpolicy-master/policy/flask/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;access_vectors   initial_sids     security_classes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶ä¸­initial_sidså°±æŒ‡å®šäº†policyäºŒè¿›åˆ¶ä¸­æ‰€æœ‰çš„initial SIDã€‚å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;# FLASK&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# Define initial security identifiers&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid security&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid unlabeled&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid fs&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid file&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid file_labels&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid init&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid any_socket&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid port&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid netif&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid netmsg&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid node&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid igmp_packet&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid icmp_socket&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid tcp_socket&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid sysctl_modprobe&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid sysctl&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid sysctl_fs&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid sysctl_kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid sysctl_net&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid sysctl_net_unix&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid sysctl_vm&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid sysctl_dev&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid kmod&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid policy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid scmp_packet&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid devnull&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;# FLASK&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‚è€ƒã€ŠBuilding The Sample Policyã€‹ä¸­çš„ä»‹ç»ï¼Œè¿™äº›flaskæ–‡ä»¶çš„å†…å®¹å°†è¢«å†™åˆ°æœ€ç»ˆçš„policyäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼ˆå³policy.conf),å¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;notebook-tools/build-sepolicy -o policy.conf -d ../../flask-files&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;build-sepolicyæ˜¯ä¸€ä¸ªpythonçš„ç¤ºä¾‹ç¨‹åºï¼Œä»–æ˜¯è¿™æ ·å¤„ç†flaskæ–‡ä»¶çš„:&lt;br&gt;&lt;figure class=&#34;highlight python&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;try&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    f = Flask()&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    f.parseSids(flask_dir + &lt;span class=&#34;string&#34;&gt;&amp;quot;/initial_sids&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    f.parseClasses(flask_dir + &lt;span class=&#34;string&#34;&gt;&amp;quot;/security_classes&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    f.parseVectors(flask_dir + &lt;span class=&#34;string&#34;&gt;&amp;quot;/access_vectors&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# Open the file and then create the requested policy source file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    of = &lt;span class=&#34;built_in&#34;&gt;open&lt;/span&gt;(outf, &lt;span class=&#34;string&#34;&gt;&amp;#x27;w&amp;#x27;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; include == &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        of.writelines(f.createPolicyHdr(mode))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;Output header file&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;elif&lt;/span&gt; cil == &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        of.writelines(f.createCilPolicy(mode))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;Output CIL policy&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;elif&lt;/span&gt; class_perm == &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        of.writelines(f.createCilClassPerms(mode))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;Output CIL class permission sets&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;elif&lt;/span&gt; sids == &lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        of.writelines(f.createCilInitialSIDS(mode))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;Output CIL initial SIDs&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        of.writelines(f.createPolicy(mode))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;built_in&#34;&gt;print&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;Output Kernel Language policy&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    of.close()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å¯è§è¿™äº›æ–‡ä»¶çš„å†…å®¹ï¼Œè¢«å†™å…¥åˆ°ä¸€ä¸ªFlaskå¯¹è±¡ä¸­ï¼Œè€Œè¯¥å¯¹è±¡çš„å†…å®¹æœ€ç»ˆä¼šè¢«å†™å…¥ç­–ç•¥äºŒè¿›åˆ¶æ•°æ®ã€‚åœ¨åç»­çš„ç­–ç•¥ç¼–è¯‘ä¸­ï¼Œè¿™äº›æ–‡ä»¶ä¼šè¢«checkpolicyæ¥å¤„ç†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;initial SIDçš„ä½œç”¨&lt;/strong&gt;&lt;br&gt;&lt;em&gt;from â€œSELinux by Example: Using Security Enhanced Linuxâ€&lt;/em&gt;&lt;br&gt;Some objects are labeled via an initial SID early in system initialization, &lt;strong&gt;&lt;em&gt;even before the policy is loaded&lt;/em&gt;&lt;/strong&gt;. This labeling behavior is needed, for example, to label objects such as the kernel security server and the root filesystem, which are present in the system before the first policy load. &lt;strong&gt;&lt;em&gt;When the policy is eventually loaded, the initial SIDs are then associated with the appropriate security context&lt;/em&gt;&lt;/strong&gt;.&lt;br&gt;&lt;strong&gt;&lt;em&gt;Initial SIDs are also used to prevent objects from having a missing or invalid security context, which would make it impossible for SELinux to correctly enforce access&lt;/em&gt;&lt;/strong&gt;. Instead, SELinux associates these objects with the special unlabeled initial SID. The unlabeled initial SID should have a security context that allows only limited access, thereby preventing inappropriate access until the objects can be relabeled by the administrator or destroyed.&lt;br&gt;Invalid security contexts most commonly result from loading a new policy that removes users, roles, or types, or changes role or type authorizations. In this situation, the &lt;strong&gt;&lt;em&gt;SIDs representing security contexts that use these invalid names or associations will become invalid and are mapped to the unlabeled SID at policy load&lt;/em&gt;&lt;/strong&gt;. Invalid security contexts can also arise when transferring object instances between systems (for example, using removable media). Further, if the objects are created on a non-SELinux system, they will have no associated security context. Regardless of whether the security context is invalid or missing, SELinux will use the unlabeled initial SID on first access to the object as the security context.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼Œä¸€å…±æœ‰è¿™å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œpolicyå°šæœªåŠ è½½ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„contextè¿˜æ²¡è¢«æŠ½è±¡æˆSIDï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­çš„policydbé‡Œã€‚allowè§„åˆ™ä¹Ÿè¿˜æ²¡åŠ è½½ï¼Œè¿™æ—¶å€™ï¼Œä¸ºäº†ä¿è¯ä»£ç å½’ä¸€ï¼Œæ‰€ä»¥éœ€è¦è¿™äº›unlabeled SIDï¼Œåœ¨SELinuxå¯åŠ¨æµç¨‹ä¸­ï¼Œå†å…·ä½“ä»‹ç»ã€‚&lt;/li&gt;
&lt;li&gt;å½“ç³»ç»Ÿç­–ç•¥å˜åŒ–æ—¶ï¼Œæœ‰äº›roleï¼Œuseræˆ–typeè¢«åˆ é™¤ï¼Œå¯¼è‡´ä¸€äº›å®‰å…¨ä¸Šä¸‹æ–‡å¤±æ•ˆäº†ï¼Œæ­¤æ—¶è¿™äº›å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œåœ¨ç­–ç•¥åŠ è½½æ—¶ï¼Œä¼šè¢«æ˜ å°„åˆ°è¿™äº›initial SIDä¸Šã€‚ï¼ˆè¿™é‡Œè¿˜æ²¡æ‰¾åˆ°å…·ä½“çš„ä»£ç ä½ç½®ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¯åŠ¨æ—¶çš„ä½¿ç”¨&#34;&gt;&lt;a href=&#34;#å¯åŠ¨æ—¶çš„ä½¿ç”¨&#34; class=&#34;headerlink&#34; title=&#34;å¯åŠ¨æ—¶çš„ä½¿ç”¨&#34;&gt;&lt;/a&gt;å¯åŠ¨æ—¶çš„ä½¿ç”¨&lt;/h2&gt;&lt;p&gt;initè¿›ç¨‹åœ¨åŠ è½½ç­–ç•¥ä¹‹å‰ï¼Œé¦–å…ˆå°†SELinuxçš„enforcingæ¨¡å¼æ‰“å¼€ã€‚å…¶æ‰“å¼€çš„æ–¹å¼å°±æ˜¯å¾€selinuxfsçš„enforceæ–‡ä»¶å†™1ã€‚æ³¨æ„æ­¤æ—¶ç­–ç•¥æœªåŠ è½½ï¼Œåˆå§‹åŒ–ä¹Ÿæœªå®Œæˆã€‚æ‰€ä»¥ç­–ç•¥åˆ¤æ–­ç›´æ¥å–allowã€‚&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;security_compute_av&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(struct selinux_state *state,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 u32 ssid,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 u32 tsid,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 u16 orig_tclass,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 struct av_decision *avd,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;params&#34;&gt;&lt;span class=&#34;function&#34;&gt;			 struct extended_perms *xperms)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; (!state-&amp;gt;initialized)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;keyword&#34;&gt;goto&lt;/span&gt; allow;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;allow:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	avd-&amp;gt;allowed = &lt;span class=&#34;number&#34;&gt;0xffffffff&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;ä½†ç”±äºç”¨æˆ·æ€çš„å…¥å£æ˜¯ä¸€è‡´çš„ï¼Œå³å¯åŠ¨å®Œæˆåï¼Œç”¨æˆ·æ€å¯ä»¥å†™åŒæ ·çš„enforceæ–‡ä»¶å®ŒæˆSELinuxçŠ¶æ€çš„åˆ‡æ¢ï¼Œæ‰€ä»¥ä¸ºäº†åˆ¤æ–­æ­¤æ—¶ç”¨æˆ·æ€è¿›ç¨‹æ˜¯å¦å…·æœ‰è®¾ç½®çš„æƒé™ï¼Œåœ¨enforceæ–‡ä»¶çš„å…¥å£å¤„ï¼Œå¯¹ç”¨æˆ·æ€è¿›ç¨‹æƒé™è¿›è¡Œäº†åˆ¤å®šï¼š&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;length = avc_has_perm(&amp;amp;selinux_state,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  current_sid(), SECINITSID_SECURITY,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  SECCLASS_SECURITY, SECURITY__SETENFORCE,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                  &lt;span class=&#34;literal&#34;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;è¿™é‡Œå°±ç”¨åˆ°äº†initial SID - &lt;code&gt;SECINITSID_SECURITY&lt;/code&gt;ã€‚è¿™é‡Œå…¶å®å·²ç»å¯ä»¥ä½¿ç”¨selinuxfsçš„inode.i_security.sidï¼Œä½†ç”±äºselinuxfsæœªé€šè¿‡ç³»ç»Ÿçš„file openè°ƒç”¨ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨åˆ°inodeä¸‹çš„SIDæ ‡ç­¾ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç³»ç»Ÿæ ‡ç­¾æ— æ•ˆæ—¶&#34;&gt;&lt;a href=&#34;#ç³»ç»Ÿæ ‡ç­¾æ— æ•ˆæ—¶&#34; class=&#34;headerlink&#34; title=&#34;ç³»ç»Ÿæ ‡ç­¾æ— æ•ˆæ—¶&#34;&gt;&lt;/a&gt;ç³»ç»Ÿæ ‡ç­¾æ— æ•ˆæ—¶&lt;/h2&gt;&lt;p&gt;ä»¥socket bindæ—¶ï¼Œå¯¹IPåœ°å€è¿›è¡Œæƒé™åˆ¤æ–­ä¸ºä¾‹ã€‚è¯¥æƒé™åˆ¤æ–­æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;pre class=&#34;mermaid&#34;&gt;graph TD
A[&#34;selinux_socket_bind&#34;]
A --&gt; B[&#34;sock_has_perm(SOCKET__BIND)&#34;]
B --&gt; C[&#34;get nodecon sid by sel_netnode_sid&#34;]
C --&gt; D[&#34;av_has_perm&#34;]&lt;/pre&gt;&lt;br&gt;&lt;code&gt;security_node_sid&lt;/code&gt;ä¼šä»&lt;code&gt;policydb-&amp;gt;ocontexts[OCON_NODE]&lt;/code&gt;ä¸­æœç´¢policydbä¸­å…³äºè¯¥IPåœ°å€çš„nodeconå®šä¹‰ï¼Œå¦‚æœæ‰¾ä¸ç€ï¼Œè¯´æ˜æ­¤IPç›¸å…³çš„nodeconæ— æ•ˆï¼ˆæœªå®šä¹‰ï¼‰ï¼Œåˆ™ä¼šèµ°é»˜è®¤çš„initial SIDã€‚&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; (c) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; (!c-&amp;gt;sid[&lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        rc = sidtab_context_to_sid(sidtab,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                       &amp;amp;c-&amp;gt;context[&lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                       &amp;amp;c-&amp;gt;sid[&lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; (rc)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;keyword&#34;&gt;goto&lt;/span&gt; out;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    *out_sid = c-&amp;gt;sid[&lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    *out_sid = SECINITSID_NODE; &lt;span class=&#34;comment&#34;&gt;// &amp;lt;===== intial SID&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&#34;å…¶ä»–SID&#34;&gt;&lt;a href=&#34;#å…¶ä»–SID&#34; class=&#34;headerlink&#34; title=&#34;å…¶ä»–SID&#34;&gt;&lt;/a&gt;å…¶ä»–SID&lt;/h1&gt;&lt;p&gt;é™¤äº†initial SIDç”±å†…æ ¸ç›´æ¥åŠ è½½ç”Ÿæˆï¼Œå…¶ä»–çš„SIDåˆ™ç”±å¯¹åº”çš„æ‰“æ ‡ç­¾æµç¨‹ç”Ÿæˆã€‚ä¾‹å¦‚ï¼šæ–‡ä»¶çš„SIDåˆ™ç”±setfiles/restoreconå·¥å…·æ‰“å…¥æ–‡ä»¶ç³»ç»Ÿçš„æ‰©å±•å±æ€§ä¸Šï¼Œsocketåˆ™ç”±socketç³»ç»Ÿè°ƒç”¨åˆ›å»ºæ—¶ç”Ÿæˆã€‚&lt;br&gt;ä»¥socket bindä¸ºä¾‹ï¼Œå› ä¸ºæ¯”è¾ƒç®€å•ã€‚å½“socket bindç³»ç»Ÿè°ƒç”¨è¢«æ‰§è¡Œæ—¶ï¼Œä¸€ä¸ªsocket objectè¢«ç»‘å®šåˆ°ä¸€ä¸ªnodeä¸Šã€‚è€Œæ­¤æ—¶è¯¥nodeçš„SIDæ‰è¢«å†™å…¥policydbä¸­ã€‚&lt;br&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;sel_netnode_sid&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; *addr, u16 family, u32 *sid)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;sel_netnode&lt;/span&gt; *&lt;span class=&#34;title&#34;&gt;node&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	rcu_read_lock();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	node = sel_netnode_find(addr, family);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; (node != &lt;span class=&#34;literal&#34;&gt;NULL&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		*sid = node-&amp;gt;nsec.sid;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		rcu_read_unlock();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	rcu_read_unlock();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; sel_netnode_sid_slow(addr, family, sid);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;&lt;code&gt;sel_netnode_sid_slow&lt;/code&gt;è°ƒç”¨&lt;code&gt;security_node_sid&lt;/code&gt;,å¹¶æœ€ç»ˆè°ƒç”¨&lt;code&gt;sidtab_context_to_sid&lt;/code&gt;å°†ç›¸å…³çš„SIDä»¥åŠå¯¹åº”çš„contextæ•°æ®ç»“æ„æ’å…¥åˆ°è¡¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;pre class=&#34;mermaid&#34;&gt;graph TD
A[&#34;security_node_sid&#34;]
A --&gt; B[&#34;search policydb-&gt;ocontexts[OCON_NODE]&#34;]
B --&gt; C{&#34;find?&#34;}
C --&gt; |N| B
C --&gt; |Y| D[&#34;sidtab_context_to_sid(contextï¼Œ&amp;sid)&#34;]
D --&gt; E(&#34;end&#34;)
C --&gt; |Never find| F[&#34;set an initial SID&#34;]
F --&gt; E&lt;/pre&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;security_node_sid&lt;/code&gt;ä½¿ç”¨ä¼ å…¥çš„IPåœ°å€åœ¨policydbä¸­åŒ¹é…æŸ¥æ‰¾contextï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿›è¡Œä¸‹ä¸€æ­¥ï¼ŒåŒ¹é…æˆ–ç”ŸæˆSIDï¼Œæ‰¾ä¸åˆ°ï¼Œåˆ™ç›´æ¥ä½¿ç”¨initial SIDã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sidtab_context_to_sid&lt;/code&gt;å°†contextå†™å…¥sidtabï¼Œå¹¶è·å–è¿”å›çš„SIDè®°å…¥policydbä¸­ï¼Œåç»­é€šè¿‡contextæ‰¾SIDï¼Œç›´æ¥åŒ¹é…&lt;code&gt;policydb-&amp;gt;ocontexts[OCON_NODE];&lt;/code&gt;å³å¯ã€‚å¯¹äºSIDæœ¬èº«çš„ç”Ÿæˆä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªå•å‘å¢é•¿çš„æ•´å½¢æ•°å­—ï¼Œåœ¨&lt;code&gt;sidtab_context_to_sid&lt;/code&gt;ä¸­ã€‚&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sid = sidtab_search_context(s, context);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; (sid)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;goto&lt;/span&gt; unlock_out;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sid = s-&amp;gt;next_sid++;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;..&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ret = sidtab_insert(s, sid, context);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
å…ˆå°è¯•åœ¨sidtabä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±åŠ ä¸€æ¡è®°å½•ï¼Œå¹¶ä¸ºsidèµ‹å€¼ã€‚&lt;h1 id=&#34;æ€»ç»“&#34;&gt;&lt;a href=&#34;#æ€»ç»“&#34; class=&#34;headerlink&#34; title=&#34;æ€»ç»“&#34;&gt;&lt;/a&gt;æ€»ç»“&lt;/h1&gt;SIDåœ¨æ•´ä¸ªSELinuxå­ç³»ç»Ÿä¸­çš„ä½œç”¨å°±æ˜¯æå‡åŒ¹é…æ€§èƒ½ï¼ˆä»å®‰å…¨ä¸Šä¸‹æ–‡çš„å­—ç¬¦ä¸²åŒ¹é…ï¼Œé™ä½åˆ°æ•´æ•°åŒ¹é…ï¼‰,æ‰€ä»¥åœ¨æ•´ä¸ªSELinuxå­ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸå†…ï¼ŒSIDæ€»æ˜¯ä¸å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ä¸€ä¸€å¯¹åº”çš„ã€‚åœ¨ä¸€æ¬¡æƒé™åŒ¹é…è¿‡ç¨‹ä¸­ï¼ŒSIDçš„ä½¿ç”¨å¦‚ä¸‹ï¼š&lt;br&gt;&lt;img src=&#34;/2021/09/12/obsidian_posts/%E8%AF%A6%E8%A7%A3SELinux%20SID/948A5192-E302-40F3-9A2D-D3C2D5B2FF75.png&#34; alt=&#34;7fe0cdf2b84938b1e0610fe99bd3c917&#34;&gt;&lt;br&gt;contextå’ŒSIDçš„å®šä¹‰åˆ†åˆ«ä¸ºï¼š&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;u32 sid;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;context&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	u32 user;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	u32 role;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	u32 type;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	u32 len;        &lt;span class=&#34;comment&#34;&gt;/* length of string in bytes */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;mls_range&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;range&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;char&lt;/span&gt; *str;	&lt;span class=&#34;comment&#34;&gt;/* string representation if context cannot be mapped. */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&#34;ç›¸å…³å·¥å…·&#34;&gt;&lt;a href=&#34;#ç›¸å…³å·¥å…·&#34; class=&#34;headerlink&#34; title=&#34;ç›¸å…³å·¥å…·&#34;&gt;&lt;/a&gt;ç›¸å…³å·¥å…·&lt;/h1&gt;æ²¡æœ‰ä¸€ä¸ªä¸“é—¨çš„å·¥å…·ç”¨æ¥è½¬æ¢SIDä¸contextã€‚ä½†libselinuxæä¾›äº†ç›¸åº”çš„æ¥å£ï¼Œå‚è€ƒ&lt;a href=&#34;https://linux.die.net/man/3/sidget&#34;&gt;sidget(3) - Linux man page&lt;/a&gt;ã€‚&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;avc_context_to_sid&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;keyword&#34;&gt;security_context_t&lt;/span&gt; ctx, &lt;span class=&#34;keyword&#34;&gt;security_id_t&lt;/span&gt; *sid)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;avc_sid_to_context&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;keyword&#34;&gt;security_id_t&lt;/span&gt; sid, &lt;span class=&#34;keyword&#34;&gt;security_context_t&lt;/span&gt; *ctx)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;seinfo&#34;&gt;&lt;a href=&#34;#seinfo&#34; class=&#34;headerlink&#34; title=&#34;seinfo&#34;&gt;&lt;/a&gt;seinfo&lt;/h2&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;æ‰“å°æ‰€æœ‰initial SID&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost ~]$ seinfo --initialsid&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Initial SIDs: 27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   any_socket&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   devnull&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   file&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   file_labels&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   fs&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   icmp_socket&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   igmp_packet&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   init&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æ‰“å°selinuxfs context&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost ~]$ seinfo --genfscon|grep selinux&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;   genfscon selinuxfs /  system_u:object_r:security_t:s0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;initial-contexts&#34;&gt;&lt;a href=&#34;#initial-contexts&#34; class=&#34;headerlink&#34; title=&#34;initial_contexts&#34;&gt;&lt;/a&gt;initial_contexts&lt;/h2&gt;ç­–ç•¥åŠ è½½åï¼Œæ¯ä¸ªinitial SIDéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„contextã€‚è¿™äº›contextåœ¨å„ç­–ç•¥æ¨¡å—ä¸­å®šä¹‰ã€‚è¿™äº›contextåœ¨selinuxfså¯ä»¥æŸ¥çœ‹ï¼š&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ben@localhost ~]$ sudo cat /sys/fs/selinux/initial_contexts/kernel&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;system_u:system_r:kernel_t:s0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;a href=&#34;#å‚è€ƒæ–‡çŒ®&#34; class=&#34;headerlink&#34; title=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;/a&gt;å‚è€ƒæ–‡çŒ®&lt;/h1&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/fedora-selinux/selinux-policy&#34;&gt;Fedora refpolicy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Frank Mayer, Karl MacMillan, David Caplanï¼Œ July 27, 2006- â€œSELinux by Example: Using Security Enhanced Linuxâ€&lt;/li&gt;
&lt;li&gt;SELinuxå®˜æ–¹æ•™æï¼Œâ€&lt;a href=&#34;https://github.com/SELinuxProject/selinux-notebook&#34;&gt;The SELinux Notebook&lt;/a&gt;â€œ Volume II, Building The Sample Policy&lt;/li&gt;
&lt;li&gt;SELinuxå®˜æ–¹æ•™æï¼Œâ€&lt;a href=&#34;https://github.com/SELinuxProject/selinux-notebook&#34;&gt;The SELinux Notebook 4th Edition&lt;/a&gt;â€œ&lt;/li&gt;
&lt;/ul&gt;
</content>
        <category term="SELinux" />
        <updated>2021-09-12T06:26:36.976Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/08/30/obsidian_posts/%E6%88%91%E7%9A%84Code%20Review%E5%BF%83%E5%BE%97/</id>
        <title>Code Review</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/08/30/obsidian_posts/%E6%88%91%E7%9A%84Code%20Review%E5%BF%83%E5%BE%97/"/>
        <content type="html">&lt;p&gt;è®°å¾—æŸä¸€åœºåˆï¼Œä¸€ä½é¢†å¯¼è¯´è¿‡ï¼Œè¿™æ¬¡å¯ä¿¡å˜é©å¤§æ¦‚ç‡ä¼šç•™ä¸‹ä¸¤æ ·ä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯committeræœºåˆ¶ï¼Œå¦ä¸€ä¸ªæ˜¯ä»£ç ç™½ç›’è¯„ä»·ã€‚è€Œå¯¹äºcommitteræ¥è¯´ï¼Œcode reviewå°±æ˜¯å…¶æœ€é‡è¦çš„å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡æ¥è§¦code reviewè¿˜æ˜¯åœ¨å‰å…¬å¸ã€‚é‚£æ—¶å€™ï¼Œä»£ç åˆå…¥è¦è¯·äººç‚¹â€œship itâ€ã€‚åæ¥å·¥å…·åˆ‡æ¢æˆäº†gerritï¼Œä¸è¿‡code reviewåŸºæœ¬ä¸Šè¿˜æ˜¯æµäºå½¢å¼ï¼Œå’Œæœ‹å‹åœˆç‚¹èµå·®ä¸å¤šã€‚æœ‰ä¸€äº›æ¯”è¾ƒè¾ƒçœŸçš„è€å¤–ä¼šç»™å‡ºä¸å°‘æ„è§ï¼ŒåŒäº‹é—´è¿˜é¢‡æœ‰ä¸å¿¿ã€‚&lt;br&gt;â€è¿æ‹¼å†™é”™è¯¯ä¹Ÿè¦æï¼â€œ&lt;br&gt;â€çƒ¦æ­»äº†ï¼Œä»–æ ¹æœ¬å°±ä¸æ‡‚ï¼â€œ&lt;br&gt;å›½å†…çš„å¼€å‘åŒå­¦åŸºæœ¬ä¸Šæ˜¯ç£¨ä¸å¼€é¢å­çš„ï¼Œåæ­£ä»£ç åˆä¸æ˜¯æˆ‘ç»´æŠ¤ï¼Œå°±ç»™ä½ ç‚¹ä¸ªèµæœ‰å•¥å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;çœŸæ­£ç¬¬ä¸€æ¬¡è¢«è¯„å®¡ä»£ç æ˜¯åˆå…¥æˆ‘å¸çš„æ—¶å€™ã€‚é‚£æ—¶å€™ä¸éš”å£éƒ¨é—¨çš„åŒäº‹ä¸€èµ·å‚ä¸ä¸€ä¸ªæ“ä½œç³»ç»Ÿé¡¹ç›®ã€‚å…¶ä¸­ä¸€ä½ä¸“å®¶åœ¨è¯„å®¡ä»£ç çš„æ—¶å€™éå¸¸è®¤çœŸã€‚æ¯æ¬¡æäº¤MRï¼Œè¯¥ä¸“å®¶åœ¨è¯„å®¡çš„æ—¶å€™éƒ½ä¼šæä¸€å †é—®é¢˜ã€‚è€Œä¸”ï¼Œè¿™äº›é—®é¢˜ç‚¹éƒ½æˆ–å¤šæˆ–å°‘ç¡®å®å­˜åœ¨é—®é¢˜ï¼Œæˆ–è€…å­˜åœ¨ä¼˜åŒ–çš„å¯èƒ½ã€‚æˆ–ä¿®æ”¹ï¼Œæˆ–è§£é‡Šï¼Œæˆ–è¡¥å……æ³¨é‡Šã€‚ä¸è¿‡ï¼Œæœ€ç»ˆæˆ‘çš„MRä¹Ÿå¹¶æ²¡æœ‰åˆå…¥ï¼Œå°±åˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªé¡¹ç›®å»äº†ã€‚ç»è¿‡è¿™æ¬¡åˆ»éª¨é“­å¿ƒçš„åˆä½œï¼Œæˆ‘ä¹Ÿç®—æ˜¯ç»å†äº†ä¸€æ¬¡çœŸæ­£çš„ä»£ç è¯„å®¡ã€‚åæ¥ï¼Œè¿™ä½ä¸“å®¶ä»¥åŠå’Œä»–åŒç»„çš„å°å…„å¼Ÿï¼Œåœ¨æˆ‘å¸å±¡æ¬¡çš„committerè¯„é€‰ä¸­ï¼Œæ–©è·äº†æ•°æ¬¡ä¼˜ç§€committerçš„æ®Šè£ã€‚å¾ˆè£å¹¸å’Œä»–ä»¬èƒ½æœ‰è¿‡ä¸€æ®µâ€œä¸å¤ªæ„‰å¿«â€çš„åˆä½œç»å†ã€‚åœ¨ä¹‹åçš„é¡¹ç›®é‡Œï¼Œæˆ‘ä¹Ÿè¢«ä»»å‘½ä¸ºcommitterï¼Œæˆ‘å¸Œæœ›æŠŠè¿™ä»½â€œä¸æ„‰å¿«â€åŸæ±åŸå‘³åœ°ä¼ é€’ä¸‹å»ã€‚&lt;/p&gt;
&lt;p&gt;code reviewï¼Œåˆå«ä»£ç è¯„å®¡ï¼Œæ˜¯ä»£ç å¼€å‘å¾ˆå¿…è¦çš„ä¸€ç¯ï¼Œä¹Ÿæ˜¯ä»£ç åˆå…¥çš„æœ€åä¸€ç¯ã€‚æˆ‘ä»¬é€šå¸¸è¯´ï¼Œé—®é¢˜å‘ç°å¾—è¶Šæ—©ï¼Œä¿®å¤é—®é¢˜èŠ±è´¹çš„æˆæœ¬æœˆåº•ã€‚code reviewé€šå¸¸å°±æ˜¯é çœ‹çœ‹ä»£ç ï¼Œå°±èƒ½å‘ç°ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼Œæˆæœ¬æ˜¯éå¸¸ä½çš„ã€‚è¯•æƒ³ä»£ç åˆå…¥ä¹‹åå†å‘ç°é—®é¢˜ï¼Œä¼šå¼•å…¥å¤šå°‘overloadingâ€”â€”æ²Ÿé€šï¼Œé‡ç°ï¼Œå®šç•Œï¼ŒæŠ“logâ€¦â€¦&lt;/p&gt;
&lt;p&gt;code reviewæ—¢ç„¶è¿™ä¹ˆå¥½ï¼Œé‚£ä¸ºä»€ä¹ˆæ€»åšä¸å¥½å‘¢ï¼Ÿå› ä¸ºå¤§å®¶éƒ½æ˜¯èŒåœºäººï¼Œç£¨ä¸å¼€é¢å„¿ã€‚é€šå¸¸æˆ‘ä»¬çœ‹åˆ°åˆ«äººåšçš„ä¸å¥½çš„åœ°æ–¹ï¼Œéƒ½ä¸ä¼šå½“é¢æˆ³ç ´ã€‚å…³ç³»å¥½çš„ï¼Œå¯èƒ½ç§åº•ä¸‹ä¼šæé†’ä¸€ä¸‹ï¼Œç»å¤§å¤šæ•°æƒ…å†µå°±å½“ä½œè§†è€Œä¸è§ã€‚æ‰€ä»¥committerè¯¾ç¨‹é€šå¸¸ç¬¬ä¸€å¥è¯éƒ½æ˜¯æ•™å¤§å®¶â€œè¦æ•¢äºè¯´ä¸â€ã€‚è¯æ˜¯ä¸é”™ï¼Œä¸è¿‡å¦‚æœæ²¡æœ‰å…·ä½“æ€ä¹ˆåšï¼Œå°±ç•¥æ˜¾ç©ºæ´ï¼Œç¼ºä¹å®æ“æ€§ã€‚å¥½åœ¨Googleæä¾›äº†ä¸€ä»½è¯¦å°½çš„code reviewæŒ‡å—ï¼ˆã€Š&lt;a href=&#34;https://github.com/google/eng-practices&#34;&gt;google/eng-practices: Googleâ€™s Engineering Practices documentation&lt;/a&gt;ã€‹ï¼‰ï¼Œä»æäº¤äººå’Œè¯„å®¡äººçš„è§’åº¦ï¼Œç»™å‡ºäº†åˆ‡å®çš„åšæ³•ï¼Œå€¼å¾—å¤§å®¶é˜…è¯»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç»“åˆæˆ‘è‡ªèº«çš„ä¸€äº›è¯„å®¡ç»éªŒå’ŒGoogleæŒ‡å—ï¼Œä»committerçš„è§’åº¦è°ˆä¸€è°ˆæˆ‘çš„å¿ƒå¾—ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å¦‚ä½•æå‡ºè¯„å®¡æ„è§ï¼Ÿ&#34;&gt;&lt;a href=&#34;#å¦‚ä½•æå‡ºè¯„å®¡æ„è§ï¼Ÿ&#34; class=&#34;headerlink&#34; title=&#34;å¦‚ä½•æå‡ºè¯„å®¡æ„è§ï¼Ÿ&#34;&gt;&lt;/a&gt;å¦‚ä½•æå‡ºè¯„å®¡æ„è§ï¼Ÿ&lt;/h1&gt;&lt;p&gt;å°½é‡ä¿æŒå°±äº‹è®ºäº‹çš„æ€åº¦ï¼Œé¿å…é‡‡ç”¨æƒ…ç»ªåŒ–çš„è¡¨è¾¾æ–¹å¼ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸å¥½çš„ä¾‹å­: â€œä½ ä¸ºä»€ä¹ˆä¼šåœ¨è¿™é‡Œä½¿ç”¨çº¿ç¨‹ï¼Œè¿™æ ·åšéš¾é“ä¼šæœ‰ä»»ä½•å¥½å¤„ï¼Ÿâ€&lt;/p&gt;
&lt;p&gt;å¥½çš„ä¾‹å­: â€œæˆ‘å¹¶æ²¡æœ‰å‘ç°è¿™ä¸ªå¹¶å‘æ¨¡å—ç»™ç¨‹åºå¸¦æ¥äº†å¤šå°‘å¸®åŠ©ï¼Œå¹¶ä¸”è¿˜å¢åŠ äº†&lt;strong&gt;ç¨‹åºçš„å¤æ‚æ€§ï¼Œå› æ­¤æˆ‘è®¤ä¸ºè¿™æ®µä»£ç æœ€å¥½æ˜¯ç”¨å•çº¿ç¨‹è€Œä¸æ˜¯å¤šçº¿ç¨‹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åŠæ—¶çš„è¯„å®¡ï¼Œä¹Ÿå¯ä»¥å‡å°‘è´Ÿé¢è¯„è®ºå¸¦æ¥çš„â€œæŒ«è´¥æ„Ÿâ€ã€‚&lt;br&gt;è¯„å®¡äººå¦‚æœèƒ½å¤Ÿä¸»åŠ¨åœ°ä¸æäº¤äººè¿›è¡Œäº¤æµæ¢è®¨ï¼Œæ¥å—æäº¤äººçš„è§£é‡Šï¼Œä¹Ÿå¯ä»¥å¾ˆå¤§ç¨‹åº¦é¿å…åœ¨MRä¸­å‘ç”Ÿé”®ç›˜ä¾ ç°è±¡ã€‚&lt;/p&gt;
&lt;h1 id=&#34;é—®é¢˜å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ&#34;&gt;&lt;a href=&#34;#é—®é¢˜å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ&#34; class=&#34;headerlink&#34; title=&#34;é—®é¢˜å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ&#34;&gt;&lt;/a&gt;é—®é¢˜å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ&lt;/h1&gt;&lt;p&gt;é—®é¢˜å¤ªå¤šåº”ä¸åº”è¯¥æå‡ºæ¥ï¼Ÿä¼šä¸ä¼šå¾—ç½ªæäº¤äººï¼Ÿä¼šä¸ä¼šæ¥å¾—åŠä¿®ï¼Œå½±å“äº¤ä»˜è¿›åº¦ï¼Ÿ&lt;br&gt;Googleç»™å‡ºçš„ç­”æ¡ˆæ˜¯â€œå¦‚æœç¡®å®šæ˜¯é—®é¢˜ï¼Œåº”å½“å°½é‡æå‡ºâ€ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯å“ªäº›é—®é¢˜éœ€è¦æå‡ºæ¥ã€‚code reviewå¹¶ä¸æ˜¯ä¸ºäº†è¿½æ±‚å®Œç¾ã€‚ä¸åº”å½“è‹›è´£æäº¤äººå†™å‡ºå®Œç¾ä»£ç ã€‚é—®é¢˜è§£å†³ä¹Ÿè¦é¡¾åŠæˆæœ¬ã€‚åªè¦ä¿è¯æäº¤çš„ä»£ç å¯¹åŸæœ‰ä»£ç æœ‰äº†æ˜æ˜¾çš„æå‡ï¼Œä¸”èƒ½æ­£å¸¸å·¥ä½œï¼Œå°±åº”è¯¥å°½å¿«åˆå…¥ã€‚è¯†åˆ«å‡ºçš„é—®é¢˜å¯ä»¥ç­‰å¾…æœªæ¥ä¿®å¤ï¼Œåªè¦ç¡®ä¿æœ‰åˆé€‚çš„è·Ÿè¸ªæ–¹å¼å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œå¦‚æœç¡®å®æœ‰é—®é¢˜ï¼Œå°±åº”å½“åŠæ—¶æå‡ºã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤ŸåŠæ—¶å“åº”è¯„å®¡è¯·æ±‚ï¼Œå¹¶ä¸”é¿å…æƒ…ç»ªåŒ–è§‚ç‚¹ï¼Œé€šå¸¸ä¸å¤ªä¼šä»¤æäº¤äººæ„Ÿè§‰ä¸èˆ’æœã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¾ˆå¤šé—®é¢˜éƒ½æ˜¯ä¸€äº›ç¼–å†™é£æ ¼çš„é—®é¢˜ï¼Œä¸€æ—¦ä¿®æ”¹äº†ï¼Œåç»­å¯èƒ½å°±ä¸ä¼šå†å‡ºç°ã€‚é‚£ä¹ˆåç»­çš„ä»£ç è¯„å®¡é€Ÿåº¦å°±ä¼šå˜å¿«ã€‚&lt;/p&gt;
&lt;h1 id=&#34;code-reviewåº”å½“ä½•æ—¶è¿›è¡Œ&#34;&gt;&lt;a href=&#34;#code-reviewåº”å½“ä½•æ—¶è¿›è¡Œ&#34; class=&#34;headerlink&#34; title=&#34;code reviewåº”å½“ä½•æ—¶è¿›è¡Œ&#34;&gt;&lt;/a&gt;code reviewåº”å½“ä½•æ—¶è¿›è¡Œ&lt;/h1&gt;&lt;p&gt;code reviewåº”å½“åŠæ—¶ï¼Œå› ä¸ºé€šå¸¸æäº¤äººéœ€è¦ç­‰å¾…è¯„å®¡ç»“æœï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥å¼€å‘ã€‚code reviewæ‹–å¾—æ¯”è¾ƒå°±ï¼Œå¦‚æœæ¶‰åŠå¤§é¢ç§¯æ”¹åŠ¨ï¼Œé‚£ä¹ˆåç»­å¼€å‘ä»£ç çš„mergeæˆæœ¬å°±ä¼šå¾ˆé«˜ã€‚å¯èƒ½é€ æˆå›¢é˜Ÿå¼€å‘é…åˆè¿›åº¦å—å½±å“ã€‚æ‰€ä»¥å»ºè®®code reviewçš„æ—¶é—´ä¸è¦è¶…è¿‡ä¸€å¤©ã€‚&lt;/p&gt;
&lt;p&gt;code reviewåº”å½“åŠæ—¶ï¼Œä½†å¦‚æœè¯„å®¡äººæ­£åœ¨å¤„ç†éœ€è¦é›†ä¸­æ³¨æ„åŠ›çš„äº‹æƒ…æ—¶ï¼Œä¾‹å¦‚æ­£åœ¨å¼€å‘ä»£ç æ—¶ï¼Œå°±ä¸åº”å½“è¢«æ‰“æ–­ã€‚å› ä¸ºä¸€æ—¦è¢«æ‰“æ–­ï¼Œé‚£ä¹ˆæ¢å¤ç°åœºçš„æ—¶é—´æˆæœ¬å°±ä¼šæ¯”è¾ƒé«˜ã€‚æ¯”è¾ƒåˆç†çš„ç€æ‰‹å¤„ç†code reviewçš„æ—¶é—´æ˜¯å¤„ç†äº‹æƒ…çš„é—´æ­‡ï¼Œä¾‹å¦‚ï¼šæ¯å¤©å¼€å§‹å·¥ä½œä¹‹å‰ï¼Œæˆ–è€…åƒå®Œåˆé¤ï¼Œæˆ–è€…ä»èŒ¶æ°´é—´å›æ¥â€¦â€¦&lt;/p&gt;
&lt;h1 id=&#34;ä¸æäº¤äººå‘ç”Ÿæ„è§ä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ&#34;&gt;&lt;a href=&#34;#ä¸æäº¤äººå‘ç”Ÿæ„è§ä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ&#34; class=&#34;headerlink&#34; title=&#34;ä¸æäº¤äººå‘ç”Ÿæ„è§ä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ&#34;&gt;&lt;/a&gt;ä¸æäº¤äººå‘ç”Ÿæ„è§ä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ&lt;/h1&gt;&lt;p&gt;å¦‚æœä½ åšä¿¡æœ‰é—®é¢˜ï¼Œåº”å½“æ›´ç§¯æåœ°å’Œæäº¤äººæ²Ÿé€šã€‚å¦‚æœæœ€ç»ˆæ— æ³•è¯´æœæäº¤äººï¼Œåº”å½“ä»¥æäº¤äººçš„æ„è§ä¸ºå‡†ï¼Œæ¯•ç«Ÿä»–æ‰æ˜¯ä»£ç ownerã€‚&lt;/p&gt;
&lt;h1 id=&#34;ä¸é¡¹ç›®äº¤ä»˜èŠ‚ç‚¹å†²çªæ€ä¹ˆåŠï¼Ÿ&#34;&gt;&lt;a href=&#34;#ä¸é¡¹ç›®äº¤ä»˜èŠ‚ç‚¹å†²çªæ€ä¹ˆåŠï¼Ÿ&#34; class=&#34;headerlink&#34; title=&#34;ä¸é¡¹ç›®äº¤ä»˜èŠ‚ç‚¹å†²çªæ€ä¹ˆåŠï¼Ÿ&#34;&gt;&lt;/a&gt;ä¸é¡¹ç›®äº¤ä»˜èŠ‚ç‚¹å†²çªæ€ä¹ˆåŠï¼Ÿ&lt;/h1&gt;&lt;p&gt;é™¤äº†ç¡®å®ä¼šå¼•èµ·é—®é¢˜çš„ä»£ç éœ€è¦ä¿®æ­£ä¹‹å¤–ï¼Œå…¶ä»–çš„æ”¹è¿›æ„è§æ˜¯éœ€è¦æƒè¡¡çš„ï¼Œå¦‚æœæ— æ³•åœ¨é¡¹ç›®äº¤ä»˜èŠ‚ç‚¹ä¹‹å†…å®Œæˆï¼Œæˆ–è€…å®Œæˆä¼šå¼•å…¥å¾ˆå¤§çš„äº¤ä»˜é£é™©ï¼Œé‚£åº”è¯¥é€‰æ‹©è§„é¿é¡¹ç›®é£é™©ï¼Œå¹¶ç•™ä¸‹è·Ÿè¸ªé¡¹ï¼Œä»¥å°½å¿«è§£å†³æˆ–ä¼˜åŒ–æ½œåœ¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ€»ç»“&#34;&gt;&lt;a href=&#34;#æ€»ç»“&#34; class=&#34;headerlink&#34; title=&#34;æ€»ç»“&#34;&gt;&lt;/a&gt;æ€»ç»“&lt;/h1&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œè¿˜æ˜¯é¼“åŠ±å¤§å®¶å¤šå‚ä¸code reviewã€‚å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆåšï¼Œå¯ä»¥é˜…è¯»ã€Š&lt;a href=&#34;https://github.com/google/eng-practices&#34;&gt;google/eng-practices: Googleâ€™s Engineering Practices documentation&lt;/a&gt;ã€‹ã€‚å¦å¤–ï¼ŒæŠŠcode reviewå½“æˆä¸€ç§äº¤æµï¼Œä¸€æ¬¡æ€æƒ³ç¢°æ’ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡è¯„å®¡ã€‚ä¸è®ºä½ æ˜¯æäº¤äººï¼Œè¿˜æ˜¯è¯„å®¡äººï¼Œtake it easyï¼&lt;/p&gt;
</content>
        <category term="code review" />
        <category term="committer" />
        <updated>2021-08-30T14:57:57.572Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/08/29/obsidian_posts/%E6%88%91%E7%9C%BC%E4%B8%AD%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</id>
        <title>æˆ‘çœ¼ä¸­çš„å•å…ƒæµ‹è¯•</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/08/29/obsidian_posts/%E6%88%91%E7%9C%BC%E4%B8%AD%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
        <content type="html">&lt;p&gt;åœ¨æœ€è¿‘çš„ä¸€äº›é’ˆå¯¹æ¯•ä¸šç”Ÿçš„é¢è¯•ä¸­ï¼Œæˆ‘éƒ½ä¼šé—®ä¸€ä¸‹ä»–ä»¬å¯¹å•å…ƒæµ‹è¯•çš„ç†è§£ã€‚å¾—åˆ°çš„ç­”æ¡ˆæ— ä¸€ä¾‹å¤–éƒ½æ˜¯ä¸çŸ¥é“ï¼Œä¸æ¸…æ¥šï¼Œæˆ–æ˜¯æŒ‰å­—é¢æ„æ€çš„è§£é‡Šã€‚å…¶å®ï¼Œè¿™ä¹Ÿéš¾æ€ªã€‚è™½ç„¶æˆ‘å¸å¯ä¿¡å˜é©å¯¹å•å…ƒæµ‹è¯•çš„è¦æ±‚è¶Šæ¥è¶Šä¸¥è‹›ï¼Œä½†çœŸæ­£èƒ½å¤Ÿç†è§£å¹¶æ­£ç¡®ä½¿ç”¨å•å…ƒæµ‹è¯•çš„åŒå­¦ä¹Ÿè¿˜æ˜¯æ¯”è¾ƒå°‘çš„ã€‚è‡³å°‘åœ¨æˆ‘å‘¨å›´æ˜¯è¿™æ ·ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³æƒ³è¿™ä¹Ÿæ­£å¸¸ï¼Œè®°å¾—æ›¾ç»åˆšæ¯•ä¸šæ—¶ï¼Œæˆ‘æ ¹æœ¬éƒ½ä¸çŸ¥é“å•å…ƒæµ‹è¯•è¿™ä¸ªåè¯ã€‚ç›´åˆ°åæ¥ï¼Œä»¥å‰ä»»èŒçš„å…¬å¸ä¸“é—¨å¤–è˜äº†ä¸“ä¸šçš„æœºæ„ï¼Œåšäº†ç›¸å…³çš„åŸ¹è®­ä¹‹åï¼Œæˆ‘ç®—æ˜¯è®¤è¯†äº†è¿™ä¸ªè¯ã€‚ä½†å½¼æ—¶çš„ç†è§£ï¼Œæœ‰ç‚¹åƒç°åœ¨æˆ‘å¸æ¨è¡Œçš„Fuzzæµ‹è¯•ã€‚ä¹Ÿå°±æ˜¯ï¼Œä»£ç å†™å¥½åï¼Œé€šè¿‡å·¥å…·ç”Ÿæˆå„ç§å„æ ·çš„å‚æ•°ï¼Œè°ƒç”¨å¾…æµ‹ä»£ç ï¼Œä»è€Œä¿è¯ä»£ç è¾“å‡ºè´¨é‡ã€‚ç°åœ¨å¯èƒ½å¾ˆå¤šåŒå­¦è¿˜æ˜¯è¿™æ ·çš„æ€è·¯ã€‚å›è¿‡å¤´æ¥å†å®¡è§†å½“æ—¶çš„è§‚ç‚¹ï¼Œä¸å…è§‰å¾—è¿‡äºç‰‡é¢äº†ã€‚å•å…ƒæµ‹è¯•æœ€é‡è¦çš„ä½œç”¨å…¶å®å¹¶ä¸æ˜¯ä¿è¯ä»£ç è´¨é‡ï¼Œå¯¹ä»£ç è´¨é‡çš„æ”¹è¿›å¯ä»¥è¯´æ˜¯å®ƒçš„ä¸€ä¸ªå‰¯ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥å¯¹äºå•å…ƒæµ‹è¯•æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ï¼Œæ˜¯åœ¨é˜…è¯»äº†ä¸‹é¢ä¸‰æœ¬ä¹¦ä¹‹åï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ã€Šæ•æ·è½¯ä»¶å¼€å‘-åŸåˆ™æ¨¡å¼ä¸å®è·µã€‹ â€” Robert C. Martin&lt;/li&gt;
&lt;li&gt;ã€Šæµ‹è¯•é©±åŠ¨å¼€å‘ã€‹â€” Kent Beck&lt;/li&gt;
&lt;li&gt;ã€Šé‡æ„-æ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹â€” Martin Fowler&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯è¿™ä¸‰æœ¬ä¹¦çš„ä½œè€…éƒ½æ˜¯&lt;a href=&#34;https://agilemanifesto.org/iso/zhchs/manifesto.html&#34;&gt;æ•æ·è½¯ä»¶å¼€å‘å®£è¨€&lt;/a&gt;çš„å‘èµ·è€…ï¼Œä¹Ÿæ˜¯&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E6%9E%81%E9%99%90%E7%BC%96%E7%A8%8B&#34;&gt;æé™ç¼–ç¨‹ï¼ˆExtreme Programmingï¼‰&lt;/a&gt;çš„è·µè¡Œè€…ã€‚ä¹¦ä¹Ÿéƒ½æ˜¯é«˜åˆ†ç»å…¸è‘—ä½œï¼Œéå¸¸æ¨èç»™å¤§å®¶é˜…è¯»ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å•å…ƒæµ‹è¯•æå‡ä»£ç ä¿¡å¿ƒ&#34;&gt;&lt;a href=&#34;#å•å…ƒæµ‹è¯•æå‡ä»£ç ä¿¡å¿ƒ&#34; class=&#34;headerlink&#34; title=&#34;å•å…ƒæµ‹è¯•æå‡ä»£ç ä¿¡å¿ƒ&#34;&gt;&lt;/a&gt;å•å…ƒæµ‹è¯•æå‡ä»£ç ä¿¡å¿ƒ&lt;/h1&gt;&lt;p&gt;ç°åœ¨è°ˆè°ˆæˆ‘å¯¹å•å…ƒæµ‹è¯•çš„è®¤è¯†ã€‚åœ¨åˆšæ¯•ä¸šçš„é‚£ä¸€æ®µæ—¶é—´ï¼Œæˆ‘çš„å¼€å‘æµç¨‹æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…ˆå°è¯•è®¾è®¡ï¼Œæ€è€ƒä»£ç çš„æ‰§è¡Œæµç¨‹ï¼Œç”»ä¸€äº›æ—¶åºå›¾å’Œæµç¨‹å›¾&lt;/li&gt;
&lt;li&gt;å¼€å§‹ç¼–ç¨‹&lt;/li&gt;
&lt;li&gt;å‘ç°é—®é¢˜&lt;br&gt; 1). å¦‚æœæ˜¯è®¾è®¡é—®é¢˜ï¼Œå¯¼è‡´å¼€å‘ä¸ä¸‹å»ï¼Œé‚£ä¹ˆå›åˆ°æ­¥éª¤1&lt;br&gt; 2). å¦‚æœå‘ç°æœ‰æ›´å¥½çš„å®ç°æ–¹æ³•ï¼Œé‚£ä¹ˆæ“¦æ‰å·²æœ‰çš„ä»£ç ï¼Œå›åˆ°æ­¥éª¤2&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰é—®é¢˜éƒ½è§£å†³äº†ï¼Œå¼€å‘ç»“æŸï¼Œå¼€å§‹å†™åŠŸèƒ½æµ‹è¯•ä»£ç ï¼ŒéªŒè¯ç‰¹æ€§ä»£ç ã€‚å¦‚æœå‘ç°é—®é¢˜ï¼Œé‡å¤æ­¥éª¤3&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ ·å®Œæˆæ•´ä¸ªå¼€å‘å¾ªç¯ï¼Œé€šå¸¸è¦è‡³å°‘åŠå¤©æ—¶é—´ã€‚æœ‰æ—¶åŠå¤©ç”šè‡³ä¸€å¤©ï¼Œä¹Ÿæ²¡ç•™ä¸‹å‡ è¡Œç‰¹æ€§ä»£ç ã€‚æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸æ–­åœ°é™·å…¥ç¼–å†™å’Œæ•´ä½“æ¨ç¿»çš„å¾ªç¯ä¸­ã€‚å³ä¾¿æœ€ç»ˆå®Œæˆäº†å‰3æ­¥ï¼Œå‡†å¤‡å¼€å§‹ç¬¬4æ­¥åŠŸèƒ½æµ‹è¯•çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æˆ˜æˆ˜å…¢å…¢çš„ã€‚å¦‚æœåŠŸèƒ½æµ‹è¯•å‘ç°é—®é¢˜ï¼Œåˆä¼šé™·å…¥ä¸åœåœ°è°ƒè¯•ï¼Œä¿®æ”¹ï¼Œæ¨ç¿»è®¾è®¡çš„æ­»å¾ªç¯ã€‚æˆ‘ç›¸ä¿¡å¾ˆå¤šåŒå­¦éƒ½é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œå¹¶å› æ­¤è€Œæ„Ÿåˆ°å›°æƒ‘ã€‚åˆ°åº•è¯¥æ€ä¹ˆæ‘†è„±è¿™æ ·æ•ˆç‡ä½ä¸‹çš„ä¸æ–­é‡å¤ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç°åœ¨å°±è®©æˆ‘ä»¬è¯Šæ–­ä¸€ä¸‹ã€‚é€šå¸¸æˆ‘ä»¬åšå®Œå‰3æ­¥æµç¨‹éƒ½ä¼šèŠ±æ¯”è¾ƒä¹…çš„æ—¶é—´ã€‚æŒ‰ç…§æˆ‘çš„ç»éªŒï¼Œä¸€èˆ¬ä¸€ä¸ªæ–°ç‰¹æ€§çš„å¼€å‘ï¼Œå°‘åˆ™è‹¥å¹²ä¸ªå°æ—¶ï¼Œå¤šåˆ™ä¸€å¤©ï¼Œç”šè‡³æ•°å¤©ã€‚æ•´ä¸ªæµç¨‹æ¥åˆ°ç¬¬4æ­¥ï¼Œæˆ‘ä»¬æ‰ç¬¬ä¸€æ¬¡å¼€å§‹æµ‹è¯•æˆ‘ä»¬çš„ç‰¹æ€§ä»£ç ã€‚ä¹‹å‰é¡¶å¤šå°±æ˜¯ç¼–è¯‘é€šè¿‡ã€‚è¿è¡Œæµ‹è¯•çš„æ—¶å€™æ‰ä¼šå‘ç°å¾ˆå¤šé—®é¢˜ï¼Œè¿›è€Œåæ€æˆ‘ä»¬çš„å®ç°é€»è¾‘æ˜¯å¦ä¸æˆ‘ä»¬å¼€å§‹è®¾è®¡æ—¶æ€è€ƒçš„é€»è¾‘ç›¸ç¬¦åˆã€‚ç¼–å†™ä»£ç ï¼Œå®é™…æ˜¯å°†ç‰©ç†ä¸–ç•Œï¼Œç¿»è¯‘æˆç”¨ä»£ç è¡¨è¿°çš„ï¼Œä¸¥è°¨çš„é€»è¾‘è¯­è¨€ã€‚è€Œé€šå¸¸æˆ‘ä»¬å¹¶ä¸èƒ½ä¸€æ¬¡æ€§åœ°å®Œæˆè¿™æ ·çš„ç¿»è¯‘ã€‚è€Œä¸”å³ä¾¿å®Œæˆäº†ï¼Œä¹Ÿæ— æ³•é¿å…å¼•å…¥bugã€‚æˆ‘ä»¬åªæœ‰é€šè¿‡æµ‹è¯•ä¸æ–­åœ°å®Œæˆè´Ÿåé¦ˆï¼Œæ¥éªŒè¯æˆ‘ä»¬çš„ä»£ç ï¼Œæ‰¾åˆ°é”™è¯¯ï¼Œæœ€ç»ˆæ”¶æ•›æˆæ­£ç¡®çš„ä»£ç é€»è¾‘ï¼Œä»è€Œå®Œæˆç°å®ä¸–ç•Œåˆ°ä»£ç é€»è¾‘çš„ç¿»è¯‘å·¥ä½œã€‚è½¯ä»¶çš„è¿­ä»£å¼€å‘ï¼Œå°±åƒæ§åˆ¶ç³»ç»Ÿä¸€æ ·ï¼Œæµ‹è¯•å°±å¦‚æ§åˆ¶ç³»ç»Ÿä¸­çš„è´Ÿåé¦ˆï¼Œå¦‚æœæ²¡æœ‰è´Ÿåé¦ˆçš„ï¼Œæ§åˆ¶ç³»ç»Ÿæ˜¯æ— æ³•è¾¾åˆ°ç¨³å®šæ”¶æ•›çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬å‰é¢çš„æ­¥éª¤è¿‡äºä¾èµ–åŠŸèƒ½æµ‹è¯•ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬ç­‰å¾ˆä¹…ï¼Œä¹Ÿå°±æ˜¯åŠŸèƒ½ä»£ç ç¼–å†™å®Œä»¥åï¼Œæ‰å¯ä»¥è¿›è¡Œç¬¬ä¸€æ¬¡æµ‹è¯•ã€‚ç”±äºåŠŸèƒ½æµ‹è¯•ä¸ç‰¹æ€§é€»è¾‘ç›¸å…³ï¼Œå…¶è¿è¡ŒèŠ±è´¹çš„æ—¶é—´å¾€å¾€å¾ˆä¹…ã€‚ç”¨ä¾‹è¦è¦†ç›–ç«¯åˆ°ç«¯åŠŸèƒ½ï¼Œæµ‹è¯•é€»è¾‘ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå†™èµ·æ¥ä¹Ÿæ¯”è¾ƒè€—æ—¶ã€‚è¿™å‡ ç‚¹ä»æœ¬è´¨ä¸Šå°±ä¼šé™åˆ¶åŠŸèƒ½æµ‹è¯•çš„è¿è¡Œæ¬¡æ•°ã€‚åŠŸèƒ½æµ‹è¯•è™½ç„¶èƒ½å‘ç°ï¼Œä¸”æ“…é•¿å‘ç°ä»£ç é€»è¾‘é—®é¢˜ï¼Œä½†å¼€å‘å’Œæ‰§è¡Œæˆæœ¬é«˜ï¼Œå¯¼è‡´è¿è¡Œçš„æ¬¡æ•°ä¸ä¼šå¤ªå¤šã€‚æµ‹è¯•è¿è¡Œæ¬¡æ•°å°‘ï¼Œå¯¼è‡´æˆ‘ä»¬ä¸çŸ¥é“æˆ‘ä»¬è‡ªå·±å†™å‡ºæ¥çš„ç‰¹æ€§é€»è¾‘æ˜¯å¦çœŸå®åœ°åæ˜ äº†æˆ‘ä»¬çš„è®¾è®¡ã€‚é‚£ä¹ˆè¿™å°±ä¼šå½±å“æˆ‘ä»¬å¯¹ä»£ç çš„ä¿¡å¿ƒã€‚æ‰€ä»¥ï¼Œåœ¨è¿›è¡Œç¬¬4æ­¥åŠŸèƒ½æµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬æ€»æ˜¯æˆ˜æˆ˜å…¢å…¢çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç­‰ä¸åŠåˆ°æ‰€æœ‰ç‰¹æ€§ä»£ç å¼€å‘å®Œæˆå†è¿›è¡Œæµ‹è¯•ã€‚å› ä¸ºé€šè¿‡æ˜‚è´µçš„åŠŸèƒ½æµ‹è¯•æ¥è¯•é”™å‘ç°é—®é¢˜ï¼Œè¿”å·¥æ‰€èŠ±è´¹çš„æˆæœ¬å¤ªé«˜äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§é’ˆå¯¹å°é€»è¾‘çš„ï¼ˆè¿™æ ·å•caseå¤æ‚åº¦æ›´ä½ï¼Œæœ‰åˆ©äºæµ‹è¯•caseä¹‹é—´çš„è§£è€¦ï¼‰ï¼Œè¦†ç›–ç‡é«˜ï¼ˆé€šè¿‡mockä¾èµ–å®ç°ï¼‰ï¼Œè¿è¡Œå¿«é€Ÿçš„ï¼ˆæ–¹ä¾¿ä¸æ–­è¿è¡Œï¼‰æµ‹è¯•ã€‚äºæ˜¯ï¼Œå•å…ƒæµ‹è¯•å°±åº”è¿è€Œç”Ÿäº†ã€‚ä¸ºäº†ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šæŠŠå¤§çš„ç‰¹æ€§åˆ†è§£æˆå°çš„æ¨¡å—ï¼›å…¶æ¬¡ï¼Œé€šè¿‡ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬ä¼šä¸æ–­åœ°æ€è€ƒä»£ç å®ç°é€»è¾‘ï¼Œè¿™æ ·å°±å¯ä»¥å®æ—¶åœ°å‘ç°é€»è¾‘é—®é¢˜ï¼ŒåŠæ—¶è¿”å·¥ä¿®æ­£ã€‚è€Œé€šå¸¸å•å…ƒæµ‹è¯•é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬æœ‰æ¡ä»¶å¯ä»¥å®Œæˆä¸‹é¢çš„red-&amp;gt;green-&amp;gt;refactorçš„å¼€å‘èŠ‚å¥ã€‚&lt;br&gt;&lt;img src=&#34;/2021/08/29/obsidian_posts/%E6%88%91%E7%9C%BC%E4%B8%AD%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/Pasted%20image%2020210829201431.png&#34; alt&gt;&lt;br&gt;åœ¨æ¯ä¸€æ¬¡red-&amp;gt;greençš„å˜åŒ–ä¸­ï¼Œæˆ‘ä»¬éƒ½ä¼šè¿è¡Œä¸€æ¬¡å•å…ƒæµ‹è¯•ã€‚è€Œæ¯æ¬¡å®Œæˆrefactoråï¼Œæˆ‘ä»¬åˆä¼šä½¿ç”¨å•å…ƒæµ‹è¯•ï¼ŒéªŒè¯æˆ‘ä»¬é‡æ„åçš„ä»£ç æ˜¯å¦ç ´åäº†åŸæœ‰çš„é€»è¾‘ã€‚æ‰€ä»¥å¼•å…¥å•å…ƒæµ‹è¯•ï¼Œå¹¶ä¸æ˜¯ä¸ºäº†ç›´æ¥æå‡æˆ‘ä»¬çš„ä»£ç è´¨é‡ï¼Œè€Œæ˜¯ä¸ºäº†èƒ½è®©æˆ‘ä»¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ‡åˆ†åŸå…ˆæ•´å—çš„ä»£ç é€»è¾‘ï¼Œå˜æˆä¸€ä¸ªä¸ªå°çš„ç§¯æœ¨é€»è¾‘&lt;/li&gt;
&lt;li&gt;å……åˆ†æµ‹è¯•æˆ‘ä»¬çš„ç‰¹æ€§ä»£ç é€»è¾‘ï¼Œå¹¶ä¸”è¾¾åˆ°è¶³å¤Ÿçš„è¦†ç›–ç‡ï¼ˆè¶Šé«˜è¶Šå¥½ï¼‰&lt;/li&gt;
&lt;li&gt;åœ¨é‡æ„æ—¶ï¼Œæœ‰è¶³å¤Ÿè¦†ç›–ç‡çš„æµ‹è¯•å¸®åŠ©æˆ‘ä»¬éªŒè¯é€»è¾‘æ˜¯å¦é­åˆ°ç ´å&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å½“æˆ‘ä»¬ä¸¥æ ¼æŒ‰ç…§red-&amp;gt;green-&amp;gt;refactorçš„èŠ‚å¥ä¸æ–­æ¨è¿›æ—¶ï¼Œæˆ‘ä»¬çš„ä»£ç æ¶æ„å°±ä¼šå˜å¥½ï¼Œä»£ç ç»è¿‡æ›´å¤šçš„æµ‹è¯•ï¼Œä»£ç è´¨é‡ä¹Ÿä¼šå¾—åˆ°ä¸€å®šçš„ä¿è¯ã€‚è€Œè¿™åªæ˜¯å•å…ƒæµ‹è¯•å¸¦æ¥çš„é™„åŠ å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬æœ‰äº†å•å…ƒæµ‹è¯•è¿™ä¸ªæ­¦å™¨åï¼Œçœ‹çœ‹æˆ‘ä»¬çš„å¼€å‘æµç¨‹ä¼šå˜æˆæ€æ ·ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®¾è®¡ä»£ç é€»è¾‘ï¼Œä¸å‰é¢ä¸åŒä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬å…ˆä¸æ·±å…¥åˆ°å…·ä½“çš„ä»£ç é€»è¾‘ï¼Œè€Œæ˜¯å°†åŠŸèƒ½æ¨¡å—åŒ–ï¼Œå°†æ¨¡å—æ¥å£åŒ–&lt;/li&gt;
&lt;li&gt;æŒ‘ä¸€ä¸ªæ¥å£å¼€å§‹ç¼–ç¨‹&lt;/li&gt;
&lt;li&gt;æŒ‰ç…§å¼€å‘é¡ºåºï¼Œå†™å¥½å¾…æµ‹é€»è¾‘çš„å•å…ƒæµ‹è¯•&lt;/li&gt;
&lt;li&gt;å¼€å‘ç‰¹æ€§ä»£ç é€»è¾‘ï¼Œè®©å•å…ƒæµ‹è¯•é€šè¿‡&lt;/li&gt;
&lt;li&gt;å¦‚æœå‘ç°è®¾è®¡é€»è¾‘å¯¼è‡´æ— æ³•å¼€å‘ï¼Œå›åˆ°æ­¥éª¤1&lt;/li&gt;
&lt;li&gt;é‡å¤3-4æ­¥ï¼Œç›´åˆ°æ¥å£å®Œæˆ&lt;/li&gt;
&lt;li&gt;é‡å¤1-6ï¼Œç›´åˆ°ç‰¹æ€§ä»£ç å®Œæˆ&lt;/li&gt;
&lt;li&gt;ç¼–å†™åŠŸèƒ½æµ‹è¯•ï¼Œè°ƒè¯•ï¼Œå¦‚æœå‘ç°é—®é¢˜ï¼Œæ£€éªŒä»£ç é€»è¾‘ï¼Œå¦‚æœæœ‰è®¾è®¡é—®é¢˜ï¼Œä»ç„¶è¦å›åˆ°æ­¥éª¤1&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œä»ç¬¬3æ­¥å¼€å§‹ï¼Œæˆ‘ä»¬å°±ä¸æ–­åœ°æµ‹è¯•ï¼Œä¸æ–­éªŒè¯æˆ‘ä»¬çš„é€»è¾‘ã€‚è™½ç„¶åˆ°è¾¾æœ€åä¸€æ­¥åŠŸèƒ½æµ‹è¯•éªŒè¯æ—¶ï¼Œå¦‚æœå‘ç°è®¾è®¡é—®é¢˜ï¼Œä»ç„¶è¦è¿”å·¥å›åˆ°æ­¥éª¤1ï¼Œä½†å› ä¸ºæˆ‘ä»¬æœŸé—´ä¸æ–­åœ°æµ‹è¯•ï¼Œä¸æ–­åœ°æ€è€ƒï¼Œå¹¶éªŒè¯é€»è¾‘ï¼Œæˆ‘ä»¬å¯èƒ½å¾ˆæ—©å°±å‘ç°äº†è®¾è®¡é—®é¢˜ï¼Œè€Œä¸ä¼šç­‰åˆ°æœ€åä¸€æ­¥æ‰éœ€è¦è¿”å·¥ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œå½“æˆ‘ä»¬åœ¨å‡†å¤‡è¿›è¡ŒåŠŸèƒ½æµ‹è¯•éªŒè¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯¹è‡ªå·±å¼€å‘çš„ä»£ç æ›´æœ‰ä¿¡å¿ƒã€‚&lt;/p&gt;
&lt;h1 id=&#34;å•å…ƒæµ‹è¯•å¸¦æ¥çš„é¢å¤–å¥½å¤„&#34;&gt;&lt;a href=&#34;#å•å…ƒæµ‹è¯•å¸¦æ¥çš„é¢å¤–å¥½å¤„&#34; class=&#34;headerlink&#34; title=&#34;å•å…ƒæµ‹è¯•å¸¦æ¥çš„é¢å¤–å¥½å¤„&#34;&gt;&lt;/a&gt;å•å…ƒæµ‹è¯•å¸¦æ¥çš„é¢å¤–å¥½å¤„&lt;/h1&gt;&lt;h2 id=&#34;å•å…ƒæµ‹è¯•å¸®åŠ©ä½ è¿›å…¥å¿ƒæµ&#34;&gt;&lt;a href=&#34;#å•å…ƒæµ‹è¯•å¸®åŠ©ä½ è¿›å…¥å¿ƒæµ&#34; class=&#34;headerlink&#34; title=&#34;å•å…ƒæµ‹è¯•å¸®åŠ©ä½ è¿›å…¥å¿ƒæµ&#34;&gt;&lt;/a&gt;å•å…ƒæµ‹è¯•å¸®åŠ©ä½ è¿›å…¥å¿ƒæµ&lt;/h2&gt;&lt;p&gt;å•å…ƒæµ‹è¯•æå‡äº†æˆ‘ä»¬å¯¹å¼€å‘ä»£ç çš„ä¿¡å¿ƒï¼Œè®©æˆ‘ä»¬æœ‰æœºä¼šå®ç°red-&amp;gt;green-&amp;gt;refactorçš„å¼€å‘èŠ‚å¥ï¼Œä»è€Œä¼˜åŒ–ä»£ç æ¶æ„ã€‚å•å…ƒæµ‹è¯•è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´focusï¼Œä»è€Œæ›´å®¹æ˜“è¿›å…¥å¿ƒæµçŠ¶æ€ã€‚è¿›å…¥å¿ƒæµçŠ¶æ€ï¼Œæ„å‘³ç€æ³¨æ„åŠ›æä¸ºé›†ä¸­ï¼Œå·¥ä½œæ•ˆç‡å¾ˆé«˜ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¿ƒæµ&lt;/strong&gt;ï¼ˆè‹±è¯­ï¼šFlowï¼‰ï¼Œä¹Ÿæœ‰åˆ«åä»¥åŒ–å¢ƒï¼ˆZoneï¼‰è¡¨ç¤ºï¼Œäº¦æœ‰äººç¿»è¯‘ä¸º&lt;strong&gt;ç¥é©°&lt;/strong&gt;æˆ–&lt;strong&gt;æ²‰æµ¸&lt;/strong&gt;çŠ¶æ€ï¼Œæ˜¯ç”±åŒˆç‰™åˆ©è£”ç¾ç±å¿ƒç†å­¦å®¶&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%B1%B3%E5%93%88%E9%87%8C%C2%B7%E5%A5%91%E5%85%8B%E6%A3%AE&#34; title=&#34;ç±³å“ˆé‡ŒÂ·å¥‘å…‹æ£®&#34;&gt;ç±³å“ˆé‡ŒÂ·å¥‘å…‹æ£®&lt;/a&gt;é¦–åº¦æå‡ºï¼Œå®šä¹‰æ˜¯ä¸€ç§å°†ä¸ªäººç²¾ç¥åŠ›å®Œå…¨æŠ•æ³¨åœ¨æŸç§æ´»åŠ¨ä¸Šçš„æ„Ÿè§‰ï¼›å¿ƒæµäº§ç”ŸåŒæ—¶ä¼šæœ‰é«˜åº¦çš„å…´å¥‹æ„ŸåŠå……å®æ„Ÿç­‰æ­£å‘æƒ…ç»ªã€‚&lt;br&gt;Martin Fowlerçš„&lt;a href=&#34;https://www.amazon.com/Clean-Coder-Conduct-Professional-Programmers/dp/0137081073&#34;&gt;The Clean Coder: A Code of Conduct for Professional Programmers: Martin, Robert: 4708364241379: Amazon.com: Books&lt;/a&gt;ä¸€ä¹¦å‘Šè¯‰æˆ‘ä»¬ï¼Œå¿ƒæµå¯¹ç¨‹åºå‘˜æ¥è¯´å¹¶ä¸ä¸€å®šæ˜¯å¥½äº‹ï¼Œä½†å¤§å¤šæ•°æƒ…å†µå®ƒè¿˜æ˜¯å¥½çš„ã€‚å¿ƒæµå¹¶ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã€Šæµ‹è¯•é©±åŠ¨å¼€å‘ã€‹ä¸€ä¹¦ç»™å‡ºäº†ä¸€ç§æ’°å†™å•å…ƒæµ‹è¯•çš„æœ€ä½³å®è·µã€‚å³&lt;strong&gt;æ¯æ¬¡å…³æ³¨ä¸€ä¸ªè¶³å¤Ÿå°çš„é€»è¾‘ï¼Œå¹¶åœ¨å®Œæˆä¹‹åå†å®Œå–„å®ƒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºäººçš„æ³¨æ„åŠ›æ˜¯æœ‰é™çš„ï¼Œä¸èƒ½ä¸€æ¬¡æ€§å…³æ³¨å¤ªå¤šçš„ä¸œè¥¿ã€‚åœ¨å¼€å‘æŸä¸€ä¸ªé€»è¾‘ä¸­é—´ï¼Œå¦‚æœè¢«å…¶ä»–äº‹æƒ…åˆ†æ•£äº†æ³¨æ„åŠ›ï¼Œå¾€å¾€ä¼šé€ æˆé€»è¾‘å‘æ•£ã€‚ä¾‹å¦‚ï¼šä½ åœ¨å®ç°ä¸€ä¸ªä¸ŠæŠ¥æ•…éšœé€»è¾‘ï¼Œä½†ä½ å¸Œæœ›è®°å½•æ¯ä¸ªæ•…éšœçš„æ—¶é—´æˆ³ï¼Œä½ åˆä¸è®°å¾—æ—¶é—´æˆ³å‡½æ•°çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ã€‚è¿™æ—¶å€™å¦‚æœä½ é€‰æ‹©å»googleè¿™ä¸ªå‡½æ•°ï¼Œå¹¶ææ¸…æ¥šå®ƒçš„ä½¿ç”¨æ–¹æ³•ï¼Œæœ‰å¯èƒ½ä½ éœ€è¦èŠ±å¾ˆä¹…æ—¶é—´æ‰ä¼šå›åˆ°ä½ åŸå…ˆçš„ä¸»çº¿é€»è¾‘ç»§ç»­å¼€å‘ã€‚è¿™å’Œä½ çš„å¼€å‘è¢«æ‰“æ–­æ²¡æœ‰åŒºåˆ«ï¼Œä½ å¤±å»äº†è¿›å…¥å¿ƒæµçš„æœºä¼šï¼Œä½ éœ€è¦èŠ±å¾ˆé•¿çš„æ—¶é—´å†é‡æ–°å›é¡¾åŸå…ˆçš„å¼€å‘ç°åœºï¼Œå¯¼è‡´ä½ çš„æ•ˆç‡ä¸å¯èƒ½å¾ˆé«˜ã€‚ä½†è¿™è¿˜ä¸æ˜¯æœ€ç³Ÿç³•çš„ã€‚æœ€ç³Ÿç³•çš„æ˜¯ï¼Œä½ åœ¨googleçš„è¿‡ç¨‹ä¸­ï¼Œåˆå‘ç°äº†å…¶ä»–é—®é¢˜ï¼Œä½ åˆå»çœ‹é‚£ä¸ªé—®é¢˜ï¼Œæˆ–è€…ä¸å·§åœ¨è¿™è¿‡ç¨‹ä¸­è¢«è®¿å®¢æ‰“æ–­ï¼ˆå®é™…å·¥ä½œä¸­ç»å¸¸å‘ç”Ÿï¼Œè¿™ä¹Ÿæ˜¯é€šå¸¸æˆ‘è®¤ä¸ºåœ¨å®¶è¿œç¨‹åŠå…¬çš„æ•ˆç‡å¯èƒ½æ›´é«˜ï¼‰ã€‚ä½ ç¦»å¼€åŸå…ˆçš„å¼€å‘ä¸»çº¿çš„æ—¶é—´è¶Šé•¿ï¼Œåˆ™éœ€è¦é‡å»ºç°åœºçš„æ—¶é—´å°±è¶Šé•¿ã€‚è¿™å’Œæ“ä½œç³»ç»Ÿçš„ä¸­æ–­å¾ˆåƒï¼Œä½ ç¦»å¼€çš„æ—¶é—´è¶Šé•¿ï¼Œå¾ˆå¤šcacheéƒ½è¢«flushæ‰äº†ï¼Œé‚£ä¹ˆä½ å†æ¬¡å›åˆ°åŸå…ˆçš„å·¥ä½œçŠ¶æ€å°±è¦èŠ±è´¹æ›´å¤šçš„overloadingã€‚&lt;/p&gt;
&lt;p&gt;Kent Beckç»™å‡ºçš„å»ºè®®æ˜¯ï¼Œä»¥æœ€ç®€å•çš„æ–¹æ³•è§£å†³å½“å‰çš„é—®é¢˜ï¼Œè®©ä½ æ¯ä¸€ä¸ªå¼€å‘é€»è¾‘éƒ½åŸå­åŒ–åœ°å®Œæˆã€‚ä¾‹å¦‚ï¼šåˆšæ‰æˆ‘ä»¬çš„ä¸ŠæŠ¥æ•…éšœåŠŸèƒ½éœ€è¦ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œæˆ‘ä»¬ç°åœ¨ä¸çŸ¥é“æ€ä¹ˆå†™é‚£ä¸ªæ—¶é—´æˆ³æ–¹æ³•ï¼Œäºæ˜¯å°±å…ˆhard codeä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„TODO listä¸Šè®°å½•ä¸€ä¸ªäº‹é¡¹ã€‚ç­‰æˆ‘ä»¬å®Œæˆäº†å½“å‰çš„å¼€å‘é€»è¾‘ï¼Œå†å»é™¤TODO listï¼Œä¾æ¬¡è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚ç­‰é—®é¢˜éƒ½è§£å†³å®Œäº†ï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥å¼€å‘ã€‚æ¯ä»¶äº‹åŠ¡çš„å¤„ç†ä¿æŒåŸå­åŒ–ï¼Œè¦ä¹ˆæ²¡åšï¼Œè¦ä¹ˆå°±åšå®Œã€‚è¿™æ ·å¤šå‡ºæ¥è®°å½•TODO listçš„æ—¶é—´ï¼Œä½†èŠ‚çœäº†è¢«æ‰“æ–­å¹¶ä¸”æ¢å¤ç°åœºçš„æ—¶é—´ï¼Œå¹¶ä¸”ä½ æœ‰æ›´å¤šçš„æœºä¼šè¿›å…¥â€œå¿ƒæµâ€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•å…ƒæµ‹è¯•å¸®åŠ©ä½ å…‹æœå†…å¿ƒçš„ææƒ§&#34;&gt;&lt;a href=&#34;#å•å…ƒæµ‹è¯•å¸®åŠ©ä½ å…‹æœå†…å¿ƒçš„ææƒ§&#34; class=&#34;headerlink&#34; title=&#34;å•å…ƒæµ‹è¯•å¸®åŠ©ä½ å…‹æœå†…å¿ƒçš„ææƒ§&#34;&gt;&lt;/a&gt;å•å…ƒæµ‹è¯•å¸®åŠ©ä½ å…‹æœå†…å¿ƒçš„ææƒ§&lt;/h2&gt;&lt;p&gt;é€šå¸¸ä¸€ä¸ªæœ‰è´£ä»»å¿ƒçš„ç¨‹åºå‘˜ï¼Œéƒ½ä¼šæœ‰â€œå®Œç¾ç¨‹åºâ€æƒ…èŠ‚ã€‚ä½ å¸Œæœ›ä½ å†™å‡ºæ¥çš„ä»£ç æ˜¯å®Œç¾æŠ½è±¡çš„ï¼Œé€šç”¨æ€§å¥½ï¼Œæ‰©å±•æ€§å¼ºï¼Œæ€§èƒ½ä½³ï¼Œç­‰ç­‰ã€‚è¿™æœ¬æ²¡æœ‰é”™ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç¨‹åºå‘˜çš„åŸºæœ¬ç´ å…»ã€‚ä½†å¦‚æœä½ æ€»æ˜¯æƒ³æ¯•å…¶åŠŸäºä¸€å½¹ï¼Œå´å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚è¿™æ›¾ç»ä¹Ÿæ·±æ·±åœ°å›°æ‰°è¿‡æˆ‘ã€‚åœ¨ä¸€ä¸ªæ”¯çº¿é€»è¾‘ä¸Šè¸Ÿè¹°ä¸å‰ï¼Œä¸¥é‡å½±å“å¼€å‘æ•ˆç‡ã€‚åœ¨ç°å®çš„å¼€å‘ä¸­ï¼Œæˆ‘ä¹Ÿè§‚å¯Ÿåˆ°å¾ˆå¤šåŒäº‹æœ‰å’Œæˆ‘ä¸€æ ·çš„å›°æ‰°ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œ Kent Beckç»™å‡ºçš„å»ºè®®æ˜¯ï¼Œå…ˆå®ç°ä½ çš„é¢„å®šè®¡åˆ’ï¼ˆé™¤éä½ å¯ä»¥ç«‹å³è¯æ˜å®ƒå®Œå…¨æ˜¯é”™è¯¯çš„ï¼Œæ— æ³•å®ç°ï¼‰ã€‚ä¹‹åï¼Œå†é€šè¿‡ä¸æ–­çš„é‡æ„ï¼Œåœ¨å¿…è¦çš„æ—¶å€™ä¼˜åŒ–å®ƒï¼Œé¿å…è¿‡è®¾è®¡ã€‚ç›´åˆ°å®ƒèƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ€»æ˜¯æå€¡ç¼–å†™å¥½ä»£ç ï¼Œä¼˜ç¾çš„ä»£ç ï¼Œä½†äº‹å®ä¸Šï¼Œå¹¶æ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„å¥½ä»£ç æ ‡å‡†ã€‚å¥½çš„ä»£ç åº”è¯¥æ˜¯åŠ¨æ€çš„ï¼Œèƒ½å¤Ÿæ»¡è¶³å½“ä¸‹å¯è§çš„éœ€æ±‚ï¼ˆåŠŸèƒ½æ€§å’Œæ‰©å±•æ€§ï¼‰çš„ä»£ç å°±æ˜¯å¥½ä»£ç ã€‚å½“æœ‰æ–°éœ€æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚å¼€å‘æ–°ç‰¹æ€§ï¼Œæˆ–éœ€è¦åšæ€§èƒ½ä¼˜åŒ–ï¼ŒåŠæ—¶åœ°é‡æ„å°±å¯ä»¥äº†ã€‚é‡æ„åº”å½“æ˜¯å®æ—¶è¿›è¡Œçš„ï¼Œæ˜¯è‡ªä¸‹è€Œä¸Šçš„ã€‚é€šè¿‡ä¸€äº›æŠ€å·§å’Œå·¥å…·ï¼Œæˆ‘ä»¬åœ¨é‡æ„ä¸­å°±èƒ½è®©ä»£ç è¿›åŒ–åˆ°ä¸€ä¸ªæ›´é€‚åˆå½“å‰éœ€æ±‚çš„çŠ¶æ€ï¼Œä»è€Œæ›´æ˜“äºå¼€å‘æ–°ç‰¹æ€§ï¼Œæˆ–è€…ç»§ç»­é‡æ„ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å†å›å¤´çœ‹ï¼Œä¸ºä»€ä¹ˆç¨‹åºå‘˜ä¼šæœ‰å®Œç¾ä»£ç æƒ…ç»“ï¼Ÿæ²¡é”™ï¼Œå› ä¸ºä»–ä»¬è‡ªå¾‹ï¼Œæœ‰è´£ä»»å¿ƒï¼Œä¸”è§è´¤æ€é½ã€‚ä½†æ¢ä¸ªè§’åº¦è¯´ï¼Œä¹Ÿå¯èƒ½å› ä¸ºä»–ä»¬å†…å¿ƒæœ‰ä¸€ç§ç„¦è™‘ï¼Œæˆ–è€…ææƒ§ã€‚è¿™æ˜¯ç¨‹åºå‘˜å¯¹è‡ªå·±ä»£ç æ²¡æœ‰ä¿¡å¿ƒçš„è¡¨ç°ã€‚æ‹…å¿ƒå› ä¸ºä¸€æ—¶è€ƒè™‘ä¸å‘¨å…¨ï¼Œåœ¨æœªæ¥ä¼šä»˜å‡ºæ›´å¤§çš„è¿”å·¥ã€‚æ¯æ—¶æ¯åˆ»éœ€è¦åœ¨æ¬ è®¾è®¡å’Œè¿‡è®¾è®¡ä¹‹é—´åšæƒè¡¡ã€‚ä½†è¯·è®°ä½ï¼Œä»£ç æ˜¯åŠ¨æ€çš„ï¼Œåªè¦ä¿è¯ä»£ç èƒ½å¤Ÿå®æ—¶åœ°è¢«é‡æ„ï¼Œå°½é‡å‡å°‘ä»£ç çš„åå‘³é“ï¼Œä»£ç æ¶æ„é€šå¸¸å¤§æ¦‚ç‡æ˜¯åˆç†çš„ã€‚æ¶æ„åˆç†çš„ä»£ç ï¼Œä¸è®ºåšæ¶æ„è°ƒæ•´æˆ–æ€§èƒ½ä¼˜åŒ–ï¼Œéƒ½æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ã€‚æ²¡å¿…è¦è¿½æ±‚æ‰€è°“çš„â€œå®Œç¾ä»£ç â€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¹³æ—¶ç¼–ç¨‹æ—¶ï¼Œåº”å½“å°½åŠ›å…‹æœè‡ªå·±å†…å¿ƒå¯¹æœªçŸ¥çš„ææƒ§ï¼Œç”¨å•å…ƒæµ‹è¯•å’Œé‡æ„æ¥æ­¦è£…è‡ªå·±ã€‚è¿™æ—¶ï¼Œæˆ‘å¸¸å¸¸æƒ³åˆ°ä¸€ä¸ªè¯â€œZen Codingâ€ã€‚åšä¸€ä¸ªä½›ç³»çš„ç¨‹åºå‘˜ï¼Œè¿ç”¨ç¦…ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å•å…ƒæµ‹è¯•çš„è¯¯åŒº&#34;&gt;&lt;a href=&#34;#å•å…ƒæµ‹è¯•çš„è¯¯åŒº&#34; class=&#34;headerlink&#34; title=&#34;å•å…ƒæµ‹è¯•çš„è¯¯åŒº&#34;&gt;&lt;/a&gt;å•å…ƒæµ‹è¯•çš„è¯¯åŒº&lt;/h1&gt;&lt;p&gt;å…¬å¸åœ¨æ–½è¡Œå¯ä¿¡å˜é©æ—¶ï¼Œè¦æ±‚å•å…ƒæµ‹è¯•èƒ½å¤Ÿè¾¾åˆ°ä¸€å®šçš„è¦†ç›–ç‡æ•°å€¼ã€‚è¿™æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œåº”è¯¥è¢«æå€¡ã€‚å› ä¸ºåªæœ‰å•å…ƒæµ‹è¯•çš„è¦†ç›–ç‡è¶³å¤Ÿé«˜ï¼Œæ‰èƒ½åœ¨é‡æ„æ—¶æ•è·æ¯ä¸€ä¸ªè½»å¾®çš„é€»è¾‘ç ´æŸï¼Œé¿å…å› ä¸ºå³æ—¶é‡æ„å¼•å…¥çš„é—®é¢˜ã€‚è€Œå•å…ƒæµ‹è¯•å› ä¸ºé€šå¸¸é‡‡ç”¨mockä¾èµ–å®ç°ï¼Œç†è®ºä¸Šåªè¦mockå®ç°çš„è¶³å¤Ÿä¼˜ç§€ï¼Œæ˜¯å¯ä»¥å®ç°100%çš„è¦†ç›–ç‡çš„ã€‚ä½†çœŸæ­£åœ¨é¡¹ç›®è¿è¡Œçš„æ—¶å€™ï¼Œå› ä¸ºè¦†ç›–ç‡æ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“æ„ŸçŸ¥çš„æŒ‡æ ‡ï¼Œæ‰€ä»¥å•å…ƒæµ‹è¯•æ…¢æ…¢åœ°æ²¦ä¸ºå®ç°è¦†ç›–ç‡çš„é™„å±å“ã€‚ä¹Ÿå°±æ˜¯åªæ˜¯ä¸ºäº†å®ç°è¶…é«˜è¦†ç›–ç‡è€Œå†™å•å…ƒæµ‹è¯•ã€‚è¿™è¡¨ç°åœ¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªæµ‹è¯•caseä¸æ˜¯ä¸ºäº†è¦†ç›–ä¸€ä¸ªå°é€»è¾‘è€Œäº§ç”Ÿï¼Œä¸ºäº†è¿…é€Ÿæ»¡è¶³è¦†ç›–ç‡è¦æ±‚ï¼Œå¾ˆå¤šä¸ªæµ‹è¯•æ–­è¨€æ”¾åœ¨ä¸€èµ·ï¼Œäº§ç”Ÿå·¨å¤§çš„composite case&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å®Œæˆè¶…é«˜è¦†ç›–ç‡ï¼Œéšæ„è¿ç”¨æ ¸æ­¦å™¨æ¥mockä¾èµ–å‡½æ•°ï¼Œé€ æˆmockäº†è¿‡å¤šçš„å†…éƒ¨å®ç°ï¼Œæµ‹è¯•ä»£ç å˜å¾—å¼‚å¸¸è„†å¼±ï¼Œä¸€æ—¦ä¾èµ–å®ç°éœ€è¦å˜æ›´ï¼Œæ•´æ£µä¾èµ–æ ‘ä¸Šçš„æµ‹è¯•caseéƒ½è¦è·Ÿç€æ”¹&lt;/li&gt;
&lt;li&gt;æµ‹è¯•ä»£ç ç¼ºä¹é‡æ„ï¼Œéšå¤„å¯è§é‡å¤ä»£ç ï¼Œä¸€æ—¦å˜æ›´è¦æ¶‰åŠå¤šå¤„æ›´æ”¹&lt;/li&gt;
&lt;li&gt;æµ‹è¯•caseä¹‹é—´è€¦åˆä¸¥é‡ï¼Œä¸€ä¸ªç‰¹æ€§ä»£ç çš„ä¿®æ”¹ç†æƒ³æƒ…å†µä¸‹åªä¼šå¯¼è‡´ä¸€ä¸ªç›¸å…³caseå¤±è´¥ï¼Œä½†è€¦åˆä¸¥é‡çš„caseï¼Œå¾€å¾€ä¼šå¤±è´¥ä¸€å¤§ç‰‡ã€‚ä¸€ä¸ªç‰¹æ€§ä»£ç æ”¹åŠ¨å¯¼è‡´ä¸€ä¸ªå®Œå…¨ä¸ç›¸å¹²çš„caseå¤±è´¥ã€‚è¿™æ˜¯å¾ˆä»¤äººå´©æºƒçš„äº‹æƒ…ã€‚ä»¤äººå´©æºƒçš„äº‹æƒ…å¾€å¾€å°±ä¼šæˆä¸ºä¸€ä¸ªåŒ…è¢±ï¼Œéšæ—¶ç­‰å¾…è¢«ä¸¢å¼ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨æˆ‘æ¥è§¦åˆ°çš„é¡¹ç›®ä¸­ï¼Œè¿™æ ·çš„æƒ…å†µéå¸¸æ™®éã€‚è™½ç„¶æˆ‘ä»¬æ¯æ—¥çš„CIæŠ¥å‘Šä¸­ï¼Œå•å…ƒæµ‹è¯•è¦†ç›–ç‡æ•°å€¼æ˜¯å¾ˆå¥½çœ‹çš„ã€‚ä½†å®é™…å•å…ƒæµ‹è¯•åº”è¯¥äº§ç”Ÿçš„ä½œç”¨å¾ˆå°ï¼Œç”šè‡³æ²¦ä¸ºäº†å¼€å‘çš„è´Ÿæ‹…ã€‚é€šå¸¸å¬åˆ°ä¸€ä¸ªè¯è¯­å«â€œè¡¥å•å…ƒæµ‹è¯•â€ã€‚å¯è§å•å…ƒæµ‹è¯•å¹¶æ²¡æœ‰è¢«æ­£ç¡®çš„ä½¿ç”¨ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œç™»å±±è¿åŠ¨å‘˜éƒ½æœ‰ä¸€ä¸ªå¾ˆå¤§çš„èƒŒåŒ…ï¼ŒèƒŒåŒ…é‡Œé¢æ”¾æ»¡äº†å„ç§æ•‘å‘½ç”¨çš„å·¥å…·ã€‚ä½ è§åˆ«äººçš„åŒ…æŒºå¤§ï¼Œä½ ä¹Ÿæ•´äº†ä¸ªå¤§èƒŒåŒ…ï¼Œç„¶åèƒŒäº†ä¸€å †ä½ çˆ±åƒçš„é›¶é£Ÿã€‚è¿™äº›é›¶é£Ÿåœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œè®©ä½ æŒºhappyï¼Œåˆ°äº†å…³é”®æ—¶åˆ»ï¼Œåˆ«äººä»èƒŒåŒ…é‡Œæ‹¿å‡ºæ•‘å‘½çš„å·¥å…·ï¼Œä½ çš„èƒŒåŒ…åªä¼šæˆä¸ºç´¯èµ˜ï¼Œä¸å¦‚æ—©æ—©ä¸¢å¼ƒã€‚&lt;/p&gt;
&lt;p&gt;æ­£ç¡®çš„åšæ³•åº”å½“æ˜¯ï¼Œæ¯å†™ä¸€ä¸ªå°é€»è¾‘ï¼ˆæ¥å£å®ç°çº§åˆ«ï¼Œè‹¥å¹²ä¸ªå°é€»è¾‘ç»„æˆä¸€ä¸ªæ¥å£ï¼‰ï¼Œå°±å®Œæˆä¸€ä¸ªå•å…ƒæµ‹è¯•caseä¸ä¹‹å¯¹åº”ï¼Œä¸è®ºä½ æ˜¯å…ˆå†™caseï¼ˆTDDï¼‰ï¼Œè¿˜æ˜¯å…ˆå†™ç‰¹æ€§ä»£ç ï¼ˆéTDDï¼‰ã€‚å½“æ•´ä¸ªç‰¹æ€§ä»£ç å®Œæˆåï¼Œå•å…ƒæµ‹è¯•ä¹Ÿæ˜¯å®Œå¤‡çš„ï¼Œå¹¶ä¸”æäº¤MRä¹‹å‰ï¼Œåº”å½“å³æ—¶å®Œæˆé‡æ„ï¼Œå¹¶ä¿®å¤èƒ½è¯†åˆ«åˆ°çš„åå‘³é“ã€‚å¦‚æœå› ä¸ºäº¤ä»˜æ—¶é—´é—®é¢˜ï¼Œä¸èƒ½å³æ—¶è§£å†³çš„åº”å½“æ·»åŠ FIXMEæ³¨é‡Šï¼Œå¹¶ä¸”åœ¨ä½ çš„TODO listä¸Šæ·»åŠ ä¸€æ¡ï¼Œä»¥è·Ÿè¸ªè¯¥äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ€»ç»“&#34;&gt;&lt;a href=&#34;#æ€»ç»“&#34; class=&#34;headerlink&#34; title=&#34;æ€»ç»“&#34;&gt;&lt;/a&gt;æ€»ç»“&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•æ˜¯å·¥å…·ä¸æ˜¯ç›®çš„ã€‚&lt;/li&gt;
&lt;li&gt;å•å…ƒæµ‹è¯•ç”¨äºå³æ—¶é‡æ„ï¼Œä¼˜åŒ–ä»£ç é€»è¾‘å’Œç»“æ„ï¼ŒåŠŸèƒ½æµ‹è¯•ç”¨äºçœ‹æŠ¤ä»£ç è´¨é‡&lt;/li&gt;
&lt;li&gt;æµæ°´ä¸è…ï¼Œæˆ·æ¢ä¸è ¹ï¼Œå¥½çš„ä»£ç åº”è¯¥ä¸æ–­åœ°æµåŠ¨ï¼Œåœ¨å˜åŒ–ä¸­è¾¾åˆ°å¹³è¡¡&lt;/li&gt;
&lt;/ul&gt;
</content>
        <category term="UT" />
        <category term="TDD" />
        <updated>2021-08-29T09:11:09.223Z</updated>
    </entry>
    <entry>
        <id>https://zhougy0717.github.io/2021/08/22/obsidian_posts/unique_ptr%E5%88%B0%E5%BA%95%E6%98%AF%E5%90%A6%E8%83%BD%E6%8C%89%E5%80%BC%E4%BC%A0%E9%80%92%EF%BC%9F/</id>
        <title>unique_ptråˆ°åº•æ˜¯å¦èƒ½æŒ‰å€¼ä¼ é€’ï¼Ÿ</title>
        <link rel="alternate" href="https://zhougy0717.github.io/2021/08/22/obsidian_posts/unique_ptr%E5%88%B0%E5%BA%95%E6%98%AF%E5%90%A6%E8%83%BD%E6%8C%89%E5%80%BC%E4%BC%A0%E9%80%92%EF%BC%9F/"/>
        <content type="html">&lt;p&gt;ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;memory&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(std::unique_ptr&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt; a)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;auto&lt;/span&gt; a = std::make_unique&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;func&lt;/span&gt;(a);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™æ®µä»£ç æ˜¯ä¸èƒ½ç¼–è¯‘çš„ï¼Œå› ä¸ºuniqe_ptræ²¡æœ‰æ‹·è´æ„é€ å‡½æ•°ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight sh&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ben@LUbuntu ~/t/unique_ptr&amp;gt; g++ -o &lt;span class=&#34;built_in&#34;&gt;test&lt;/span&gt; main.cpp -std=c++14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;main.cpp: In &lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; â€˜int main()â€™:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;main.cpp:10:11: error: use of deleted &lt;span class=&#34;keyword&#34;&gt;function&lt;/span&gt; â€˜std::unique_ptr&amp;lt;_Tp, _Dp&amp;gt;::unique_ptr(const std::unique_ptr&amp;lt;_Tp, _Dp&amp;gt;&amp;amp;) [with _Tp = int; _Dp = std::default_delete&amp;lt;int&amp;gt;]â€™&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10 | func(a);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;|&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é‚£ä¸ºä»€ä¹ˆé—®è¿™ä¸ªé—®é¢˜ï¼Ÿçœ‹ä¸‹é¢è¿™æ®µä»£ç &lt;/p&gt;
&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;memory&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#&lt;span class=&#34;meta-keyword&#34;&gt;include&lt;/span&gt; &lt;span class=&#34;meta-string&#34;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(std::unique_ptr&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt; a)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;built_in&#34;&gt;func&lt;/span&gt;(std::make_unique&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯å¯ä»¥ç¼–è¯‘çš„ï¼Œæ‰§è¡Œä¹Ÿæ²¡é—®é¢˜ã€‚å†çœ‹make_uniqueçš„åŸå‹ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight c++&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;template&lt;/span&gt;&amp;lt; class T, class... Args &amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;unique_ptr&amp;lt;T&amp;gt; &lt;span class=&#34;title&#34;&gt;make_unique&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;( Args&amp;amp;&amp;amp;... args )&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;template&lt;/span&gt;&amp;lt; class T &amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;unique_ptr&amp;lt;T&amp;gt; &lt;span class=&#34;title&#34;&gt;make_unique&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;( std::&lt;span class=&#34;keyword&#34;&gt;size_t&lt;/span&gt; size )&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;template&lt;/span&gt;&amp;lt; &lt;span class=&#34;class&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;T&lt;/span&gt;, &lt;span class=&#34;title&#34;&gt;class&lt;/span&gt;... &lt;span class=&#34;title&#34;&gt;Args&lt;/span&gt; &amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/* unspecified */&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;make_unique&lt;/span&gt;( Args&amp;amp;&amp;amp;... args ) = &lt;span class=&#34;keyword&#34;&gt;delete&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯è§make_uniqueçš„è¿”å›å€¼æ˜¯unique_ptrã€‚é‚£ä¹ˆå‰é¢é‚£æ®µä»£ç å°±ç»™äººé€ æˆäº†unique_pträ¼¼ä¹ä¹Ÿå¯ä»¥æŒ‰å€¼ä¼ é€’çš„å‡è±¡ã€‚åˆ°åº•æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿåé¢æˆ‘ä»¬ç»“åˆæ±‡ç¼–ä¸€èµ·åˆ†æä¸€ä¸‹ï¼Œç¼–è¯‘å™¨é’ˆå¯¹è¿™æ ·çš„åœºæ™¯åšäº†ä»€ä¹ˆä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h1 id=&#34;make-uniqueçš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå‡½æ•°å‚æ•°çš„çœŸç›¸&#34;&gt;&lt;a href=&#34;#make-uniqueçš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå‡½æ•°å‚æ•°çš„çœŸç›¸&#34; class=&#34;headerlink&#34; title=&#34;make_uniqueçš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå‡½æ•°å‚æ•°çš„çœŸç›¸&#34;&gt;&lt;/a&gt;make_uniqueçš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå‡½æ•°å‚æ•°çš„çœŸç›¸&lt;/h1&gt;&lt;p&gt;ç›´æ¥é€šè¿‡&lt;code&gt;objectdum -tCS test &amp;gt; test.dump&lt;/code&gt;å‘½ä»¤å¯¹å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œåæ±‡ç¼–ã€‚æ³¨æ„ç¼–è¯‘æ—¶ï¼Œè¦æŒ‡å®š&lt;code&gt;-g -O0&lt;/code&gt;ã€‚è¿™æ ·åæ±‡ç¼–æ—¶ï¼Œä¿¡æ¯æ›´å¤šä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºSTLæ‰©å±•ä»£ç ï¼Œå¤–åŠ C++ç¼–è¯‘å™¨æ’å…¥çš„ä¸€äº›åˆå§‹åŒ–å’Œé€€å‡ºæ¸…ç†ä»£ç ï¼Œåæ±‡ç¼–äº§ç”Ÿçš„æ–‡ä»¶è¡Œæ•°è¾ƒå¤šï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨æ ¸å¿ƒçš„mainå‡½æ•°ä»¥åŠä¸€äº›ç›¸å…³çš„å‡½æ•°å³å¯ã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;int main()&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008a8: a9be7bfd stp x29, x30, [sp, #-32]! // å°†x29,x30å­˜å‚¨äºsp-32å¤„ï¼Œä¸”sp = sp-32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008ac: 910003fd mov x29, sp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;func(std::make_unique&amp;lt;int&amp;gt;(1));&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008b0: 52800020 mov w0, #0x1 // #1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008b4: b9001fe0 str w0, [sp, #28]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008b8: 910073e0 add x0, sp, #0x1c&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008bc: 910043e1 add x1, sp, #0x10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008c0: aa0103e8 mov x8, x1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008c4: 94000027 bl 400960 &amp;lt;std::_MakeUniq&amp;lt;int&amp;gt;::__single_object std::make_unique&amp;lt;int, int&amp;gt;(int&amp;amp;&amp;amp;)&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008c8: 910043e0 add x0, sp, #0x10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008cc: 97fffff2 bl 400894 &amp;lt;func(std::unique_ptr&amp;lt;int, std::default_delete&amp;lt;int&amp;gt; &amp;gt;)&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008d0: 910043e0 add x0, sp, #0x10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008d4: 94000035 bl 4009a8 &amp;lt;std::unique_ptr&amp;lt;int, std::default_delete&amp;lt;int&amp;gt; &amp;gt;::~unique_ptr()&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;return 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008d8: 52800000 mov w0, #0x0 // #0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008dc: a8c27bfd ldp x29, x30, [sp], #32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4008e0: d65f03c0 ret&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;///@&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;è°ƒç”¨make-uniqueå‰çš„å‡†å¤‡&#34;&gt;&lt;a href=&#34;#è°ƒç”¨make-uniqueå‰çš„å‡†å¤‡&#34; class=&#34;headerlink&#34; title=&#34;è°ƒç”¨make_uniqueå‰çš„å‡†å¤‡&#34;&gt;&lt;/a&gt;è°ƒç”¨make_uniqueå‰çš„å‡†å¤‡&lt;/h2&gt;&lt;p&gt;mainå‡½æ•°çš„ç¬¬ä¸€è¡ŒæŒ‡ä»¤ï¼Œå°†æ ˆæŒ‡é’ˆï¼ˆspï¼‰ç§»åŠ¨åˆ°äº†æ ˆåº•ï¼Œå¹¶ä¿å­˜äº†x29å’Œx30å¯„å­˜å™¨ã€‚å¯„å­˜å™¨å«ä¹‰å¯ä»¥å‚è€ƒé™„å½•ã€‚åœ¨è°ƒç”¨make_uniqueå‰ï¼Œæ ˆå†…å­˜å¦‚ä¸‹å›¾ã€‚&lt;br&gt;&lt;img src=&#34;/2021/08/22/obsidian_posts/unique_ptr%E5%88%B0%E5%BA%95%E6%98%AF%E5%90%A6%E8%83%BD%E6%8C%89%E5%80%BC%E4%BC%A0%E9%80%92%EF%BC%9F/Pasted%20image%2020210822121125.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;ARMå‡½æ•°è°ƒç”¨çº¦å®š&#34;&gt;&lt;a href=&#34;#ARMå‡½æ•°è°ƒç”¨çº¦å®š&#34; class=&#34;headerlink&#34; title=&#34;ARMå‡½æ•°è°ƒç”¨çº¦å®š&#34;&gt;&lt;/a&gt;ARMå‡½æ•°è°ƒç”¨çº¦å®š&lt;/h3&gt;&lt;p&gt;ä¹Ÿå«AAPCSï¼ŒProcedure Call Standard for the Arm Architectureã€‚å¯¹äºaarch64ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å°äº8ä¸ªå‚æ•°æ—¶ï¼Œä½¿ç”¨x0-x7å¯„å­˜å™¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è¶…è¿‡8ä¸ªå‚æ•°ï¼ŒæŒ‰é¡ºåºä»å³å¾€å·¦å…¥æ ˆï¼ˆå› ä¸ºæ ˆæ˜¯å…ˆå…¥åå‡ºçš„ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è¿”å›åœ°å€åœ¨lrå¯„å­˜å™¨ï¼Œè¿”å›å€¼çš„å€¼åœ¨x0å¯„å­˜å™¨&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;make-uniqueçš„å‚æ•°ä¼ é€’&#34;&gt;&lt;a href=&#34;#make-uniqueçš„å‚æ•°ä¼ é€’&#34; class=&#34;headerlink&#34; title=&#34;make_uniqueçš„å‚æ•°ä¼ é€’&#34;&gt;&lt;/a&gt;make_uniqueçš„å‚æ•°ä¼ é€’&lt;/h3&gt;&lt;p&gt;æŒ‰ç…§AAPCSçš„ç†è§£ï¼Œmake_uniqueçš„å®ç°å‡½æ•°å®é™…æœ‰ä¸¤ä¸ªå…¥å‚ï¼šä¸€ä¸ªæ˜¯uniuqe_ptrçš„æ„é€ å‡½æ•°å‚æ•°1ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç”¨æ¥å­˜æ”¾unique_ptrå¯¹è±¡æŒ‡é’ˆçš„åœ°å€ï¼Œå³x1ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·å°±å¾ˆå¥½ç†è§£äº†ï¼Œè°ƒç”¨å®Œmake_uniqueï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ä½¿ç”¨make_uniqueçš„è¾“å‡ºè°ƒç”¨funcäº†ã€‚ä¹Ÿå°±æ˜¯&lt;code&gt;add x0, sp, #0x10&lt;/code&gt;zè¿™ä¸€è¡Œã€‚å°†ä¿å­˜äº†unique_ptræŒ‡é’ˆçš„åœ°å€èµ‹äºˆäº†funcå‡½æ•°çš„å”¯ä¸€ä¸€ä¸ªå‚æ•°ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ‰€ä»¥å¯è§ï¼Œfuncå‡½æ•°å¹¶ä¸æ˜¯ä¼ é€’unique_ptrçš„å€¼ï¼Œè€Œæ˜¯é€šè¿‡ç¼–è¯‘å™¨ç”Ÿæˆäº†ä¸€ä¸ªä¸´æ—¶å˜é‡ä¿å­˜äº†make_uniqueè¿”å›çš„unique_ptrå¯¹è±¡æŒ‡é’ˆï¼Œå¹¶ä¼ é€’ç»™äº†funcã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;æŒ‰å¼•ç”¨ä¼ é€’ä¼šæ€ä¹ˆæ ·ï¼Ÿ&#34;&gt;&lt;a href=&#34;#æŒ‰å¼•ç”¨ä¼ é€’ä¼šæ€ä¹ˆæ ·ï¼Ÿ&#34; class=&#34;headerlink&#34; title=&#34;æŒ‰å¼•ç”¨ä¼ é€’ä¼šæ€ä¹ˆæ ·ï¼Ÿ&#34;&gt;&lt;/a&gt;æŒ‰å¼•ç”¨ä¼ é€’ä¼šæ€ä¹ˆæ ·ï¼Ÿ&lt;/h3&gt;&lt;figure class=&#34;highlight c&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;(&lt;span class=&#34;built_in&#34;&gt;std&lt;/span&gt;::&lt;span class=&#34;built_in&#34;&gt;unique_ptr&lt;/span&gt;&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt; &amp;amp;a)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;auto&lt;/span&gt; a = &lt;span class=&#34;built_in&#34;&gt;std&lt;/span&gt;::make_unique&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;&amp;gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    func(a);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight armasm&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;symbol&#34;&gt;int&lt;/span&gt; main()&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;a8: a9bd7bfd stp x29, x30, [&lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, #-&lt;span class=&#34;number&#34;&gt;48&lt;/span&gt;]!&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;ac: &lt;span class=&#34;number&#34;&gt;910003&lt;/span&gt;fd &lt;span class=&#34;keyword&#34;&gt;mov&lt;/span&gt; x29, &lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;b0: f9000bf3 &lt;span class=&#34;keyword&#34;&gt;str&lt;/span&gt; x19, [&lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;#16&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;symbol&#34;&gt;auto&lt;/span&gt; a = std::make_unique&amp;lt;int&amp;gt;(&lt;span class=&#34;number&#34;&gt;1&lt;/span&gt;)&lt;span class=&#34;comment&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;b4: &lt;span class=&#34;number&#34;&gt;52800020&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;mov&lt;/span&gt; w0, &lt;span class=&#34;number&#34;&gt;#0x1&lt;/span&gt; &lt;span class=&#34;comment&#34;&gt;// #1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;b8: b9002fe0 &lt;span class=&#34;keyword&#34;&gt;str&lt;/span&gt; w0, [&lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;#44&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;bc: &lt;span class=&#34;number&#34;&gt;9100&lt;/span&gt;b3e0 &lt;span class=&#34;keyword&#34;&gt;add&lt;/span&gt; x0, &lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;#0x2c&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;c0&lt;/span&gt;: &lt;span class=&#34;number&#34;&gt;910083&lt;/span&gt;e1 &lt;span class=&#34;keyword&#34;&gt;add&lt;/span&gt; x1, &lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;#0x20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;c4&lt;/span&gt;: aa0103e8 &lt;span class=&#34;keyword&#34;&gt;mov&lt;/span&gt; x8, x1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;c8&lt;/span&gt;: &lt;span class=&#34;number&#34;&gt;94000029&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;bl&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;40096&lt;/span&gt;c &amp;lt;std::_MakeUniq&amp;lt;int&amp;gt;::__single_object std::make_unique&amp;lt;int, int&amp;gt;(int&amp;amp;&amp;amp;)&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;symbol&#34;&gt;func&lt;/span&gt;(a)&lt;span class=&#34;comment&#34;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;cc: &lt;span class=&#34;number&#34;&gt;910083&lt;/span&gt;e0 &lt;span class=&#34;keyword&#34;&gt;add&lt;/span&gt; x0, &lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;#0x20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;d0&lt;/span&gt;: &lt;span class=&#34;number&#34;&gt;97&lt;/span&gt;fffff1 &lt;span class=&#34;keyword&#34;&gt;bl&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;400894&lt;/span&gt; &amp;lt;func(std::unique_ptr&amp;lt;int, std::default_delete&amp;lt;int&amp;gt; &amp;gt;&amp;amp;)&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;symbol&#34;&gt;...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;///@&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&#34;/2021/08/22/obsidian_posts/unique_ptr%E5%88%B0%E5%BA%95%E6%98%AF%E5%90%A6%E8%83%BD%E6%8C%89%E5%80%BC%E4%BC%A0%E9%80%92%EF%BC%9F/Pasted%20image%2020210822121232.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;å¦‚å‡ºä¸€è¾™ï¼Œå¯¹make_uniqueçš„è°ƒç”¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™é‡Œå¤šå­˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡aï¼Œæ‰€ä»¥å¤šèŠ±è´¹äº†å‡ ä¸ªå­—èŠ‚çš„æ ˆç©ºé—´ã€‚è€Œå‰æ–‡çš„ä¸´æ—¶å˜é‡å­˜åœ¨å¯„å­˜å™¨å³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¼ å³å€¼å¼•ç”¨å‘¢ï¼Ÿ&#34;&gt;&lt;a href=&#34;#ä¼ å³å€¼å¼•ç”¨å‘¢ï¼Ÿ&#34; class=&#34;headerlink&#34; title=&#34;ä¼ å³å€¼å¼•ç”¨å‘¢ï¼Ÿ&#34;&gt;&lt;/a&gt;ä¼ å³å€¼å¼•ç”¨å‘¢ï¼Ÿ&lt;/h3&gt;&lt;figure class=&#34;highlight armasm&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;b8: &lt;span class=&#34;number&#34;&gt;910073&lt;/span&gt;e0 &lt;span class=&#34;keyword&#34;&gt;add&lt;/span&gt; x0, &lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;#0x1c&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;bc: &lt;span class=&#34;number&#34;&gt;910043&lt;/span&gt;e1 &lt;span class=&#34;keyword&#34;&gt;add&lt;/span&gt; x1, &lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;#0x10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;c0&lt;/span&gt;: aa0103e8 &lt;span class=&#34;keyword&#34;&gt;mov&lt;/span&gt; x8, x1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;c4&lt;/span&gt;: &lt;span class=&#34;number&#34;&gt;94000027&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;bl&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;400960&lt;/span&gt; &amp;lt;std::_MakeUniq&amp;lt;int&amp;gt;::__single_object std::make_unique&amp;lt;int, int&amp;gt;(int&amp;amp;&amp;amp;)&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;c8&lt;/span&gt;: &lt;span class=&#34;number&#34;&gt;910043&lt;/span&gt;e0 &lt;span class=&#34;keyword&#34;&gt;add&lt;/span&gt; x0, &lt;span class=&#34;built_in&#34;&gt;sp&lt;/span&gt;, &lt;span class=&#34;number&#34;&gt;#0x10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;number&#34;&gt;4008&lt;/span&gt;cc: &lt;span class=&#34;number&#34;&gt;97&lt;/span&gt;fffff2 &lt;span class=&#34;keyword&#34;&gt;bl&lt;/span&gt; &lt;span class=&#34;number&#34;&gt;400894&lt;/span&gt; &amp;lt;func(std::unique_ptr&amp;lt;int, std::default_delete&amp;lt;int&amp;gt; &amp;gt;&amp;amp;&amp;amp;)&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¯è§ä¼ å³å€¼å¼•ç”¨å’Œä¼ å€¼ä¸€æ¨¡ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h1 id=&#34;é™„å½•&#34;&gt;&lt;a href=&#34;#é™„å½•&#34; class=&#34;headerlink&#34; title=&#34;é™„å½•&#34;&gt;&lt;/a&gt;é™„å½•&lt;/h1&gt;&lt;h2 id=&#34;AARCH64å¯„å­˜å™¨&#34;&gt;&lt;a href=&#34;#AARCH64å¯„å­˜å™¨&#34; class=&#34;headerlink&#34; title=&#34;AARCH64å¯„å­˜å™¨&#34;&gt;&lt;/a&gt;AARCH64å¯„å­˜å™¨&lt;/h2&gt;&lt;p&gt;å‚è€ƒ&lt;a href=&#34;https://winddoing.github.io/post/7190.html&#34;&gt;ARMv8-aarch64 å¯„å­˜å™¨å’ŒæŒ‡ä»¤é›†&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;é€šç”¨å¯„å­˜å™¨&#34;&gt;&lt;a href=&#34;#é€šç”¨å¯„å­˜å™¨&#34; class=&#34;headerlink&#34; title=&#34;é€šç”¨å¯„å­˜å™¨&#34;&gt;&lt;/a&gt;é€šç”¨å¯„å­˜å™¨&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å‚æ•°å¯„å­˜å™¨ï¼ˆX0-X7ï¼‰ï¼š ç”¨ä½œä¸´æ—¶å¯„å­˜å™¨æˆ–å¯ä»¥ä¿å­˜çš„è°ƒç”¨è€…ä¿å­˜çš„å¯„å­˜å™¨å˜é‡å‡½æ•°å†…çš„ä¸­é—´å€¼ï¼Œè°ƒç”¨å…¶ä»–å‡½æ•°ä¹‹é—´çš„å€¼ï¼ˆ8 ä¸ªå¯„å­˜å™¨å¯ç”¨äºä¼ é€’å‚æ•°ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ¥ç”µä¿å­˜çš„ä¸´æ—¶å¯„å­˜å™¨ï¼ˆX9-X15ï¼‰ï¼š å¦‚æœè°ƒç”¨è€…è¦æ±‚åœ¨ä»»ä½•è¿™äº›å¯„å­˜å™¨ä¸­ä¿ç•™å€¼è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è€…å¿…é¡»å°†å—å½±å“çš„å¯„å­˜å™¨ä¿å­˜åœ¨è‡ªå·±çš„å †æ ˆä¸­å¸§ã€‚ å®ƒä»¬å¯ä»¥é€šè¿‡è¢«è°ƒç”¨çš„å­ç¨‹åºè¿›è¡Œä¿®æ”¹ï¼Œè€Œæ— éœ€ä¿å­˜å¹¶åœ¨è¿”å›è°ƒç”¨è€…ä¹‹å‰æ¢å¤å®ƒä»¬ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è¢«è°ƒç”¨è€…ä¿å­˜çš„å¯„å­˜å™¨ï¼ˆX19-X29ï¼‰ï¼š è¿™äº›å¯„å­˜å™¨ä¿å­˜åœ¨è¢«è°ƒç”¨è€…å¸§ä¸­ã€‚ å®ƒä»¬å¯ä»¥è¢«è¢«è°ƒç”¨è€…ä¿®æ”¹å­ç¨‹åºï¼Œåªè¦å®ƒä»¬åœ¨è¿”å›ä¹‹å‰ä¿å­˜å¹¶æ¢å¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç‰¹æ®Šç”¨é€”å¯„å­˜å™¨ï¼ˆX8ï¼ŒX16-X18ï¼ŒX29ï¼ŒX30ï¼‰ï¼š&#34;&gt;&lt;a href=&#34;#ç‰¹æ®Šç”¨é€”å¯„å­˜å™¨ï¼ˆX8ï¼ŒX16-X18ï¼ŒX29ï¼ŒX30ï¼‰ï¼š&#34; class=&#34;headerlink&#34; title=&#34;ç‰¹æ®Šç”¨é€”å¯„å­˜å™¨ï¼ˆX8ï¼ŒX16-X18ï¼ŒX29ï¼ŒX30ï¼‰ï¼š&#34;&gt;&lt;/a&gt;ç‰¹æ®Šç”¨é€”å¯„å­˜å™¨ï¼ˆX8ï¼ŒX16-X18ï¼ŒX29ï¼ŒX30ï¼‰ï¼š&lt;/h3&gt;&lt;p&gt;X8ï¼š æ˜¯é—´æ¥ç»“æœå¯„å­˜å™¨ï¼Œç”¨äºä¿å­˜å­ç¨‹åºè¿”å›åœ°å€ï¼Œå°½é‡ä¸ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;X16 å’Œ X17ï¼š ç¨‹åºå†…è°ƒç”¨ä¸´æ—¶å¯„å­˜å™¨&lt;/p&gt;
&lt;p&gt;X18ï¼š å¹³å°å¯„å­˜å™¨ï¼Œä¿ç•™ç”¨äºå¹³å° ABIï¼Œå°½é‡ä¸ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;X29ï¼š å¸§æŒ‡é’ˆå¯„å­˜å™¨ï¼ˆFPï¼‰&lt;/p&gt;
&lt;p&gt;X30ï¼š é“¾æ¥å¯„å­˜å™¨ï¼ˆLRï¼‰&lt;/p&gt;
&lt;p&gt;X31ï¼š å †æ ˆæŒ‡é’ˆå¯„å­˜å™¨ SP æˆ–é›¶å¯„å­˜å™¨ ZXR&lt;/p&gt;
&lt;h1 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;a href=&#34;#å‚è€ƒæ–‡çŒ®&#34; class=&#34;headerlink&#34; title=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;&lt;/a&gt;å‚è€ƒæ–‡çŒ®&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://code.woboq.org/appleseed/include/boost/move/make_unique.hpp.html&#34;&gt;make_uniqueæºç &lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://blog.csdn.net/forever_2015/article/details/50283747&#34;&gt;[AAPCS å­¦ä¹ è¯¾åç»ƒä¹  - é€šè¿‡ä¸€ä¸ªå°ä¾‹å­æ¥è®²è§£]&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/42486116&#34;&gt;åŸºäºARM64 çš„å¸¸è§æ±‡ç¼–å‘½ä»¤è®°å½•&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://winddoing.github.io/post/7190.html&#34;&gt;ARMv8-aarch64 å¯„å­˜å™¨å’ŒæŒ‡ä»¤é›†&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
        <category term="C++" />
        <category term="coding" />
        <updated>2021-08-22T02:36:37.359Z</updated>
    </entry>
</feed>
