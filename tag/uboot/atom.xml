<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.zhougy.top</id>
    <title>Big Ben • Posts by &#34;uboot&#34; tag</title>
    <link href="https://blog.zhougy.top" />
    <updated>2012-09-29T02:46:46.000Z</updated>
    <category term="javascript" />
    <category term="angular" />
    <category term="操作系统" />
    <category term="arm" />
    <category term="单片机" />
    <category term="machine learning" />
    <category term="deep learning" />
    <category term="Linux" />
    <category term="内存管理" />
    <category term="Markdown" />
    <category term="python" />
    <category term="win32com" />
    <category term="nas" />
    <category term="synology" />
    <category term="USB" />
    <category term="Linux Device Drivers" />
    <category term="uboot" />
    <category term="http" />
    <category term="同步" />
    <category term="读书笔记" />
    <category term="程序员修炼之道" />
    <category term="算法" />
    <category term="c/c++" />
    <category term="Rap" />
    <category term="Eminem" />
    <category term="hexo" />
    <category term="security" />
    <category term="SELinux" />
    <category term="编译" />
    <category term="C++" />
    <category term="capability" />
    <category term="LD_PRELOAD" />
    <category term="coding" />
    <category term="UT" />
    <category term="TDD" />
    <category term="code review" />
    <category term="committer" />
    <category term="印象笔记" />
    <category term="Obsidian" />
    <category term="群晖" />
    <category term="Calibre" />
    <category term="电子书" />
    <category term="Android" />
    <category term="xposed" />
    <category term="GitHub" />
    <category term="中断处理" />
    <category term="docker" />
    <category term="ttrss" />
    <category term="rsshub" />
    <category term="wallabag" />
    <category term="unittest" />
    <category term="mockito" />
    <category term="powermock" />
    <category term="QT" />
    <category term="nlp" />
    <category term="vim" />
    <category term="SpaceVim" />
    <category term="tmux" />
    <category term="面向对象" />
    <category term="promise" />
    <category term="mongodb" />
    <category term="Programming" />
    <category term="C++11" />
    <category term="IoT" />
    <category term="broadlink" />
    <category term="domoticz" />
    <category term="UML" />
    <category term="socket" />
    <category term="iptables" />
    <category term="neural network" />
    <category term="mock" />
    <category term="深度学习" />
    <category term="schedule algorithm" />
    <category term="glibc" />
    <category term="gtest" />
    <category term="gmock" />
    <category term="golang" />
    <category term="elf" />
    <category term="软件开发" />
    <category term="设计模式" />
    <entry>
        <id>https://blog.zhougy.top/2012/09/29/meminfo%E5%88%9D%E5%A7%8B%E5%8C%96/</id>
        <title>meminfo初始化</title>
        <link rel="alternate" href="https://blog.zhougy.top/2012/09/29/meminfo%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
        <content type="html">&lt;div class=&#34;enNote&#34; style=&#34;word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;&#34; title lang xml:lang dir&gt;1. u-boot&amp;#x4E2D;&amp;#x8BBE;&amp;#x7F6E;&amp;#x542F;&amp;#x52A8;&amp;#x53C2;&amp;#x6570;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;1&amp;#xFF09;&amp;#x542F;&amp;#x52A8;&amp;#x547D;&amp;#x4EE4;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;u-boot-env.txt&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&lt;font face=&#34;Courier New&#34;&gt;bootcmd&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;if ${recovery}; then&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;run nandrecovery;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;else&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;if mmc init; then&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;if run loadbootscript; then&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;run bootscript;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;else&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;if run loaduImage; then&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;run mmcboot;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;else&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;run nandboot;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;fi;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;fi;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;else&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&lt;b&gt;&lt;font color=&#34;#FF0000&#34;&gt;run nandboot;&lt;/font&gt;&lt;/b&gt;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; fi;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;fi&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&lt;font face=&#34;Courier New&#34;&gt;nandboot&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;echo Booting from nand ...;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&lt;font color=&#34;#FF0000&#34;&gt;run nandargs;&lt;/font&gt;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;nand read ${loadaddr} boot;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;booti 0x82000008&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#xA0;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;nandargs&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&lt;font face=&#34;Courier New&#34;&gt;setenv bootargs console=${console} init=${init} &lt;font color=&#34;#FF0000&#34;&gt;mem=${mem}&lt;/font&gt; ip=${ip} mpurate=${mpurate} omap_vout.vid1_static_vrfb_alloc=y vram=${vram} omapfb.vram=0:8M androidboot.console=${tty} root=${root_nand} rootfstype=${rootfstype_nand} ubi.mtd=${ubi_mtd}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#x8FD9;&amp;#x4E00;&amp;#x90E8;&amp;#x5206;&amp;#x5C5E;&amp;#x4E8E;commandline&amp;#xFF0C;&amp;#x4F1A;&amp;#x5728;setup_commandline_tag&amp;#x4E2D;&amp;#x63D2;&amp;#x5165;params&amp;#x6570;&amp;#x7EC4;&amp;#xFF0C;&amp;#x5E76;&amp;#x6807;&amp;#x4E0A;ATAG_CMDLINE&amp;#xFF0C;&amp;#x4F1A;&amp;#x5728;parse_args&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x7528;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x51FD;&amp;#x6570;&amp;#x6765;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x5982;&amp;#x4E0B;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;2&amp;#xFF09;&amp;#x73AF;&amp;#x5883;&amp;#x53D8;&amp;#x91CF;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;include/configs/d7800.h&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;#define CONFIG_EXTRA_ENV_SETTINGS \&lt;/font&gt;&lt;/div&gt;&lt;blockquote style=&#34;margin: 0 0 0 40px; border: none; padding: 0px;&#34;&gt;&lt;blockquote style=&#34;margin: 0 0 0 40px; border: none; padding: 0px;&#34;&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;quot;init=/init\0&amp;quot; \&lt;br&gt;&amp;#xA0; &amp;#xA0; &lt;font color=&#34;#FF0000&#34;&gt;&amp;quot;mem=256M\0&amp;quot;&lt;/font&gt; \&lt;br&gt;&amp;#xA0; &amp;#xA0; &amp;quot;mpurate=800\0&amp;quot; \&lt;br&gt;&amp;#xA0; &amp;#xA0;&amp;#x2026;&amp;#x2026;&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;2.&lt;font face=&#34;Courier New&#34;&gt;kernel&amp;#x4E2D;&amp;#x7528;parse_args&amp;#x89E3;&amp;#x6790;&amp;#x6B64;bootarg&amp;#xFF0C;&amp;#x5177;&amp;#x4F53;&amp;#x53EF;&amp;#x53C2;&amp;#x8003;&amp;#x53E6;&amp;#x4E00;&amp;#x4EFD;&amp;#x7B14;&amp;#x8BB0;&lt;/font&gt;&lt;a href=&#34;evernote:///view/161681/s10/39d4ca69-e5d9-4582-9635-d9963aa05e29/39d4ca69-e5d9-4582-9635-d9963aa05e29/&#34; style=&#34;color: rgb(105, 170, 53);&#34;&gt;Linux&amp;#x542F;&amp;#x52A8;&amp;#x53C2;&amp;#x6570;&amp;#x201C;init=xxx&amp;#x201D;&amp;#x5206;&amp;#x6790;&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;parse_args -&amp;gt;&amp;#xA0;parse_one -&amp;gt;&amp;#xA0;unknown_bootoption -&amp;gt;&amp;#xA0;obsolete_checksetup -&amp;gt;&amp;#xA0;obs_kernel_param.setup_func =&amp;#xA0;early_mem&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;3.kernel&amp;#x4E2D;&amp;#x8BBE;&amp;#x7F6E;&amp;#x5BF9;&amp;#x5E94;bootarg&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x51FD;&amp;#x6570;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&lt;font face=&#34;Courier New&#34;&gt;early_param(&amp;quot;mem&amp;quot;, early_mem); -&amp;gt;&amp;#xA0;__setup_param(str, fn, fn, 1) -&amp;gt;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;#define __setup_param(str, unique_id, fn, early)&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; \&lt;/font&gt;&lt;/div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;static const char __setup_str_##unique_id[] __initconst \&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; __aligned(1) = str; \&lt;br&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;static struct obs_kernel_param __setup_##unique_id&amp;#xA0; \&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; __used __section(&lt;font color=&#34;#FF0000&#34;&gt;.init.setup&lt;/font&gt;)&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; \&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; __attribute__((aligned((sizeof(long)))))&amp;#xA0;&amp;#xA0;&amp;#xA0; \&lt;br&gt;&lt;/font&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0; = { __setup_str_##unique_id, fn, early } &amp;#xA0;&amp;#xA0;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;4.&lt;/font&gt;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;early_mem&amp;#x51FD;&amp;#x6570;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&lt;font face=&#34;Courier New&#34;&gt;static int __init early_mem(char *p)&lt;/font&gt;&lt;/div&gt;&lt;blockquote style=&#34;margin: 0 0 0 40px; border: none; padding: 0px;&#34;&gt;&lt;font face=&#34;Courier New&#34;&gt;{&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; static int usermem __initdata = 0;&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; unsigned long size, start;&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; char *endp;&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; &lt;font color=&#34;#41AD1C&#34;&gt;/*&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; * If the user specifies memory size, we&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; * blow away any automatically generated&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; * size.&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; */&lt;/font&gt;&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; if (usermem == 0) {&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; usermem = 1;&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; meminfo.nr_banks = 0;&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; }&lt;/font&gt;&lt;/blockquote&gt;&lt;blockquote style=&#34;margin: 0 0 0 40px; border: none; padding: 0px;&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#xA0;&lt;span style=&#34;color: rgb(65, 173, 28); font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;/*&lt;/span&gt;&lt;div&gt;&lt;span style=&#34;color: rgb(65, 173, 28); font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&lt;/span&gt; &lt;font color=&#34;#41AD1C&#34;&gt;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;*&amp;#xA0;&lt;/span&gt;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;defined in&lt;/span&gt;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;&amp;#xA0;&lt;/span&gt;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;arch/arm/plat-omap/include/plat/memory.h&lt;/span&gt;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; *&amp;#xA0;&lt;/span&gt;PHYS_OFFSET &amp;#xA0;= UL(0x80000000)&lt;/font&gt;&lt;br style=&#34;color: rgb(65, 173, 28); font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;&lt;span style=&#34;color: rgb(65, 173, 28); font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; */&lt;/span&gt;&lt;/div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; start = PHYS_OFFSET;&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; size&amp;#xA0; = memparse(p, &amp;amp;endp);&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; if (*endp == &amp;apos;@&amp;apos;)&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; start = memparse(endp + 1, NULL);&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; arm_add_memory(start, size);&lt;br&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; return 0;&lt;br&gt;}&lt;/font&gt;&lt;/blockquote&gt;&lt;blockquote style=&#34;margin: 0 0 0 40px; border: none; padding: 0px;&#34;&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#x6700;&amp;#x540E;&amp;#x9057;&amp;#x7559;&amp;#x4E00;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x5047;&amp;#x5982;&amp;#x6709;&amp;#x51E0;&amp;#x5757;&amp;#x5185;&amp;#x5B58;&amp;#x9700;&amp;#x8981;&amp;#x5904;&amp;#x7406;&amp;#x600E;&amp;#x4E48;&amp;#x529E;&amp;#xFF1F;&lt;br&gt;&lt;/font&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&lt;font face=&#34;Courier New&#34;&gt;&amp;#x6CA1;&amp;#x5173;&amp;#x7CFB;&amp;#xFF0C;Linux&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x673A;&amp;#x5236;&amp;#x3002;&amp;#x5C31;&amp;#x662F;&lt;/font&gt;__tagtable(ATAG_MEM, parse_tag_mem32);&amp;#x8FD9;&amp;#x662F;&amp;#x4E00;&amp;#x5F20;&amp;#x8868;&amp;#x683C;&amp;#xFF0C;&amp;#x4EE3;&amp;#x8868;&amp;#x4E86;&amp;#x4E00;&amp;#x7EC4;ATAG_MEM param&amp;#xFF0C;&amp;#x7528;parse_tag_mem32&amp;#x6765;&amp;#x5904;&amp;#x7406;&amp;#x3002;&amp;#x8FD9;&amp;#x4E00;&amp;#x7EC4;param&amp;#x540C;&amp;#x6837;&amp;#x4E5F;&amp;#x662F;&amp;#x5728;u-boot&amp;#x9636;&amp;#x6BB5;&amp;#x5C31;&amp;#x52A0;&amp;#x5165;&amp;#x4E86;&amp;#x3002;&amp;#x5373;&amp;#xFF1A;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;do_bootm_linux -&amp;gt;&amp;#xA0;setup_memory_tags (u-boot)&lt;/font&gt;&lt;/div&gt;&lt;blockquote style=&#34;margin: 0 0 0 40px; border: none; padding: 0px;&#34;&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;static void setup_memory_tags (bd_t *bd)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; int i;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; for (i = 0; i &amp;lt; CONFIG_NR_DRAM_BANKS; i++) {&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; params-&amp;gt;hdr.tag = ATAG_MEM;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; params-&amp;gt;hdr.size = tag_size (tag_mem32);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; params-&amp;gt;u.mem.start = bd-&amp;gt;bi_dram[i].start;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; params-&amp;gt;u.mem.size = bd-&amp;gt;bi_dram[i].size;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0;&amp;#xA0; params = tag_next (params);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&amp;#xA0;&amp;#xA0;&amp;#xA0; }&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/blockquote&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&amp;#x53EA;&amp;#x4E0D;&amp;#x8FC7;&amp;#x5728;D7800&amp;#x4E2D;&lt;span style=&#34;font-family: &amp;apos;Courier New&amp;apos;;&#34;&gt;CONFIG_NR_DRAM_BANKS=1&amp;#xFF08;configs/d7800.h&amp;#xFF09;&amp;#x3002;&lt;/span&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;meminfo&amp;#x4E2D;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x5730;&amp;#x5740;&amp;#x5168;&amp;#x90E8;&amp;#x662F;&amp;#x771F;&amp;#x6B63;&amp;#x7684;&amp;#x7269;&amp;#x7406;&amp;#x5730;&amp;#x5740;&amp;#x3002;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;blockquote style=&#34;margin: 0 0 0 40px; border: none; padding: 0px;&#34;&gt;&lt;div&gt;&lt;font face=&#34;Courier New&#34;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;#xA0; &amp;#xA0; &amp;#xA0;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;</content>
        <category term="Linux" />
        <category term="内存管理" />
        <category term="uboot" />
        <updated>2012-09-29T02:46:46.000Z</updated>
    </entry>
</feed>
