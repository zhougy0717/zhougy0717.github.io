<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>Big Ben • Posts by &#34;mongodb&#34; tag</title>
        <link>https://blog.zhougy.top</link>
        <description></description>
        <language>en</language>
        <pubDate>Mon, 25 Jan 2016 13:20:05 +0800</pubDate>
        <lastBuildDate>Mon, 25 Jan 2016 13:20:05 +0800</lastBuildDate>
        <category>javascript</category>
        <category>angular</category>
        <category>arm</category>
        <category>单片机</category>
        <category>操作系统</category>
        <category>machine learning</category>
        <category>deep learning</category>
        <category>Linux</category>
        <category>内存管理</category>
        <category>Markdown</category>
        <category>python</category>
        <category>win32com</category>
        <category>nas</category>
        <category>synology</category>
        <category>USB</category>
        <category>Linux Device Drivers</category>
        <category>uboot</category>
        <category>http</category>
        <category>同步</category>
        <category>读书笔记</category>
        <category>程序员修炼之道</category>
        <category>算法</category>
        <category>c/c++</category>
        <category>hexo</category>
        <category>capability</category>
        <category>LD_PRELOAD</category>
        <category>C++</category>
        <category>coding</category>
        <category>UT</category>
        <category>TDD</category>
        <category>印象笔记</category>
        <category>Obsidian</category>
        <category>SELinux</category>
        <category>Android</category>
        <category>xposed</category>
        <category>GitHub</category>
        <category>中断处理</category>
        <category>群晖</category>
        <category>docker</category>
        <category>ttrss</category>
        <category>rsshub</category>
        <category>wallabag</category>
        <category>unittest</category>
        <category>mockito</category>
        <category>powermock</category>
        <category>QT</category>
        <category>nlp</category>
        <category>vim</category>
        <category>SpaceVim</category>
        <category>tmux</category>
        <category>面向对象</category>
        <category>promise</category>
        <category>mongodb</category>
        <category>Programming</category>
        <category>security</category>
        <category>C++11</category>
        <category>IoT</category>
        <category>broadlink</category>
        <category>domoticz</category>
        <category>UML</category>
        <category>socket</category>
        <category>iptables</category>
        <category>neural network</category>
        <category>mock</category>
        <category>深度学习</category>
        <category>schedule algorithm</category>
        <category>glibc</category>
        <category>gtest</category>
        <category>gmock</category>
        <category>golang</category>
        <category>elf</category>
        <category>软件开发</category>
        <category>设计模式</category>
        <category>Calibre</category>
        <category>电子书</category>
        <category>Rap</category>
        <category>Eminem</category>
        <category>红楼梦</category>
        <category>教育</category>
        <item>
            <guid isPermalink="true">https://blog.zhougy.top/2016/01/25/MongoDB%E8%BF%9E%E6%8E%A5/</guid>
            <title>MongoDB连接</title>
            <link>https://blog.zhougy.top/2016/01/25/MongoDB%E8%BF%9E%E6%8E%A5/</link>
            <category>mongodb</category>
            <pubDate>Mon, 25 Jan 2016 13:20:05 +0800</pubDate>
            <description><![CDATA[ &lt;!DOCTYPE en-note SYSTEM &#39;http://xml.evernote.com/pub/enml2.dtd&#39;&gt;&lt;div class=&#34;enNote&#34; style=&#34;color: #2c3f51; font-family: &amp;apos;Helvetica Neue&amp;apos;, Arial, &amp;apos;Hiragino Sans GB&amp;apos;, STHeiti, &amp;apos;Microsoft YaHei&amp;apos;, &amp;apos;WenQuanYi Micro Hei&amp;apos;, SimSun, Song, sans-serif; line-height: 1.6;&#34; title lang=&#34;v2&#34; xml:lang dir&gt;&lt;del style=&#34;position:relative;display:block;z-index:10;&#34;&gt;&lt;a style=&#34;position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;&#34; href=&#34;http://maxiang.io/#/?provider=evernote_int&amp;amp;guid=91a41fea-8057-4b45-b62a-999cb57b885d&amp;amp;notebook=%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0&#34;&gt;Edit&lt;/a&gt;&lt;/del&gt;&lt;div style=&#34;color: #2c3f51; font-family: &amp;apos;Helvetica Neue&amp;apos;, Arial, &amp;apos;Hiragino Sans GB&amp;apos;, STHeiti, &amp;apos;Microsoft YaHei&amp;apos;, &amp;apos;WenQuanYi Micro Hei&amp;apos;, SimSun, Song, sans-serif; line-height: 1.6;&#34;&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&lt;/p&gt;&lt;p style=&#34;margin: 0 0 1.1em; color: rgba(44,63,81,0.3); line-height: 1.6;&#34;&gt;&lt;code style=&#34;font-family: &amp;apos;Source Code Pro&amp;apos;,monospace; font-size: .9em; background-color: #f9f2f4; white-space: normal; padding: 2px 5px; border-radius: 0; color: #fff; background: rgba(44,63,81,0.3); margin-right: 6px;&#34;&gt;&amp;#x5B66;&amp;#x4E60;&amp;#x7B14;&amp;#x8BB0;&lt;/code&gt; &lt;code style=&#34;font-family: &amp;apos;Source Code Pro&amp;apos;,monospace; font-size: .9em; background-color: #f9f2f4; white-space: normal; padding: 2px 5px; color: rgba(44,63,81,0.5); border-radius: 0; background: rgba(102,128,153,0.075);&#34;&gt;mongo&lt;/code&gt; &lt;/p&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h2 style=&#34;font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;&#34;&gt;&amp;#x540D;&amp;#x8BCD;&amp;#x89E3;&amp;#x91CA;&lt;/h2&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;shard&lt;/h3&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x5B98;&amp;#x65B9;&amp;#x6587;&amp;#x6863;&lt;a href=&#34;https://docs.mongodb.org/manual/core/sharding-introduction/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;Sharding Introduction&lt;/a&gt;&amp;#xFF1A;&lt;/p&gt;&lt;blockquote style=&#34;padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;&#34;&gt;&lt;p style=&#34;margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;&#34;&gt;Sharding is a method for storing data across multiple machines.&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x4E2D;&amp;#x6587;&amp;#x79F0;&amp;#x4E3A;&amp;#x5206;&amp;#x7247;&amp;#x3002;&amp;#x53C2;&amp;#x8003;&lt;a href=&#34;https://www.evernote.com/shard/s24/nl/697376823/c9ca296a-ae2b-4833-bcb5-a37213b4cafc/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;8&amp;#x5929;&amp;#x5B66;&amp;#x901A;MongoDB&amp;#x2014;&amp;#x2014;&amp;#x7B2C;&amp;#x516D;&amp;#x5929; &amp;#x5206;&amp;#x7247;&amp;#x6280;&amp;#x672F;&lt;/a&gt;&amp;#x3002;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;sharded cluster&lt;/h3&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x7247;&amp;#x7C07;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;replica set&lt;/h3&gt;&lt;blockquote style=&#34;padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;&#34;&gt;&lt;p style=&#34;margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;&#34;&gt;A replica set in MongoDB is a group of mongod processes that maintain the same data set. Replica sets provide redundancy and high availability, and are the basis for all production deployments. &lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x6BCF;&amp;#x4E00;&amp;#x4E2A;replica set&amp;#x53EF;&amp;#x4EE5;&amp;#x6709;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;tag&amp;#x6765;&amp;#x63A7;&amp;#x5236;read preference&amp;#x548C;write concern&amp;#xFF0C;&amp;#x53C2;&amp;#x8003;&amp;#x5B98;&amp;#x65B9;&amp;#x6587;&amp;#x6863;&lt;a href=&#34;https://docs.mongodb.org/manual/tutorial/configure-replica-set-tag-sets/#replica-set-configuration-tag-sets&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;Configure Replica Set Tag Sets&lt;/a&gt;&amp;#x3002;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;write concern&lt;/h3&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x5B98;&amp;#x65B9;&amp;#x6587;&amp;#x6863;&lt;a href=&#34;https://docs.mongodb.org/manual/reference/write-concern/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;Write Concern&lt;/a&gt;&lt;/p&gt;&lt;blockquote style=&#34;padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;&#34;&gt;&lt;p style=&#34;margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;&#34;&gt;Write concern describes the level of acknowledgement requested from MongoDB for write operations to a standalone mongod or to replica sets or to sharded clusters. In sharded clusters, mongos instances will pass the write concern on to the shards.&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;Write concern can include the following fields:&lt;/p&gt;&lt;blockquote style=&#34;padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;&#34;&gt;&lt;p style=&#34;margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 1.1em; line-height: 1.6;&#34;&gt;{ w: \&amp;lt;value\&amp;gt;, j: \&amp;lt;boolean\&amp;gt;, wtimeout: \&amp;lt;number\&amp;gt; }&lt;/p&gt;&lt;ul style=&#34;margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;&#34;&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;w: 1 - &amp;#x6709;acknowledgement&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;; 0 - &amp;#x6CA1;&amp;#x6709;acknowledgement&amp;#xFF0C;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x53EF;&amp;#x80FD;&amp;#x628A;&amp;#x9519;&amp;#x8BEF;&amp;#x4FE1;&amp;#x606F;&amp;#x4F20;&amp;#x7ED9;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;w: &amp;#x2018;majority&amp;#x2019; &amp;amp; &amp;#x2018;\\&amp;#x2019; &lt;br&gt;&lt;ul style=&#34;margin-top: 0; margin-bottom: 0; line-height: 1.6;&#34;&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;&amp;#x524D;&amp;#x8005;&amp;#xFF1A;Requests acknowledgment that write operations have propagated to the majority of voting nodes [1], including the primary, &lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;and have been written to the on-disk journal for these nodes&lt;/strong&gt;. &amp;#x6B64;&amp;#x9009;&amp;#x9879;&amp;#x5305;&amp;#x542B;&amp;#x4E86;j: true&amp;#x3002;&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;&amp;#x540E;&amp;#x8005;&amp;#xFF1A;Requests acknowledgement that the write operations have propagated to a replica set member with the specified tag.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;j: true &amp;amp; false, &amp;#x51B3;&amp;#x5B9A;&amp;#x662F;&amp;#x5426;&amp;#x5199;journal&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;wtimeout: This option specifies a time limit, in milliseconds, for the write concern. wtimeout is only applicable for w values greater than 1.&lt;/li&gt;&lt;/ul&gt;&lt;p style=&#34;margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;&#34;&gt;If you specify w: 0 but include j: true, the j: true prevails to request acknowledgement from the standalone mongod or the primary of a replica set.&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;journal&lt;/h3&gt;&lt;blockquote style=&#34;padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;&#34;&gt;&lt;p style=&#34;margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;&#34;&gt;A sequential, binary transaction log used to bring the database into a valid state in the event of a hard shutdown. Journaling writes data first to the journal and then to the core data files. MongoDB enables journaling by default for 64-bit builds of MongoDB version 2.0 and newer. Journal files are pre-allocated and exist as files in the data directory. See &lt;a href=&#34;https://docs.mongodb.org/manual/core/journaling/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;Journaling&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;mongos&lt;/h3&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;&lt;a href=&#34;https://docs.mongodb.org/manual/reference/program/mongos/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;mongos&lt;/a&gt;&lt;/strong&gt; for &amp;#x201C;MongoDB Shard,&amp;#x201D; is a routing service for MongoDB shard configurations that processes queries from the application layer, and determines the location of this data in the sharded cluster, in order to complete these operations. From the perspective of the application, a mongos instance behaves identically to any other MongoDB instance.&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h2 style=&#34;font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;&#34;&gt;mongos vs. mongod&lt;/h2&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;mongodb&amp;#x91C7;&amp;#x7528;&amp;#x5C06;&amp;#x96C6;&amp;#x5408;&amp;#x8FDB;&amp;#x884C;&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5C06;&amp;#x62C6;&amp;#x5206;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5747;&amp;#x644A;&amp;#x5230;&amp;#x51E0;&amp;#x4E2A;&amp;#x7247;&amp;#x4E0A;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x89E3;&amp;#x51B3;&amp;#x65B9;&amp;#x6848;&amp;#x3002; &lt;br&gt;&lt;img class=&#34;enMedia&#34; src=&#34;/images/MongoDB&amp;#x8FDE;&amp;#x63A5;/1454111696209.png&#34; hash=&#34;f1d3c00bf0bbb422cd3b66f27205f157&#34; align alt longdesc width height border hspace vspace usemap style=&#34;border: 0; vertical-align: middle; max-width: 100%;&#34; title lang xml:lang dir&gt;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h2 style=&#34;font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;&#34;&gt;&amp;#x8FDE;&amp;#x63A5;mongo&amp;#x6570;&amp;#x636E;&amp;#x5E93;&lt;/h2&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x6211;&amp;#x6536;&amp;#x96C6;&amp;#x4E86;&amp;#x597D;&amp;#x51E0;&amp;#x7BC7;&amp;#x8BB2;&amp;#x5982;&amp;#x4F55;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x8FDE;&amp;#x63A5;mongo&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x7684;&amp;#x6587;&amp;#x7AE0;&amp;#x3002;&amp;#x53C2;&amp;#x8003;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x7B14;&amp;#x8BB0;&amp;#xFF1A; &lt;br&gt;&lt;a href=&#34;https://www.evernote.com/shard/s24/nl/697376807/5bc8092d-bccf-40cd-9ad5-9ec0b28611dd/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;mongodb&amp;#x9A71;&amp;#x52A8;&amp;#x7684;&amp;#x6B63;&amp;#x786E;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&lt;/a&gt; &lt;br&gt;&lt;a href=&#34;https://www.evernote.com/shard/s24/nl/697376807/bb648a45-3206-4fb9-b0a4-e4024638f6f5/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;mongodb &amp;#x8FDE;&amp;#x63A5;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&lt;/a&gt; &lt;br&gt;&lt;a href=&#34;https://www.evernote.com/shard/s24/nl/697376807/eac602ff-a873-4d71-bc7b-0a5650905d76/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;node-mongo-native1.3.19&amp;#x8FDE;&amp;#x63A5;mongo&amp;#x7684;&amp;#x6700;&amp;#x4F18;&amp;#x65B9;&amp;#x6CD5;&lt;/a&gt; &lt;br&gt;&amp;#x8FD8;&amp;#x6709;node.js&amp;#x7684;MongoDB driverd&amp;#x7684;&amp;#x5B98;&amp;#x65B9;&amp;#x4ECB;&amp;#x7ECD;&amp;#xFF1A; &lt;br&gt;&lt;a href=&#34;https://www.evernote.com/shard/s24/nl/697376807/ee17ecea-566c-4f2f-8138-79cb8ea25d8f/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;MongoClient or how to connect in a new and better way&lt;/a&gt; &lt;br&gt;&amp;#x8FD8;&amp;#x6709;&amp;#x4EBA;&amp;#x7528;&amp;#x8FDE;&amp;#x63A5;&amp;#x6C60;&amp;#x7684; &lt;br&gt;&lt;a href=&#34;https://www.evernote.com/shard/s24/nl/697376807/53bb4dd3-fd7f-4780-93ae-67faee3637a5/&#34; target=&#34;_blank&#34; style=&#34;background: transparent; color: #1980e6; text-decoration: none;&#34;&gt;&amp;#x751F;&amp;#x4EA7;&amp;#x7EA7;Nodejs&amp;#x5F00;&amp;#x53D1;&amp;#x5B9E;&amp;#x8DF5;-&amp;#x4F7F;&amp;#x7528;&amp;#x8FDE;&amp;#x63A5;&amp;#x6C60;&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;Old Style&lt;/h3&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x5148;&amp;#x770B;&amp;#x4E00;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;pre style=&#34;font-family: &amp;apos;Source Code Pro&amp;apos;,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); word-break: break-all; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; text-align: start; position: relative;&#34;&gt;&lt;code style=&#34;font-family: &amp;apos;Source Code Pro&amp;apos;,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333333; display: block; background: white; overflow-x: auto; padding: 1.3em 2em; padding-left: 3.3em;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;1.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; server_options=&amp;#123;&amp;#125;;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;2.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; db_options=&amp;#123;w:-&lt;span style=&#34;line-height: 1.6;&#34;&gt;1&lt;/span&gt;&amp;#125;;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;3.&lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;4.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; mongodb = &lt;span style=&#34;line-height: 1.6;&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;quot;mongodb&amp;quot;&lt;/span&gt;),&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;5.&lt;/span&gt;    mongoserver = &lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;new&lt;/span&gt; mongodb.Server(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;apos;localhost&amp;apos;&lt;/span&gt;, &lt;span style=&#34;line-height: 1.6;&#34;&gt;27017&lt;/span&gt;,server_options ),&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;6.&lt;/span&gt;    db = &lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;new&lt;/span&gt; mongodb.Db(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;apos;test&amp;apos;&lt;/span&gt;, mongoserver, db_options);&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;7.&lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;8.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; http=&lt;span style=&#34;line-height: 1.6;&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;apos;http&amp;apos;&lt;/span&gt;);&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;9.&lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;10.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; server=http.createServer(&lt;span style=&#34;line-height: 1.6;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;function&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6;&#34;&gt;req,res&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;11.&lt;/span&gt;    db.open(&lt;span style=&#34;line-height: 1.6;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;function&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6;&#34;&gt;err,db&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;12.&lt;/span&gt;        &lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;if&lt;/span&gt;(err)&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;line-height: 1.6;&#34;&gt;console&lt;/span&gt;.error(err);&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;13.&lt;/span&gt;        &lt;span style=&#34;line-height: 1.6;&#34;&gt;console&lt;/span&gt;.log(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;apos;* mongodb connected&amp;apos;&lt;/span&gt;);&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;14.&lt;/span&gt;        db.collection(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;apos;foo&amp;apos;&lt;/span&gt;).save(&amp;#123;test:&lt;span style=&#34;line-height: 1.6;&#34;&gt;1&lt;/span&gt;&amp;#125;,&lt;span style=&#34;line-height: 1.6;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;function&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6;&#34;&gt;err,result&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;15.&lt;/span&gt;            res.end(&lt;span style=&#34;line-height: 1.6;&#34;&gt;JSON&lt;/span&gt;.stringify(result,&lt;span style=&#34;line-height: 1.6; color: #0086b3;&#34;&gt;null&lt;/span&gt;,&lt;span style=&#34;line-height: 1.6;&#34;&gt;2&lt;/span&gt;));&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;16.&lt;/span&gt;            db.close();&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;17.&lt;/span&gt;        &amp;#125;);&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;18.&lt;/span&gt;    &amp;#125;)&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;19.&lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;20.&lt;/span&gt;&amp;#125;);&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x6BCF;&amp;#x6765;&amp;#x4E00;&amp;#x4E2A;http&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x5C31;&amp;#x5F00;&amp;#x5173;&amp;#x4E00;&amp;#x6B21;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x3002;&amp;#x66F4;&amp;#x641E;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;&lt;code style=&#34;font-family: &amp;apos;Source Code Pro&amp;apos;,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;&#34;&gt;new mongodb.Server&lt;/code&gt;&amp;#x7684;&amp;#x53C2;&amp;#x6570;server_options&amp;#x91CC;&amp;#x53EF;&amp;#x4EE5;&amp;#x6709;&amp;#x4E00;&amp;#x4E2A;poolSize&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x5C31;&amp;#x662F;5&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x6BCF;&amp;#x5F00;&amp;#x4E00;&amp;#x6B21;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#xFF0C;&amp;#x5B9E;&amp;#x9645;&amp;#x4E0A;&amp;#x662F;&amp;#x5F00;&amp;#x4E86;5&amp;#x4E2A;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x8FDE;&amp;#x63A5;&amp;#x3002;&amp;#x8FD9;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x6211;&amp;#x4EEC;&amp;#x7ECF;&amp;#x5E38;&amp;#x5728;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#x8FD0;&amp;#x884C;&amp;#x7EC8;&amp;#x7AEF;&amp;#x4E2D;&amp;#x7ECF;&amp;#x5E38;&amp;#x81F3;&amp;#x5C11;&amp;#x770B;&amp;#x89C1;5&amp;#x4E2A;connections&amp;#x7684;&amp;#x539F;&amp;#x56E0;&amp;#x3002;&amp;#x8FD9;&amp;#x4E5F;&amp;#x662F;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x6211;&amp;#x4EEC;connections&amp;#x75AF;&amp;#x6DA8;&amp;#x7684;&amp;#x539F;&amp;#x56E0;&amp;#x3002; &lt;br&gt;&amp;#x53E6;&amp;#x5916;&amp;#x5728;old style&amp;#x64CD;&amp;#x4F5C;&amp;#x4EE3;&amp;#x7801;&amp;#x4E2D;&amp;#xFF0C;&amp;#x8FD8;&amp;#x6709;&amp;#x4E00;&amp;#x70B9;&amp;#x503C;&amp;#x5F97;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x662F;&amp;#xFF0C;close&amp;#x662F;&amp;#x4E0D;&amp;#x4F1A;close&amp;#x8BFB;&amp;#x8FDE;&amp;#x63A5;&amp;#x7684;&amp;#xFF0C;&amp;#x5B83;&amp;#x53EA;&amp;#x4F1A;close&amp;#x5199;&amp;#x8FDE;&amp;#x63A5;&amp;#xFF0C;&amp;#x8981;&amp;#x5F3A;&amp;#x5236;close&amp;#x6240;&amp;#x6709;&amp;#x8FDE;&amp;#x63A5;&amp;#x8981;&amp;#x7528;close(true)&amp;#x3002;&lt;/p&gt;&lt;blockquote style=&#34;padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;&#34;&gt;&lt;p style=&#34;margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;&#34;&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;close&lt;/strong&gt; &lt;br&gt;Close the current db connection, including all the child db instances. Emits close event and calls optional callback.&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;close([&lt;em style=&#34;line-height: 1.6;&#34;&gt;forceClose&lt;/em&gt;], &lt;em style=&#34;line-height: 1.6;&#34;&gt;callback&lt;/em&gt;) &lt;br&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;Arguments&lt;/strong&gt;:  &lt;/p&gt;&lt;ul style=&#34;margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;&#34;&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;[forceClose]&lt;/strong&gt; (&lt;em style=&#34;line-height: 1.6;&#34;&gt;boolean&lt;/em&gt;) &amp;#x2013; connection can never be reused.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;callback&lt;/strong&gt; (&lt;em style=&#34;line-height: 1.6;&#34;&gt;function&lt;/em&gt;) &amp;#x2013; this will be called after executing this method. The first parameter will contain the Error object if an error occurred, or null otherwise. While the second parameter will contain the results or null if an error occurred.&lt;/li&gt;&lt;/ul&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;Returns&lt;/strong&gt;:    null&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;New Style&lt;/h3&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x53C2;&amp;#x8003;&amp;#x5B98;&amp;#x65B9;&amp;#x4EE3;&amp;#x7801;&amp;#xFF1A;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;pre style=&#34;font-family: &amp;apos;Source Code Pro&amp;apos;,monospace; white-space: pre-wrap; display: block; font-size: .9em; word-wrap: break-word; color: #333; background-color: rgba(102,128,153,0.05); word-break: break-all; padding: 0; margin: 0 0 1.1em; line-height: 1.6; border: 0; border-radius: 5px; text-align: start; position: relative;&#34;&gt;&lt;code style=&#34;font-family: &amp;apos;Source Code Pro&amp;apos;,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #333333; display: block; background: white; overflow-x: auto; padding: 1.3em 2em; padding-left: 3.3em;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;1.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; express = &lt;span style=&#34;line-height: 1.6;&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;apos;express&amp;apos;&lt;/span&gt;); &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;2.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; mongodb = &lt;span style=&#34;line-height: 1.6;&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;apos;mongodb&amp;apos;&lt;/span&gt;); &lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; app = express(); &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;3.&lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;4.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; MongoClient = &lt;span style=&#34;line-height: 1.6;&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;apos;mongodb&amp;apos;&lt;/span&gt;).MongoClient; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;5.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;var&lt;/span&gt; db; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;6.&lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;7.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #969896;&#34;&gt;// Initialize connection once MongoClient.connect(&amp;quot;mongodb://localhost:27017/integration_test&amp;quot;, &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;8.&lt;/span&gt;    db: &amp;#123; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;9.&lt;/span&gt;        native_parser: &lt;span style=&#34;line-height: 1.6; color: #0086b3;&#34;&gt;false&lt;/span&gt; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;10.&lt;/span&gt;    &amp;#125;, &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;11.&lt;/span&gt;    server: &amp;#123; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;12.&lt;/span&gt;        socketOptions: &amp;#123; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;13.&lt;/span&gt;            connectTimeoutMS: &lt;span style=&#34;line-height: 1.6;&#34;&gt;500&lt;/span&gt; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;14.&lt;/span&gt;        &amp;#125; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;15.&lt;/span&gt;    &amp;#125;, &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;16.&lt;/span&gt;    replSet: &amp;#123;&amp;#125;, &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;17.&lt;/span&gt;    mongos: &amp;#123;&amp;#125; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;18.&lt;/span&gt;&amp;#125;,&lt;span style=&#34;line-height: 1.6;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;function&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6;&#34;&gt;err, database&lt;/span&gt;) &lt;/span&gt;&amp;#123; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;19.&lt;/span&gt;    &lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;if&lt;/span&gt;(err) &lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;throw&lt;/span&gt; err; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;20.&lt;/span&gt;    db = database; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;21.&lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;22.&lt;/span&gt;    &lt;span style=&#34;line-height: 1.6; color: #969896;&#34;&gt;// Start the application after the database connection is ready &lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;23.&lt;/span&gt;    app.listen(&lt;span style=&#34;line-height: 1.6;&#34;&gt;3000&lt;/span&gt;); &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;24.&lt;/span&gt;    &lt;span style=&#34;line-height: 1.6;&#34;&gt;console&lt;/span&gt;.log(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;quot;Listening on port 3000&amp;quot;&lt;/span&gt;); &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;25.&lt;/span&gt;&amp;#125;); &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;26.&lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;27.&lt;/span&gt;&lt;span style=&#34;line-height: 1.6; color: #969896;&#34;&gt;// Reuse database object in request handlers &lt;/span&gt;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;28.&lt;/span&gt;app.get(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;, &lt;span style=&#34;line-height: 1.6;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;function&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6;&#34;&gt;req, res&lt;/span&gt;) &lt;/span&gt;&amp;#123;           &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;29.&lt;/span&gt;    db.collection(&lt;span style=&#34;line-height: 1.6; color: #df5000;&#34;&gt;&amp;quot;replicaset_mongo_client_collection&amp;quot;&lt;/span&gt;).find(&amp;#123;&amp;#125;,&lt;span style=&#34;line-height: 1.6;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;function&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6;&#34;&gt;err, docs&lt;/span&gt;) &lt;/span&gt;&amp;#123; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;30.&lt;/span&gt;        docs.each(&lt;span style=&#34;line-height: 1.6;&#34;&gt;&lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;function&lt;/span&gt;(&lt;span style=&#34;line-height: 1.6;&#34;&gt;err, doc&lt;/span&gt;) &lt;/span&gt;&amp;#123; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;31.&lt;/span&gt;            &lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;if&lt;/span&gt;(doc) &amp;#123; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;32.&lt;/span&gt;                &lt;span style=&#34;line-height: 1.6;&#34;&gt;console&lt;/span&gt;.log(doc); &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;33.&lt;/span&gt;            &amp;#125; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;34.&lt;/span&gt;            &lt;span style=&#34;line-height: 1.6; color: #a71d5d;&#34;&gt;else&lt;/span&gt; &amp;#123;&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;35.&lt;/span&gt;                res.end(); &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;36.&lt;/span&gt;            &amp;#125; &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;37.&lt;/span&gt;        &amp;#125;);&lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;38.&lt;/span&gt;    &amp;#125;); &lt;br&gt;&lt;span style=&#34;line-height: 1.6; color: #969896; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;&#34;&gt;39.&lt;/span&gt;&amp;#125;);&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h3 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;MongoClient.connect options&lt;/h3&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x4E3B;&amp;#x8981;&amp;#x6709;&amp;#x6765;&amp;#x81EA;4&amp;#x4E2A;&amp;#x65B9;&amp;#x9762;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&amp;#xFF1A;&lt;/p&gt;&lt;ul style=&#34;margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;&#34;&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;db&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;server&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;replica set&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;mongos &lt;br&gt;&amp;#x540E;&amp;#x4E24;&amp;#x4E2A;&amp;#x9488;&amp;#x5BF9;sharding&amp;#xFF0C;&amp;#x8FD9;&amp;#x6B21;&amp;#x6211;&amp;#x4EEC;&amp;#x4E3B;&amp;#x8981;&amp;#x5173;&amp;#x6CE8;&amp;#x524D;&amp;#x4E24;&amp;#x4E2A;&amp;#x3002;&amp;#x4ECE;&amp;#x5B98;&amp;#x65B9;&amp;#x6587;&amp;#x6863;&amp;#x91CC;&amp;#x6311;&amp;#x51FA;&amp;#x51E0;&amp;#x6761;&amp;#x914D;&amp;#x7F6E;&amp;#x7F57;&amp;#x5217;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF1A;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h4 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;db: A hash of options at the db level overriding or adjusting functionality not supported by the url&lt;/h4&gt;&lt;ul style=&#34;margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;&#34;&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;w&lt;/strong&gt;, {Number/String, &amp;gt; -1 || &amp;#x2018;majority&amp;#x2019;} the write concern for the operation where &amp;lt; 1 is no acknowledgment of write and w &amp;gt;= 1 or w = &amp;#x2018;majority&amp;#x2019; acknowledges the write&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;wtimeout, {Number, 0} set the timeout for waiting for write concern to finish (combines with w option)&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;fsync, (Boolean, default:false) write waits for fsync before returning&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;journal&lt;/strong&gt;, (Boolean, default:false) write waits for journal sync before returning&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;readPreference {String}, the preferred read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST).&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;native_parser {Boolean, default:false}, use c++ bson parser.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;forceServerObjectId {Boolean, default:false}, force server to create _id fields instead of client.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;pkFactory {Object}, object overriding the basic ObjectID primary key generation.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;serializeFunctions {Boolean, default:false}, serialize functions.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;raw {Boolean, default:false}, perform operations using raw bson buffers.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;recordQueryStats {Boolean, default:false}, record query statistics during execution.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;retryMiliSeconds {Number, default:5000}, number of milliseconds between retries.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;numberOfRetries {Number, default:5}, number of retries off connection.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;bufferMaxEntries {Number, default: -1}, sets a cap on how many operations the driver will buffer up before giving up on getting a working connection, default is -1 which is unlimited.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;h4 style=&#34;font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;&#34;&gt;server: A hash of options at the server level not supported by the url.&lt;/h4&gt;&lt;ul style=&#34;margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;&#34;&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;readPreference {String, default:null}, set&amp;#x2019;s the read preference (ReadPreference.PRIMARY, ReadPreference.PRIMARY_PREFERRED, ReadPreference.SECONDARY, ReadPreference.SECONDARY_PREFERRED, ReadPreference.NEAREST)&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;ssl {Boolean, default:false}, use ssl connection (needs to have a mongod server with ssl support)&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;slaveOk {Boolean, default:false}, legacy option allowing reads from secondary, use readPrefrence instead.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;&lt;strong style=&#34;font-weight: bold; line-height: 1.6;&#34;&gt;poolSize&lt;/strong&gt; {Number, default:1}, number of connections in the connection pool, set to 1 as default for legacy reasons.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;socketOptions {Object, default:null}, an object containing socket options to use (noDelay:(boolean), keepAlive:(number), connectTimeoutMS:(number), socketTimeoutMS:(number))&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;logger {Object, default:null}, an object representing a logger that you want to use, needs to support functions debug, log, error ({error:function(message, object) {}, log:function(message, object) {}, debug:function(message, object) {&amp;#125;&amp;#125;).&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;auto_reconnect {Boolean, default:false}, reconnect on error.&lt;/li&gt;&lt;li style=&#34;line-height: 1.6;&#34;&gt;disableDriverBSONSizeCheck {Boolean, default:false}, force the server to error if the BSON message is to big&lt;/li&gt;&lt;/ul&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x6211;&amp;#x4EEC;&amp;#x5173;&amp;#x6CE8;&amp;#x7684;&amp;#x9009;&amp;#x9879;&amp;#xFF0C;&amp;#x6211;&amp;#x7528;&amp;#x7C97;&amp;#x4F53;&amp;#x505A;&amp;#x4E86;&amp;#x6807;&amp;#x6CE8;&amp;#x3002;&lt;/p&gt;&lt;p style=&#34;margin: 0 0 1.1em; line-height: 1.6;&#34;&gt;&amp;#x53E6;&amp;#x5916;&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x524D;&amp;#x6587;&amp;#x4E2D;&amp;#x63D0;&amp;#x5230;&amp;#xFF0C;&amp;#x6709;&amp;#x4E9B;&amp;#x6587;&amp;#x7AE0;&amp;#x63A8;&amp;#x8350;&amp;#x7528;generic-pool&amp;#x4E3A;mongo&amp;#x8FDE;&amp;#x63A5;&amp;#x63D0;&amp;#x4F9B;&amp;#x8FDE;&amp;#x63A5;&amp;#x6C60;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#xFF0C;&amp;#x6211;&amp;#x53D1;&amp;#x73B0;&lt;code style=&#34;font-family: &amp;apos;Source Code Pro&amp;apos;,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;&#34;&gt;MongoClient.connect&lt;/code&gt;&amp;#x7684;option&amp;#x91CC;&amp;#x5C31;&amp;#x6709;poolSize&amp;#x3002;&amp;#x5728;&amp;#x5B9E;&amp;#x9645;&amp;#x9879;&amp;#x76EE;&amp;#x4E2D;&amp;#x76F4;&amp;#x63A5;&amp;#x5C06;&amp;#x4E4B;&amp;#x8D4B;&amp;#x4E3A;100&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x5F97;&amp;#x5230;&amp;#x4E0D;&amp;#x9519;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#x3002;&lt;/p&gt;&lt;/div&gt;&lt;div style=&#34;line-height: 1.6;&#34;&gt;&lt;/div&gt;&lt;center style=&#34;display:none&#34;&gt;%23MongoDB%u8FDE%u63A5%0A@%28%u5B66%u4E60%u7B14%u8BB0%29%5Bmongo%5D%0A%23%23%u540D%u8BCD%u89E3%u91CA%0A%23%23%23%20shard%0A%u5B98%u65B9%u6587%u6863%5BSharding%20Introduction%5D%28https%3A//docs.mongodb.org/manual/core/sharding-introduction/%29%uFF1A%0A%3E%20Sharding%20is%20a%20method%20for%20storing%20data%20across%20multiple%20machines.%0A%0A%u4E2D%u6587%u79F0%u4E3A%u5206%u7247%u3002%u53C2%u8003%5B8%u5929%u5B66%u901AMongoDB%u2014%u2014%u7B2C%u516D%u5929%20%u5206%u7247%u6280%u672F%5D%28https%3A//www.evernote.com/shard/s24/nl/697376823/c9ca296a-ae2b-4833-bcb5-a37213b4cafc/%29%u3002%0A%0A%23%23%23%20sharded%20cluster%0A%u7247%u7C07%0A%0A%23%23%23%20replica%20set%0A%3EA%20replica%20set%20in%20MongoDB%20is%20a%20group%20of%20mongod%20processes%20that%20maintain%20the%20same%20data%20set.%20Replica%20sets%20provide%20redundancy%20and%20high%20availability%2C%20and%20are%20the%20basis%20for%20all%20production%20deployments.%20%0A%0A%u6BCF%u4E00%u4E2Areplica%20set%u53EF%u4EE5%u6709%u81EA%u5DF1%u7684tag%u6765%u63A7%u5236read%20preference%u548Cwrite%20concern%uFF0C%u53C2%u8003%u5B98%u65B9%u6587%u6863%5BConfigure%20Replica%20Set%20Tag%20Sets%5D%28https%3A//docs.mongodb.org/manual/tutorial/configure-replica-set-tag-sets/%23replica-set-configuration-tag-sets%29%u3002%0A%0A%23%23%23%20write%20concern%0A%u5B98%u65B9%u6587%u6863%5BWrite%20Concern%5D%28https%3A//docs.mongodb.org/manual/reference/write-concern/%29%0A%3EWrite%20concern%20describes%20the%20level%20of%20acknowledgement%20requested%20from%20MongoDB%20for%20write%20operations%20to%20a%20standalone%20mongod%20or%20to%20replica%20sets%20or%20to%20sharded%20clusters.%20In%20sharded%20clusters%2C%20mongos%20instances%20will%20pass%20the%20write%20concern%20on%20to%20the%20shards.%0A%0AWrite%20concern%20can%20include%20the%20following%20fields%3A%0A%3E%7B%20w%3A%20%5C%3Cvalue%5C%3E%2C%20j%3A%20%5C%3Cboolean%5C%3E%2C%20wtimeout%3A%20%5C%3Cnumber%5C%3E%20%7D%0A%3E%20-%20w%3A%201%20-%20%u6709acknowledgement%uFF0C%u9ED8%u8BA4%u503C%3B%200%20-%20%u6CA1%u6709acknowledgement%uFF0C%u6570%u636E%u5E93%u53EF%u80FD%u628A%u9519%u8BEF%u4FE1%u606F%u4F20%u7ED9%u5BA2%u6237%u7AEF%0A%3E%20-%20w%3A%20%u2018majority%u2019%20%26%20%27%5C%3Ctag%20set%3E%5C%27%0A%09*%20%u524D%u8005%uFF1ARequests%20acknowledgment%20that%20write%20operations%20have%20propagated%20to%20the%20majority%20of%20voting%20nodes%20%5B1%5D%2C%20including%20the%20primary%2C%20**and%20have%20been%20written%20to%20the%20on-disk%20journal%20for%20these%20nodes**.%20%u6B64%u9009%u9879%u5305%u542B%u4E86j%3A%20true%u3002%0A%09*%20%u540E%u8005%uFF1ARequests%20acknowledgement%20that%20the%20write%20operations%20have%20propagated%20to%20a%20replica%20set%20member%20with%20the%20specified%20tag.%0A%3E%20-%20j%3A%20true%20%26%20false%2C%20%u51B3%u5B9A%u662F%u5426%u5199journal%0A%3E%20-%20wtimeout%3A%20This%20option%20specifies%20a%20time%20limit%2C%20in%20milliseconds%2C%20for%20the%20write%20concern.%20wtimeout%20is%20only%20applicable%20for%20w%20values%20greater%20than%201.%0A%0A%3EIf%20you%20specify%20w%3A%200%20but%20include%20j%3A%20true%2C%20the%20j%3A%20true%20prevails%20to%20request%20acknowledgement%20from%20the%20standalone%20mongod%20or%20the%20primary%20of%20a%20replica%20set.%0A%0A%23%23%23%20journal%0A%3E%20A%20sequential%2C%20binary%20transaction%20log%20used%20to%20bring%20the%20database%20into%20a%20valid%20state%20in%20the%20event%20of%20a%20hard%20shutdown.%20Journaling%20writes%20data%20first%20to%20the%20journal%20and%20then%20to%20the%20core%20data%20files.%20MongoDB%20enables%20journaling%20by%20default%20for%2064-bit%20builds%20of%20MongoDB%20version%202.0%20and%20newer.%20Journal%20files%20are%20pre-allocated%20and%20exist%20as%20files%20in%20the%20data%20directory.%20See%20%5BJournaling%5D%28https%3A//docs.mongodb.org/manual/core/journaling/%29.%0A%0A%23%23%23%20mongos%0A**%5Bmongos%5D%28https%3A//docs.mongodb.org/manual/reference/program/mongos/%29**%20for%20%u201CMongoDB%20Shard%2C%u201D%20is%20a%20routing%20service%20for%20MongoDB%20shard%20configurations%20that%20processes%20queries%20from%20the%20application%20layer%2C%20and%20determines%20the%20location%20of%20this%20data%20in%20the%20sharded%20cluster%2C%20in%20order%20to%20complete%20these%20operations.%20From%20the%20perspective%20of%20the%20application%2C%20a%20mongos%20instance%20behaves%20identically%20to%20any%20other%20MongoDB%20instance.%0A%0A%23%23mongos%20vs.%20mongod%0Amongodb%u91C7%u7528%u5C06%u96C6%u5408%u8FDB%u884C%u62C6%u5206%uFF0C%u7136%u540E%u5C06%u62C6%u5206%u7684%u6570%u636E%u5747%u644A%u5230%u51E0%u4E2A%u7247%u4E0A%u7684%u4E00%u79CD%u89E3%u51B3%u65B9%u6848%u3002%0A%21%5BAlt%20text%5D%28./1454111696209.png%29%0A%u7B11%u8138%u662F%u7528%u6237%uFF0Cconfig%u662Fconfig%u670D%u52A1%u5668%uFF0C%u4E5F%u662F%u4E00%u4E2Amongod%u7684%u6570%u636E%u5E93%0A%0A%23%23%u8FDE%u63A5mongo%u6570%u636E%u5E93%0A%u6211%u6536%u96C6%u4E86%u597D%u51E0%u7BC7%u8BB2%u5982%u4F55%u66F4%u597D%u7684%u8FDE%u63A5mongo%u6570%u636E%u5E93%u7684%u6587%u7AE0%u3002%u53C2%u8003%u4E0B%u9762%u7684%u7B14%u8BB0%uFF1A%0A%5Bmongodb%u9A71%u52A8%u7684%u6B63%u786E%u4F7F%u7528%u65B9%u6CD5%5D%28https%3A//www.evernote.com/shard/s24/nl/697376807/5bc8092d-bccf-40cd-9ad5-9ec0b28611dd/%29%0A%5Bmongodb%20%u8FDE%u63A5%u7684%u95EE%u9898%5D%28https%3A//www.evernote.com/shard/s24/nl/697376807/bb648a45-3206-4fb9-b0a4-e4024638f6f5/%29%0A%5Bnode-mongo-native1.3.19%u8FDE%u63A5mongo%u7684%u6700%u4F18%u65B9%u6CD5%5D%28https%3A//www.evernote.com/shard/s24/nl/697376807/eac602ff-a873-4d71-bc7b-0a5650905d76/%29%0A%u8FD8%u6709node.js%u7684MongoDB%20driverd%u7684%u5B98%u65B9%u4ECB%u7ECD%uFF1A%0A%5BMongoClient%20or%20how%20to%20connect%20in%20a%20new%20and%20better%20way%5D%28https%3A//www.evernote.com/shard/s24/nl/697376807/ee17ecea-566c-4f2f-8138-79cb8ea25d8f/%29%0A%u8FD8%u6709%u4EBA%u7528%u8FDE%u63A5%u6C60%u7684%0A%5B%u751F%u4EA7%u7EA7Nodejs%u5F00%u53D1%u5B9E%u8DF5-%u4F7F%u7528%u8FDE%u63A5%u6C60%5D%28https%3A//www.evernote.com/shard/s24/nl/697376807/53bb4dd3-fd7f-4780-93ae-67faee3637a5/%29%0A%23%23%23Old%20Style%0A%u5148%u770B%u4E00%u6BB5%u4EE3%u7801%0A%60%60%60javascript%0Avar%20server_options%3D%7B%7D%3B%0Avar%20db_options%3D%7Bw%3A-1%7D%3B%0A%0Avar%20mongodb%20%3D%20require%28%22mongodb%22%29%2C%0A%20%20%20%20mongoserver%20%3D%20new%20mongodb.Server%28%27localhost%27%2C%2027017%2Cserver_options%20%29%2C%0A%20%20%20%20db%20%3D%20new%20mongodb.Db%28%27test%27%2C%20mongoserver%2C%20db_options%29%3B%0A%0Avar%20http%3Drequire%28%27http%27%29%3B%0A%0Avar%20server%3Dhttp.createServer%28function%28req%2Cres%29%7B%0A%20%20%20%20db.open%28function%28err%2Cdb%29%7B%0A%20%20%20%20%20%20%20%20if%28err%29return%20console.error%28err%29%3B%0A%20%20%20%20%20%20%20%20console.log%28%27*%20mongodb%20connected%27%29%3B%0A%20%20%20%20%20%20%20%20db.collection%28%27foo%27%29.save%28%7Btest%3A1%7D%2Cfunction%28err%2Cresult%29%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20res.end%28JSON.stringify%28result%2Cnull%2C2%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20db.close%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%29%0A%0A%7D%29%3B%0A%60%60%60%0A%u6BCF%u6765%u4E00%u4E2Ahttp%u8BF7%u6C42%uFF0C%u5C31%u5F00%u5173%u4E00%u6B21%u6570%u636E%u5E93%u3002%u66F4%u641E%u7684%u662F%uFF0C%60new%20mongodb.Server%60%u7684%u53C2%u6570server_options%u91CC%u53EF%u4EE5%u6709%u4E00%u4E2ApoolSize%uFF0C%u5982%u679C%u4E0D%u6307%u5B9A%u7684%u8BDD%uFF0C%u9ED8%u8BA4%u503C%u5C31%u662F5%uFF0C%u4E5F%u5C31%u662F%u8BF4%u6BCF%u5F00%u4E00%u6B21%u6570%u636E%u5E93%uFF0C%u5B9E%u9645%u4E0A%u662F%u5F00%u4E865%u4E2A%u6570%u636E%u5E93%u8FDE%u63A5%u3002%u8FD9%u4E5F%u5C31%u662F%u4E3A%u4EC0%u4E48%u6211%u4EEC%u7ECF%u5E38%u5728%u6570%u636E%u5E93%u8FD0%u884C%u7EC8%u7AEF%u4E2D%u7ECF%u5E38%u81F3%u5C11%u770B%u89C15%u4E2Aconnections%u7684%u539F%u56E0%u3002%u8FD9%u4E5F%u662F%u4E3A%u4EC0%u4E48%u6211%u4EECconnections%u75AF%u6DA8%u7684%u539F%u56E0%u3002%0A%u53E6%u5916%u5728old%20style%u64CD%u4F5C%u4EE3%u7801%u4E2D%uFF0C%u8FD8%u6709%u4E00%u70B9%u503C%u5F97%u6CE8%u610F%u7684%u662F%uFF0Cclose%u662F%u4E0D%u4F1Aclose%u8BFB%u8FDE%u63A5%u7684%uFF0C%u5B83%u53EA%u4F1Aclose%u5199%u8FDE%u63A5%uFF0C%u8981%u5F3A%u5236close%u6240%u6709%u8FDE%u63A5%u8981%u7528close%28true%29%u3002%0A%3E**close**%0AClose%20the%20current%20db%20connection%2C%20including%20all%20the%20child%20db%20instances.%20Emits%20close%20event%20and%20calls%20optional%20callback.%0A%0Aclose%28%5B*forceClose*%5D%2C%20*callback*%29%0A**Arguments**%3A%09%0A*%20**%5BforceClose%5D**%20%28*boolean*%29%20%u2013%20connection%20can%20never%20be%20reused.%0A*%20**callback**%20%28*function*%29%20%u2013%20this%20will%20be%20called%20after%20executing%20this%20method.%20The%20first%20parameter%20will%20contain%20the%20Error%20object%20if%20an%20error%20occurred%2C%20or%20null%20otherwise.%20While%20the%20second%20parameter%20will%20contain%20the%20results%20or%20null%20if%20an%20error%20occurred.%0A%0A**Returns**%3A%09null%0A%23%23%23New%20Style%0A%u53C2%u8003%u5B98%u65B9%u4EE3%u7801%uFF1A%0A%60%60%60javascript%0Avar%20express%20%3D%20require%28%27express%27%29%3B%20%0Avar%20mongodb%20%3D%20require%28%27mongodb%27%29%3B%20var%20app%20%3D%20express%28%29%3B%20%0A%0Avar%20MongoClient%20%3D%20require%28%27mongodb%27%29.MongoClient%3B%20%0Avar%20db%3B%20%0A%0A//%20Initialize%20connection%20once%20MongoClient.connect%28%22mongodb%3A//localhost%3A27017/integration_test%22%2C%20%7B%20%0A%09db%3A%20%7B%20%0A%09%09native_parser%3A%20false%20%0A%09%7D%2C%20%0A%09server%3A%20%7B%20%0A%09%09socketOptions%3A%20%7B%20%0A%09%09%09connectTimeoutMS%3A%20500%20%0A%09%09%7D%20%0A%09%7D%2C%20%0A%09replSet%3A%20%7B%7D%2C%20%0A%09mongos%3A%20%7B%7D%20%0A%7D%2Cfunction%28err%2C%20database%29%20%7B%20%0A%09if%28err%29%20throw%20err%3B%20%0A%09db%20%3D%20database%3B%20%0A%0A%09//%20Start%20the%20application%20after%20the%20database%20connection%20is%20ready%20%0A%09app.listen%283000%29%3B%20%0A%09console.log%28%22Listening%20on%20port%203000%22%29%3B%20%0A%7D%29%3B%20%0A%0A//%20Reuse%20database%20object%20in%20request%20handlers%20%0Aapp.get%28%22/%22%2C%20function%28req%2C%20res%29%20%7B%20%09%09%09%0A%09db.collection%28%22replicaset_mongo_client_collection%22%29.find%28%7B%7D%2Cfunction%28err%2C%20docs%29%20%7B%20%0A%09%09docs.each%28function%28err%2C%20doc%29%20%7B%20%0A%09%09%09if%28doc%29%20%7B%20%0A%09%09%09%09console.log%28doc%29%3B%20%0A%09%09%09%7D%20%0A%09%09%09else%20%7B%0A%09%09%09%09res.end%28%29%3B%20%0A%09%09%09%7D%20%0A%09%09%7D%29%3B%0A%09%7D%29%3B%20%0A%7D%29%3B%0A%60%60%60%0A%23%23%23MongoClient.connect%20options%0A%u4E3B%u8981%u6709%u6765%u81EA4%u4E2A%u65B9%u9762%u7684%u8BBE%u7F6E%uFF1A%0A-%20db%0A-%20server%0A-%20replica%20set%0A-%20mongos%0A%u540E%u4E24%u4E2A%u9488%u5BF9sharding%uFF0C%u8FD9%u6B21%u6211%u4EEC%u4E3B%u8981%u5173%u6CE8%u524D%u4E24%u4E2A%u3002%u4ECE%u5B98%u65B9%u6587%u6863%u91CC%u6311%u51FA%u51E0%u6761%u914D%u7F6E%u7F57%u5217%u4E00%u4E0B%uFF1A%0A%23%23%23%23db%3A%20A%20hash%20of%20options%20at%20the%20db%20level%20overriding%20or%20adjusting%20functionality%20not%20supported%20by%20the%20url%0A-%20**w**%2C%20%7BNumber/String%2C%20%3E%20-1%20%7C%7C%20%u2018majority%u2019%7D%20the%20write%20concern%20for%20the%20operation%20where%20%3C%201%20is%20no%20acknowledgment%20of%20write%20and%20w%20%3E%3D%201%20or%20w%20%3D%20%u2018majority%u2019%20acknowledges%20the%20write%0A-%20wtimeout%2C%20%7BNumber%2C%200%7D%20set%20the%20timeout%20for%20waiting%20for%20write%20concern%20to%20finish%20%28combines%20with%20w%20option%29%0A-%20fsync%2C%20%28Boolean%2C%20default%3Afalse%29%20write%20waits%20for%20fsync%20before%20returning%0A-%20**journal**%2C%20%28Boolean%2C%20default%3Afalse%29%20write%20waits%20for%20journal%20sync%20before%20returning%0A-%20readPreference%20%7BString%7D%2C%20the%20preferred%20read%20preference%20%28ReadPreference.PRIMARY%2C%20ReadPreference.PRIMARY_PREFERRED%2C%20ReadPreference.SECONDARY%2C%20ReadPreference.SECONDARY_PREFERRED%2C%20ReadPreference.NEAREST%29.%0A-%20native_parser%20%7BBoolean%2C%20default%3Afalse%7D%2C%20use%20c++%20bson%20parser.%0A-%20forceServerObjectId%20%7BBoolean%2C%20default%3Afalse%7D%2C%20force%20server%20to%20create%20_id%20fields%20instead%20of%20client.%0A-%20pkFactory%20%7BObject%7D%2C%20object%20overriding%20the%20basic%20ObjectID%20primary%20key%20generation.%0A-%20serializeFunctions%20%7BBoolean%2C%20default%3Afalse%7D%2C%20serialize%20functions.%0A-%20raw%20%7BBoolean%2C%20default%3Afalse%7D%2C%20perform%20operations%20using%20raw%20bson%20buffers.%0A-%20recordQueryStats%20%7BBoolean%2C%20default%3Afalse%7D%2C%20record%20query%20statistics%20during%20execution.%0A-%20retryMiliSeconds%20%7BNumber%2C%20default%3A5000%7D%2C%20number%20of%20milliseconds%20between%20retries.%0A-%20numberOfRetries%20%7BNumber%2C%20default%3A5%7D%2C%20number%20of%20retries%20off%20connection.%0A-%20bufferMaxEntries%20%7BNumber%2C%20default%3A%20-1%7D%2C%20sets%20a%20cap%20on%20how%20many%20operations%20the%20driver%20will%20buffer%20up%20before%20giving%20up%20on%20getting%20a%20working%20connection%2C%20default%20is%20-1%20which%20is%20unlimited.%0A%23%23%23%23server%3A%20A%20hash%20of%20options%20at%20the%20server%20level%20not%20supported%20by%20the%20url.%0A-%20readPreference%20%7BString%2C%20default%3Anull%7D%2C%20set%u2019s%20the%20read%20preference%20%28ReadPreference.PRIMARY%2C%20ReadPreference.PRIMARY_PREFERRED%2C%20ReadPreference.SECONDARY%2C%20ReadPreference.SECONDARY_PREFERRED%2C%20ReadPreference.NEAREST%29%0A-%20ssl%20%7BBoolean%2C%20default%3Afalse%7D%2C%20use%20ssl%20connection%20%28needs%20to%20have%20a%20mongod%20server%20with%20ssl%20support%29%0A-%20slaveOk%20%7BBoolean%2C%20default%3Afalse%7D%2C%20legacy%20option%20allowing%20reads%20from%20secondary%2C%20use%20readPrefrence%20instead.%0A-%20**poolSize**%20%7BNumber%2C%20default%3A1%7D%2C%20number%20of%20connections%20in%20the%20connection%20pool%2C%20set%20to%201%20as%20default%20for%20legacy%20reasons.%0A-%20socketOptions%20%7BObject%2C%20default%3Anull%7D%2C%20an%20object%20containing%20socket%20options%20to%20use%20%28noDelay%3A%28boolean%29%2C%20keepAlive%3A%28number%29%2C%20connectTimeoutMS%3A%28number%29%2C%20socketTimeoutMS%3A%28number%29%29%0A-%20logger%20%7BObject%2C%20default%3Anull%7D%2C%20an%20object%20representing%20a%20logger%20that%20you%20want%20to%20use%2C%20needs%20to%20support%20functions%20debug%2C%20log%2C%20error%20%28%7Berror%3Afunction%28message%2C%20object%29%20%7B%7D%2C%20log%3Afunction%28message%2C%20object%29%20%7B%7D%2C%20debug%3Afunction%28message%2C%20object%29%20%7B%7D%7D%29.%0A-%20auto_reconnect%20%7BBoolean%2C%20default%3Afalse%7D%2C%20reconnect%20on%20error.%0A-%20disableDriverBSONSizeCheck%20%7BBoolean%2C%20default%3Afalse%7D%2C%20force%20the%20server%20to%20error%20if%20the%20BSON%20message%20is%20to%20big%0A%0A%u6211%u4EEC%u5173%u6CE8%u7684%u9009%u9879%uFF0C%u6211%u7528%u7C97%u4F53%u505A%u4E86%u6807%u6CE8%u3002%0A%0A%u53E6%u5916%u6211%u4EEC%u5728%u524D%u6587%u4E2D%u63D0%u5230%uFF0C%u6709%u4E9B%u6587%u7AE0%u63A8%u8350%u7528generic-pool%u4E3Amongo%u8FDE%u63A5%u63D0%u4F9B%u8FDE%u63A5%u6C60%u3002%u4F46%u662F%uFF0C%u6211%u53D1%u73B0%60MongoClient.connect%60%u7684option%u91CC%u5C31%u6709poolSize%u3002%u5728%u5B9E%u9645%u9879%u76EE%u4E2D%u76F4%u63A5%u5C06%u4E4B%u8D4B%u4E3A100%uFF0C%u4E5F%u53EF%u4EE5%u5F97%u5230%u4E0D%u9519%u7684%u6548%u679C%u3002%0A&lt;/center&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; ]]></description>
        </item>
    </channel>
</rss>
