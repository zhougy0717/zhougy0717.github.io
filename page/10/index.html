<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"/>

<link rel="stylesheet" href="/css/main.css?v=7.0.1"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Big Ben">
<meta property="og:url" content="http://zhougy0717.github.io/page/10/index.html">
<meta property="og:site_name" content="Big Ben">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Big Ben">





  
  
  <link rel="canonical" href="http://zhougy0717.github.io/page/10/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Big Ben – 一个半吊子的编码爱好者</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Big Ben</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">一个半吊子的编码爱好者</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br/>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br/>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br/>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br/>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br/>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2016/01/09/QuickSort推导_-_The_Science_of_Programming/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/01/09/QuickSort推导_-_The_Science_of_Programming/" class="post-title-link" itemprop="url">QuickSort推导 - The Science of Programming</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-01-09 23:15:45" itemprop="dateCreated datePublished" datetime="2016-01-09T23:15:45+08:00">2016-01-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2016-01-27 16:26:59" itemprop="dateModified" datetime="2016-01-27T16:26:59+08:00">2016-01-27</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2016/01/09/QuickSort推导_-_The_Science_of_Programming/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2016/01/09/QuickSort推导_-_The_Science_of_Programming/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!DOCTYPE en-note SYSTEM 'http://xml.evernote.com/pub/enml2.dtd'><div class="enNote" style="color: #2c3f51; font-family: &apos;Helvetica Neue&apos;, Arial, &apos;Hiragino Sans GB&apos;, STHeiti, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, Song, sans-serif; line-height: 1.6;" title="" lang="v2" xml:lang="" dir=""><del style="position:relative;display:block;z-index:10;"><a style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;" href="http://marxi.co/#/?provider=evernote_int&amp;guid=b4fd2ff4-ca92-4b7e-adc5-da557b774722&amp;notebook=%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Edit</a></del><div style="color: #2c3f51; font-family: &apos;Helvetica Neue&apos;, Arial, &apos;Hiragino Sans GB&apos;, STHeiti, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, Song, sans-serif; line-height: 1.6;"><div style="line-height: 1.6;"><div style="line-height: 1.6;"></div><div style="line-height: 1.6;"><p style="margin: 0 0 1.1em; line-height: 1.6;"></p><p style="margin: 0 0 1.1em; color: rgba(44,63,81,0.3); line-height: 1.6;"><code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; background-color: #f9f2f4; white-space: normal; padding: 2px 5px; border-radius: 0; color: #fff; background: rgba(44,63,81,0.3); margin-right: 6px;">&#x5B66;&#x4E60;&#x7B14;&#x8BB0;</code> <code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; background-color: #f9f2f4; white-space: normal; padding: 2px 5px; color: rgba(44,63,81,0.5); border-radius: 0; background: rgba(102,128,153,0.075);">&#x8BFB;&#x4E66;&#x7B14;&#x8BB0;</code> <code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; background-color: #f9f2f4; white-space: normal; padding: 2px 5px; color: rgba(44,63,81,0.5); border-radius: 0; background: rgba(102,128,153,0.075);">Programming</code> </p><p style="margin: 0 0 1.1em; line-height: 1.6;"></p><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x7531;&#x4E8E;&#x8FD1;&#x65E5;&#x5F00;&#x53D1;&#x5355;&#x7247;&#x673A;&#x7A0B;&#x5E8F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5199;&#x5230;&#x4E00;&#x4E2A;&#x5C0F;&#x5FAA;&#x73AF;&#xFF0C;&#x4E0D;&#x80FD;&#x786E;&#x5B9A;&#x5176;&#x6B63;&#x786E;&#x6027;&#xFF0C;&#x8FDB;&#x800C;&#x60F3;&#x5230;&#x8FD9;&#x672C;&#x4E66;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x7B97;&#x662F;&#x4E00;&#x4E2A;&#x5C0F;&#x5C0F;&#x7684;&#x56DE;&#x987E;&#x3002;&#x672C;&#x4E66;&#x7684;&#x8BFB;&#x4E66;&#x7B14;&#x8BB0;&#x53C2;&#x8003;&#x8FD9;&#x7BC7;<a href="https://www.evernote.com/shard/s24/nl/697376807/c79122e8-c790-44b7-afa4-93eca3ad662e/" target="_blank" style="background: transparent; color: #1980e6; text-decoration: none;">The Science of Programming</a>&#x3002; <br>&#x6B63;&#x6240;&#x8C13;&#x6E29;&#x6545;&#x800C;&#x77E5;&#x65B0;&#xFF0C;&#x8FD9;&#x6B21;&#x91CD;&#x65B0;&#x6458;&#x8BFB;&#x53C8;&#x6709;&#x4E9B;&#x65B0;&#x7684;&#x6536;&#x83B7;&#x3002;&#x672C;&#x60F3;&#x4EE5;QuickSort&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x7EC3;&#x4E60;&#x6765;&#x8FD0;&#x7528;&#x672C;&#x4E66;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x7ED3;&#x679C;&#x5C1D;&#x8BD5;&#x4E86;&#x8BB8;&#x4E45;&#xFF0C;&#x53D1;&#x73B0;&#x8D8A;&#x9677;&#x8D8A;&#x6DF1;&#x3002;&#x6700;&#x540E;&#x8FD8;&#x662F;&#x627E;&#x4E86;&#x4E66;&#x4E0A;&#x7684;&#x4F8B;&#x5B50;&#xFF08;&#x4E66;&#x4E2D;&#x6709;QuickSort&#x7684;&#x4F8B;&#x5B50;&#xFF09;&#x3002;&#x672C;&#x6587;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x662F;&#x9610;&#x8FF0;&#x5982;&#x4F55;&#x63A8;&#x5BFC;QuickSort&#x7A0B;&#x5E8F;&#x672C;&#x8EAB;&#x3002;&#x5148;&#x6458;&#x53D6;&#x4E00;&#x4E9B;&#x91CD;&#x8981;&#x7684;&#x77E5;&#x8BC6;&#x70B9;,&#x518D;&#x5229;&#x7528;&#x8FD9;&#x4E9B;&#x77E5;&#x8BC6;&#x70B9;&#x6765;&#x63A8;&#x5BFC;QuickSort&#x3002;</p><div style="line-height: 1.6;"><div style="line-height: 1.6;"><div style="line-height: 1.6;"><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#quicksort&#x63A8;&#x5BFC;-the-science-of-programming" style="background: transparent; color: #1980e6; text-decoration: none;">QuickSort&#x63A8;&#x5BFC; - The Science of Programming</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#&#x77E5;&#x8BC6;&#x70B9;&#x68B3;&#x7406;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x77E5;&#x8BC6;&#x70B9;&#x68B3;&#x7406;</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#1-quantification&#x91CF;&#x5316;&#x539F;&#x4E66;42&#x8282;" style="background: transparent; color: #1980e6; text-decoration: none;">1. Quantification&#xFF08;&#x91CF;&#x5316;&#xFF09;[&#x539F;&#x4E66;4.2&#x8282;]</a></li><li style="line-height: 1.6;"><a href="#2-&#x4F55;&#x4E3A;wp&#x539F;&#x4E66;&#x7B2C;7&#x7AE0;" style="background: transparent; color: #1980e6; text-decoration: none;">2. &#x4F55;&#x4E3A;wp&#xFF1F;[&#x539F;&#x4E66;&#x7B2C;7&#x7AE0;]</a></li><li style="line-height: 1.6;"><a href="#3-&#x5FAA;&#x73AF;&#x68C0;&#x67E5;-&#x539F;&#x4E66;&#x7B2C;11&#x7AE0;" style="background: transparent; color: #1980e6; text-decoration: none;">3. &#x5FAA;&#x73AF;&#x68C0;&#x67E5; (&#x539F;&#x4E66;&#x7B2C;11&#x7AE0;)</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#invariant" style="background: transparent; color: #1980e6; text-decoration: none;">Invariant</a></li><li style="line-height: 1.6;"><a href="#bound" style="background: transparent; color: #1980e6; text-decoration: none;">Bound</a></li><li style="line-height: 1.6;"><a href="#checklist" style="background: transparent; color: #1980e6; text-decoration: none;">Checklist</a></li></ul></li><li style="line-height: 1.6;"><a href="#4-&#x5982;&#x4F55;&#x8FD0;&#x7528;&#x6240;&#x6709;&#x7684;&#x77E5;&#x8BC6;&#x6765;&#x5F00;&#x53D1;&#x4E00;&#x6BB5;&#x7A0B;&#x5E8F;&#x539F;&#x4E66;part-iii" style="background: transparent; color: #1980e6; text-decoration: none;">4. &#x5982;&#x4F55;&#x8FD0;&#x7528;&#x6240;&#x6709;&#x7684;&#x77E5;&#x8BC6;&#x6765;&#x5F00;&#x53D1;&#x4E00;&#x6BB5;&#x7A0B;&#x5E8F;&#xFF08;&#x539F;&#x4E66;PART III&#xFF09;</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#&#x63A8;&#x6D4B;command" style="background: transparent; color: #1980e6; text-decoration: none;">&#x63A8;&#x6D4B;Command</a></li><li style="line-height: 1.6;"><a href="#&#x83B7;&#x5F97;guard&#x539F;&#x4E66;&#x7B2C;15&#x7AE0;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x83B7;&#x5F97;Guard&#xFF08;&#x539F;&#x4E66;&#x7B2C;15&#x7AE0;&#xFF09;</a></li><li style="line-height: 1.6;"><a href="#&#x83B7;&#x5F97;&#x4E0D;&#x53D8;&#x91CF;invariant&#x539F;&#x4E66;&#x7B2C;16&#x7AE0;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x83B7;&#x5F97;&#x4E0D;&#x53D8;&#x91CF;Invariant&#xFF08;&#x539F;&#x4E66;&#x7B2C;16&#x7AE0;&#xFF09;</a></li></ul></li></ul></li><li style="line-height: 1.6;"><a href="#&#x63A8;&#x5BFC;quick-sort-&#x539F;&#x4E66;182&#x8282;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x63A8;&#x5BFC;Quick Sort &#xFF08;&#x539F;&#x4E66;18.2&#x8282;&#xFF09;</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#partition-&#x539F;&#x4E66;&#x7EC3;&#x4E60;165" style="background: transparent; color: #1980e6; text-decoration: none;">Partition &#xFF08;&#x539F;&#x4E66;&#x7EC3;&#x4E60;16.5&#xFF09;</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#&#x7531;r&#x83B7;&#x5F97;p" style="background: transparent; color: #1980e6; text-decoration: none;">&#x7531;R&#x83B7;&#x5F97;P</a></li><li style="line-height: 1.6;"><a href="#&#x7531;p-wedge-dalethbb-rightarrowr&#x63A8;&#x7B97;bb" style="background: transparent; color: #1980e6; text-decoration: none;">&#x7531;P &#x2138;BB R&#x63A8;&#x7B97;BB</a></li><li style="line-height: 1.6;"><a href="#bound-function" style="background: transparent; color: #1980e6; text-decoration: none;">Bound function</a></li><li style="line-height: 1.6;"><a href="#&#x63A8;&#x6D4B;command-1" style="background: transparent; color: #1980e6; text-decoration: none;">&#x63A8;&#x6D4B;command</a></li><li style="line-height: 1.6;"><a href="#&#x7531;commandpbb&#x83B7;&#x5F97;guard" style="background: transparent; color: #1980e6; text-decoration: none;">&#x7531;command+P+BB&#x83B7;&#x5F97;Guard</a></li><li style="line-height: 1.6;"><a href="#&#x9A8C;&#x8BC1;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x9A8C;&#x8BC1;</a></li></ul></li><li style="line-height: 1.6;"><a href="#sort" style="background: transparent; color: #1980e6; text-decoration: none;">Sort</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#&#x63A8;&#x5BFC;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x63A8;&#x5BFC;</a></li><li style="line-height: 1.6;"><a href="#c&#x4EE3;&#x7801;" style="background: transparent; color: #1980e6; text-decoration: none;">C&#x4EE3;&#x7801;</a></li></ul></li></ul></li></ul></li></ul></div></div></div></div><div style="line-height: 1.6;"><h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;" id="x77e5x8bc6x70b9x68b3x7406"><a name="&#x77E5;&#x8BC6;&#x70B9;&#x68B3;&#x7406;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x77E5;&#x8BC6;&#x70B9;&#x68B3;&#x7406;</a></h2></div><div style="line-height: 1.6;"><h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="1-quantificationxff08x91cfx5316xff09x539fx4e6642x8282"><a name="1-quantification&#x91CF;&#x5316;&#x539F;&#x4E66;42&#x8282;" style="background: transparent; color: #1980e6; text-decoration: none;">1. Quantification&#xFF08;&#x91CF;&#x5316;&#xFF09;[&#x539F;&#x4E66;4.2&#x8282;]</a></h3><ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">There exists <br>(<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">E</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>)</li><li style="line-height: 1.6;">For all <br>(<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">A</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>)</li><li style="line-height: 1.6;">Numerial <br>(<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">N</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>)</li></ul><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x4ED6;&#x4EEC;&#x6709;&#x4EE5;&#x4E0B;&#x7279;&#x6027;</p><blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;"><p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;">(<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">E</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;k+1: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>) = (<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">E</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;k: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>) V E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">k+1</sub> <br>(<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">A</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>) = <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa25fc1d4c7fd699a05e0f1026b59e75c" hash="84a4814842e4acaeef0aaab5905db7bd" align="" alt="" longdesc="" width="8.75" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>(<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">E</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa25fc1d4c7fd699a05e0f1026b59e75c" hash="84a4814842e4acaeef0aaab5905db7bd" align="" alt="" longdesc="" width="8.75" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>) <br>(<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">E</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>) = (<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">N</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>) <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa27bd5e00db840936296ead0783388e7" hash="cb82c987552ec5cddcbaa328af0a8ff6" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> 1 <br>(<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">A</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>) = (<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">N</em></strong> i: m<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>i\&lt;n: E<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>) = n-m</p></blockquote></div><div style="line-height: 1.6;"><h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="2-x4f55x4e3awpxff1fx539fx4e66x7b2c7x7ae0"><a name="2-&#x4F55;&#x4E3A;wp&#x539F;&#x4E66;&#x7B2C;7&#x7AE0;" style="background: transparent; color: #1980e6; text-decoration: none;">2. &#x4F55;&#x4E3A;wp&#xFF1F;[&#x539F;&#x4E66;&#x7B2C;7&#x7AE0;]</a></h3><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x539F;&#x4E66;&#x7684;&#x5B9A;&#x4E49;&#xFF1A;</p><blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;"><p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 1.1em; line-height: 1.6;">The Predicate Transformer wp</p><p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;">The set of all states such that execution of <strong style="font-weight: bold; line-height: 1.6;">S</strong> begun in any one of them <font color="Blue" style="line-height: 1.6;">is guaranteed to terminate in a finite amount of time</font> in a state satisfying <strong style="font-weight: bold; line-height: 1.6;">R</strong>.</p></blockquote><p style="margin: 0 0 1.1em; line-height: 1.6;">wp&#x901A;&#x5E38;&#x88AB;&#x7528;&#x6765;&#x8868;&#x8FBE;&#x4E00;&#x6BB5;&#x7A0B;&#x5E8F; <br></p><div style="line-height: 1.6;"><div style="max-width: none; position: relative; width: 100%; text-indent: 0; margin: 1em 0; max-height: none; min-width: 0; min-height: 0; line-height: 1.6; text-align: center; display: block;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG03c32f833d920051850275ffa6324566" hash="37cc3bbdac3df34c5b23d7310aaf218c" align="" alt="" longdesc="" width="60.375" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></div></div>&#x6216;&#x8005;&#x8FD9;&#x6837;&#x5199; <br><div style="line-height: 1.6;"><div style="max-width: none; position: relative; width: 100%; text-indent: 0; margin: 1em 0; max-height: none; min-width: 0; min-height: 0; line-height: 1.6; text-align: center; display: block;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG3b737dd9de754154bd2e10e1aaa6558e" hash="5b67eaf3b2d48d11fd84be851f6377bd" align="" alt="" longdesc="" width="89.25" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></div></div><p style="margin: 0 0 1.1em; line-height: 1.6;"><ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">Q:&#x524D;&#x6761;&#x4EF6;  </li><li style="line-height: 1.6;">S:&#x6267;&#x884C;&#x4EE3;&#x7801;&#xFF08;&#x539F;&#x6587;&#x79F0;&#x4E3A;commands&#xFF09;  </li><li style="line-height: 1.6;">R:&#x540E;&#x6761;&#x4EF6;</li></ul></p><p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">wp&#x7684;&#x7279;&#x6027;</strong></p><blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;"><p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;">1) wp(S,F) = F <br>2) wp(S ^ Q) ^ wp(S,R) = wp(S,Q ^ R ) <br>3) if Q then wp(S, Q ) <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(S, R) <br>4) wp(S wp(S, R)) <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(S ,Q v R) <br>5) wp(S, Q) V wp(S, R) = wp(S, Q V R) (for deterministic S)</p></blockquote></div><div style="line-height: 1.6;"><h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="3-x5faax73afx68c0x67e5-x539fx4e66x7b2c11x7ae0"><a name="3-&#x5FAA;&#x73AF;&#x68C0;&#x67E5;-&#x539F;&#x4E66;&#x7B2C;11&#x7AE0;" style="background: transparent; color: #1980e6; text-decoration: none;">3. &#x5FAA;&#x73AF;&#x68C0;&#x67E5; (&#x539F;&#x4E66;&#x7B2C;11&#x7AE0;)</a></h3><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x5B9A;&#x4E49; <br></p><div style="line-height: 1.6;"><div style="max-width: none; position: relative; width: 100%; text-indent: 0; margin: 1em 0; max-height: none; min-width: 0; min-height: 0; line-height: 1.6; text-align: center; display: block;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe465edf8f13ba36187b4c9635d96bfd6" hash="9ea08313eacca8ad962bd0703af28d53" align="" alt="" longdesc="" width="222.25" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></div></div><p style="margin: 0 0 1.1em; line-height: 1.6;"></p><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x7528;&#x6570;&#x5B66;&#x8BED;&#x8A00;&#x6807;&#x8BB0;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x5982;&#x4E0B;: <br>{Q} <br>{inv P: the invariant} <br>{bound t: the bound function} <br>{init IS: initialization command} <br><strong style="font-weight: bold; line-height: 1.6;">do</strong> <em style="line-height: 1.6;">B</em><sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">1</sub> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span> <em style="line-height: 1.6;">S</em><sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">1</sub> <br><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG57b4fd35de5ac4d431df453a7afdae6a" hash="9a7b40f485ba01644218cdce11477021" align="" alt="" longdesc="" width="35" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> <br><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGfbefdb00dce959ccd3d631faefdbe17b" hash="c22af2c3e9bf45d926d4f72309e30b18" align="" alt="" longdesc="" width="17.5" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> <em style="line-height: 1.6;">B</em><sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">n</sub> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span> <em style="line-height: 1.6;">S</em><sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">n</sub> <br><strong style="font-weight: bold; line-height: 1.6;">od</strong></p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="invariant"><a name="invariant" style="background: transparent; color: #1980e6; text-decoration: none;">Invariant</a></h4><blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;"><p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;"><font face="Arial" style="line-height: 1.6;">A predicate <strong style="font-weight: bold; line-height: 1.6;">P</strong> that is true <strong style="font-weight: bold; line-height: 1.6;">before and after each iteration</strong> of a loop.</font>  </p></blockquote><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x8FD9;&#x5C31;&#x662F;&#x8BF4;P&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x8981;&#x6210;&#x7ACB;&#xFF0C;&#x4E8E;&#x662F;&#x6709;  </p><ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">Q <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(IS, P)  </li><li style="line-height: 1.6;">P <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(DO, P ^ <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa25fc1d4c7fd699a05e0f1026b59e75c" hash="84a4814842e4acaeef0aaab5905db7bd" align="" alt="" longdesc="" width="8.75" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>BB)</li></ul></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="bound"><a name="bound" style="background: transparent; color: #1980e6; text-decoration: none;">Bound</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x53C8;&#x53EB;bound function</p><blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;"><p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;"><font face="Arial" style="line-height: 1.6;">The function changes at each iteration; the relation remains invariantly true. <br><strong style="font-weight: bold; line-height: 1.6;">each iteration decreases t by at least one&#xFF0C;so that termination is guaranteed to occur.</strong></font></p></blockquote><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x68C0;&#x67E5;bound&#x51FD;&#x6570;&#x786E;&#x4FDD;&#x5FAA;&#x73AF;&#x80FD;&#x7ED3;&#x675F;&#x3002;</p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="checklist"><a name="checklist" style="background: transparent; color: #1980e6; text-decoration: none;"><a name="checklist" style="background: transparent; color: #1980e6; text-decoration: none;">Checklist</a></a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;"><font color="IndianRed" size="6" style="line-height: 1.6;">&#x975E;&#x5E38;&#x91CD;&#x8981;!!!</font> <br><a href="http://undefined" target="_blank" style="background: transparent; color: #1980e6; text-decoration: none;"> </a></p><ol style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">Q <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(IS, P)</li><li style="line-height: 1.6;">P ^ B<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(S<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>, P)</li><li style="line-height: 1.6;">P ^ <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa25fc1d4c7fd699a05e0f1026b59e75c" hash="84a4814842e4acaeef0aaab5905db7bd" align="" alt="" longdesc="" width="8.75" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> R</li><li style="line-height: 1.6;">P ^ <strong style="font-weight: bold; line-height: 1.6;">BB</strong> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> (t &gt; 0)</li><li style="line-height: 1.6;">P ^ B<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(&#x201C;t<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">1</sub>:=t; S<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>&#x201C;, &#x201C;t &lt; t<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">1</sub>&#x201C;)  </li></ol><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x4F9D;&#x6B21;&#x9A8C;&#x8BC1;&#x8FD9;5&#x6761;&#xFF0C;&#x5C31;&#x80FD;&#x8BC1;&#x660E;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x7684;&#x6B63;&#x786E;&#x6027;&#x4E86;</p></div><div style="line-height: 1.6;"><h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="4-x5982x4f55x8fd0x7528x6240x6709x7684x77e5x8bc6x6765x5f00x53d1x4e00x6bb5x7a0bx5e8fxff08x539fx4e66part-iiixff09"><a name="4-&#x5982;&#x4F55;&#x8FD0;&#x7528;&#x6240;&#x6709;&#x7684;&#x77E5;&#x8BC6;&#x6765;&#x5F00;&#x53D1;&#x4E00;&#x6BB5;&#x7A0B;&#x5E8F;&#x539F;&#x4E66;part-iii" style="background: transparent; color: #1980e6; text-decoration: none;">4. &#x5982;&#x4F55;&#x8FD0;&#x7528;&#x6240;&#x6709;&#x7684;&#x77E5;&#x8BC6;&#x6765;&#x5F00;&#x53D1;&#x4E00;&#x6BB5;&#x7A0B;&#x5E8F;&#xFF08;&#x539F;&#x4E66;PART III&#xFF09;</a></h3></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x63a8x6d4bcommand"><a name="&#x63A8;&#x6D4B;command" style="background: transparent; color: #1980e6; text-decoration: none;">&#x63A8;&#x6D4B;Command</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x901A;&#x8FC7;&#x540E;&#x6761;&#x4EF6;R&#xFF0C;&#x6765;&#x63A8;&#x6D4B;&#x6267;&#x884C;&#x4EE3;&#x7801;(Command)&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;Programming as a Goal-Oriented Activity&#x3002;&#x8BE6;&#x60C5;&#x53C2;&#x770B;&#x539F;&#x4E66;&#x7B2C;14&#x7AE0;&#x3002;</p><blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;"><p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">Strategy for developing an alternative command</strong>: To invent a guarded command&#xFF0C;find a command C whose execution will establish postcondition R in at least some cases; find a Boolean B satisfying B<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>wp(C,R) and put them together to form B <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span>C. Continue to invent guarded commands until the precondition of the construct implies that at least one guard is true. - &#x539F;&#x6587;(14.7)</p></blockquote></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x83b7x5f97guardxff08x539fx4e66x7b2c15x7ae0xff09"><a name="&#x83B7;&#x5F97;guard&#x539F;&#x4E66;&#x7B2C;15&#x7AE0;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x83B7;&#x5F97;Guard&#xFF08;&#x539F;&#x4E66;&#x7B2C;15&#x7AE0;&#xFF09;</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x6240;&#x6709;&#x7684;&#x7F16;&#x7A0B;&#x90FD;&#x5E94;&#x8BE5;&#x662F;&#x7ED3;&#x679C;&#x5BFC;&#x5411;&#x7684;&#xFF08;&#x8FD9;&#x4E0E;&#x6D4B;&#x8BD5;&#x9A71;&#x52A8;&#x5F00;&#x53D1;TDD&#x7684;&#x601D;&#x60F3;&#x6697;&#x5408;&#xFF09;&#x3002;&#x6240;&#x4EE5;&#x540E;&#x6761;&#x4EF6;R&#x662F;&#x6700;&#x5148;&#x6709;&#x7684;&#x3002; <br>&#x5176;&#x6B21;&#xFF0C;&#x901A;&#x8FC7;P <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG3cfeff161df1c0deed36a445f1b82883" hash="a1dc9c2007d200d0f8d458647d205d45" align="" alt="" longdesc="" width="22.75" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> R&#x80FD;&#x5F97;&#x5230;<strong style="font-weight: bold; line-height: 1.6;">BB</strong>&#xFF08;&#x5373;guard&#xFF09;&#x3002;&#x867D;&#x7136;&#x6709;&#x516C;&#x5F0F;A<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>B &lt;=&gt; <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa25fc1d4c7fd699a05e0f1026b59e75c" hash="84a4814842e4acaeef0aaab5905db7bd" align="" alt="" longdesc="" width="8.75" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>A V B=T&#xFF0C;&#x4F46;&#x662F;B&#x7684;&#x83B7;&#x5F97;&#x611F;&#x89C9;&#x66F4;&#x591A;&#x662F;&#x4F9D;&#x9760;&#x5206;&#x6790;&#x800C;&#x4E0D;&#x662F;&#x63A8;&#x5BFC;&#x3002;&#x5177;&#x4F53;&#x4F8B;&#x5B50;&#x4F1A;&#x5728;&#x672C;&#x6587;&#x6700;&#x540E;&#x63A8;&#x5BFC;Quick Sort&#x4E2D;&#x63D0;&#x53CA;&#x3002; <br>&#x5176;&#x4E2D; <br></p><div style="line-height: 1.6;"><div style="max-width: none; position: relative; width: 100%; text-indent: 0; margin: 1em 0; max-height: none; min-width: 0; min-height: 0; line-height: 1.6; text-align: center; display: block;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG3cd30453edba26a777d1fa9fa5b00268" hash="85b2476fa966278acd1ea7cb4b9ec68b" align="" alt="" longdesc="" width="170.625" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></div></div>&#x4E0D;&#x8FC7;&#x7531;&#x4E0A;&#x5F0F;&#x53EF;&#x77E5;&#xFF0C;&#x6B64;&#x65F6;&#x7684;guard&#x8FD8;&#x662F;&#x4E2A;&#x603B;&#x7684;guard&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x5C06;&#x4E4B;&#x5206;&#x89E3;&#x4E3A;&#x5404;&#x4E2A;B<sub style="font-size: 75%; position: relative; vertical-align: baseline; bottom: -0.25em; line-height: 1.6;">i</sub>&#x3002;<p style="margin: 0 0 1.1em; line-height: 1.6;"></p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x83b7x5f97x4e0dx53d8x91cfinvariantxff08x539fx4e66x7b2c16x7ae0xff09"><a name="&#x83B7;&#x5F97;&#x4E0D;&#x53D8;&#x91CF;invariant&#x539F;&#x4E66;&#x7B2C;16&#x7AE0;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x83B7;&#x5F97;&#x4E0D;&#x53D8;&#x91CF;Invariant&#xFF08;&#x539F;&#x4E66;&#x7B2C;16&#x7AE0;&#xFF09;</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x4E66;&#x4E2D;&#x7ED9;&#x4E86;4&#x79CD;&#x65B9;&#x6CD5;&#xFF1A;  </p><ol style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">Delete a conjunct.</strong> For example, predicate A ^ B ^ C can be weakened to A ^ C  </li><li style="line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">Replace a constant by a variable.</strong> For example, predicate x <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>b[1:10], where x is a simple variable&#xFF0C;can be weakened to x <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> b[1:i] ^ 1<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG2da42d49eea2c204a8badd4da4bf77db" hash="884eecd731f77bf3239d2771637645d7" align="" alt="" longdesc="" width="35" height="13.125" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>10&#xFF0C;where i is a fresh variable. Since a new <br>variable has been introduced, <font color="IndianRed" style="line-height: 1.6;">its possible set of values must be precisely stated.</font>  </li><li style="line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">Enlarge the range of a variable.</strong> For example, predicate 5 <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> i &lt; 10 can be weakened to 0 <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> i &lt; 10.  </li><li style="line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;">Add a disjunct.</strong> For example, predicate A can be weakened to A v B, for some other predicate B.</li></ol><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x4E66;&#x4E2D;&#x63A8;&#x8350;&#x7528;&#x524D;&#x4E09;&#x4E2A;&#xFF0C;&#x6839;&#x636E;&#x9605;&#x8BFB;&#x672C;&#x4E66;&#x540E;&#x9762;&#x90E8;&#x5206;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x6700;&#x5E38;&#x7528;&#x7684;&#x8FD8;&#x662F;&#x7B2C;&#x4E8C;&#x6761;&#x3002;</p></div><div style="line-height: 1.6;"><h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;" id="x63a8x5bfcquick-sort-xff08x539fx4e66182x8282xff09"><a name="&#x63A8;&#x5BFC;quick-sort-&#x539F;&#x4E66;182&#x8282;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x63A8;&#x5BFC;Quick Sort &#xFF08;&#x539F;&#x4E66;18.2&#x8282;&#xFF09;</a></h2><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x672C;&#x6587;&#x4EE5;&#x63A8;&#x5BFC;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x4F5C;&#x4E3A;&#x7ED3;&#x675F;&#x3002; <br>&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x5C31;&#x662F;&#x4E0D;&#x65AD;&#x5206;&#x5272;&#xFF0C;&#x5728;&#x5C0F;&#x6570;&#x7EC4;&#x4E2D;&#x9012;&#x5F52;&#x7684;&#x4F5C;&#x6392;&#x5E8F;&#xFF0C;&#x76F4;&#x5230;&#x5C0F;&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x5C11;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;2&#x4E2A;&#xFF0C;&#x5373;&#x53EF;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x6392;&#x5E8F;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x5206;&#x6210;Partition&#x548C;Sort&#x4E24;&#x90E8;&#x5206;&#x3002;</p></div><div style="line-height: 1.6;"><h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="partition-xff08x539fx4e66x7ec3x4e60165xff09"><a name="partition-&#x539F;&#x4E66;&#x7EC3;&#x4E60;165" style="background: transparent; color: #1980e6; text-decoration: none;">Partition &#xFF08;&#x539F;&#x4E66;&#x7EC3;&#x4E60;16.5&#xFF09;</a></h3><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x4E00;&#x6B21;&#x5206;&#x5272;&#x7684;&#x540E;&#x6761;&#x4EF6;&#x5982;&#x4E0B; <br>R: <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGeea80b62b352286fe047a0323a500f74" hash="3316cb5817047bf25fedc791898ab715" align="" alt="" longdesc="" width="178.5" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/1453770826140.png" hash="25cfd59d309cbced7986dbf97b8d7dc5" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%;" title="" lang="" xml:lang="" dir=""></p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x7531rx83b7x5f97p"><a name="&#x7531;r&#x83B7;&#x5F97;p" style="background: transparent; color: #1980e6; text-decoration: none;">&#x7531;R&#x83B7;&#x5F97;P</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x901A;&#x8FC7;&#x4E0A;&#x4E00;&#x8282;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x4E8C;<strong style="font-weight: bold; line-height: 1.6;">Replace a constant by a variable.</strong>&#x6765;&#x5F97;&#x5230;P&#x3002; <br>P: <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG6dd3bf7fcf9b51d3eda1335c1fc370c7" hash="3314dd5ce21368f8df822c15ef92fa1e" align="" alt="" longdesc="" width="210.875" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/1453770875251.png" hash="308a49473e500d34fd4df71179a16ca1" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%;" title="" lang="" xml:lang="" dir=""></p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x7531p-bb-rx63a8x7b97bb"><a name="&#x7531;p-wedge-dalethbb-rightarrowr&#x63A8;&#x7B97;bb" style="background: transparent; color: #1980e6; text-decoration: none;">&#x7531;P <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGfbcd8e802bd958421a3fd3223a62cc99" hash="fa28fb1c3fa2c3cbfb061c84d76a81ee" align="" alt="" longdesc="" width="23.625" height="22.75" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="18.375" height="13.125" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>R<font color="IndianRed" style="line-height: 1.6;">&#x63A8;&#x7B97;</font>BB</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x6CE8;&#x610F;&#x662F;&#x63A8;&#x7B97;&#xFF0C;&#x4E0D;&#x662F;&#x4E25;&#x683C;&#x7684;&#x903B;&#x8F91;&#x63A8;&#x5BFC; <br><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG0d658054a25e0901d852b1e4775c63d7" hash="161d82bf111343c346587c857368ddaa" align="" alt="" longdesc="" width="18.375" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>P <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG27290dc895d845aaaa0cf6cd9efb862f" hash="3b2802f505970a35c63687787bb5395b" align="" alt="" longdesc="" width="9.625" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> (p-q+1=0) <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG976a30a7c71e849ba05370616ae73a9b" hash="17b4902e8079b7fb10c0d3999f472472" align="" alt="" longdesc="" width="14.875" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> R <br><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa66fbcf64adff5f30fb866e3fdd9b148" hash="e107f5a150980bc8f4b274ea9a9c5afc" align="" alt="" longdesc="" width="27.125" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong> = (p-q+1=0) <br><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG2c1f5f4ae4551699889f2d458fcefdf7" hash="0ded699b92eb12d1371cb4567991f36f" align="" alt="" longdesc="" width="18.375" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong> = (p<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG04de81d576ce79f945575d59b5754b6f" hash="92931762b47f1f9bf273cfa804f002d6" align="" alt="" longdesc="" width="11.375" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>q-1)</p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="bound-function"><a name="bound-function" style="background: transparent; color: #1980e6; text-decoration: none;">Bound function</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">t = p-q+1</p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x63a8x6d4bcommand"><a name="&#x63A8;&#x6D4B;command-1" style="background: transparent; color: #1980e6; text-decoration: none;">&#x63A8;&#x6D4B;command</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x7531;QuickSort&#x7684;&#x57FA;&#x672C;&#x7B97;&#x6CD5;&#x53EF;&#x77E5;&#xFF0C;&#x6709;&#x4E09;&#x4E2A;&#x53EF;&#x80FD;&#x7684;command</p><ol style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">q++</li><li style="line-height: 1.6;">p&#x2013;</li><li style="line-height: 1.6;">swap(b[p], b[q]) <br>&#x6240;&#x4EE5;&#x73B0;&#x5728;&#x7A0B;&#x5E8F;&#x5F62;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A; <br>do p<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG04de81d576ce79f945575d59b5754b6f" hash="92931762b47f1f9bf273cfa804f002d6" align="" alt="" longdesc="" width="11.375" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>q-1 <br>&#x3000;if<strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">__</em></strong> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span> p:=p-1 <br>&#x3000;<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG365841a3c2f20d1b1a7fa5bf49ebb8ea" hash="b0fb1dae063d3c6406f2cfda420e91e9" align="" alt="" longdesc="" width="13.125" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> <strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">__</em></strong> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span> q:=q+1 <br>&#x3000;<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG365841a3c2f20d1b1a7fa5bf49ebb8ea" hash="b0fb1dae063d3c6406f2cfda420e91e9" align="" alt="" longdesc="" width="13.125" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> <strong style="font-weight: bold; line-height: 1.6;"><em style="line-height: 1.6;">__</em></strong> <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span> swap(b[p], b[q]) <br>&#x3000;fi <br>od</li></ol></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x7531commandpbbx83b7x5f97guard"><a name="&#x7531;commandpbb&#x83B7;&#x5F97;guard" style="background: transparent; color: #1980e6; text-decoration: none;">&#x7531;command+P+BB&#x83B7;&#x5F97;Guard</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">P<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG27290dc895d845aaaa0cf6cd9efb862f" hash="3b2802f505970a35c63687787bb5395b" align="" alt="" longdesc="" width="9.625" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG3701c9d4b30bd9bd56d9cfbc0d034056" hash="010b009c212b5e22b2f23f051b316bcf" align="" alt="" longdesc="" width="43.75" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>wp(S,P)</p><ol style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">S = &#x201C;p:=p-1&#x201D; <br>&#x3000;&#x3000;wp(S,P) = <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa78ef45c45ca430a27c2fd2aaca981bc" hash="4139f7b6ca858d1d93a748e8be94e929" align="" alt="" longdesc="" width="206.5" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/1453770917851.png" hash="fa47e3364b0a6fd3e7acde2f743743d3" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%;" title="" lang="" xml:lang="" dir=""></li><li style="line-height: 1.6;">S = &#x201C;q:=q+1&#x201D; <br>&#x8FC7;&#x7A0B;&#x7C7B;&#x4F3C; <br>&#x3000;&#x3000;wp(S,P)=<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGf1cbade750eebefe2516581ee5a5b6ee" hash="9be1b6c5ee27f0ed8420467e4d37fd66" align="" alt="" longdesc="" width="161" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/1453770962336.png" hash="c4f3ae1f27e6550648ef5e047f7cbde4" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%;" title="" lang="" xml:lang="" dir=""></li></ol><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x5BF9;&#x4E8E;&#x524D;&#x534A;&#x90E8;&#x5206;&#x7684;&#x8BC1;&#x660E;&#x5982;&#x4E0B;&#xFF1A; <br>P&#x4E2D;&#x6709;<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGda80187d6b9691ccbf880c5a63f18341" hash="6e3ab8359ee72b593403586b808c43dc" align="" alt="" longdesc="" width="121.625" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> <br><strong style="font-weight: bold; line-height: 1.6;">BB</strong> = (p<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG04de81d576ce79f945575d59b5754b6f" hash="92931762b47f1f9bf273cfa804f002d6" align="" alt="" longdesc="" width="11.375" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>q-1) <br><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGdd346d5af971e1d1e1f87f86bb18597c" hash="56f94c18d4e2bd4be328c8db8dc1c4b9" align="" alt="" longdesc="" width="9.625" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> q &lt; p <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG976a30a7c71e849ba05370616ae73a9b" hash="17b4902e8079b7fb10c0d3999f472472" align="" alt="" longdesc="" width="14.875" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> q <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>p-1 <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG976a30a7c71e849ba05370616ae73a9b" hash="17b4902e8079b7fb10c0d3999f472472" align="" alt="" longdesc="" width="14.875" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> q+1<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>p <br>&#x5F97;&#x8BC1; <br>&#x5BF9;&#x4E8E;&#x540E;&#x534A;&#x90E8;&#x5206;&#xFF0C;&#x663E;&#x800C;&#x6613;&#x89C1;&#x9700;&#x8981;b[q]<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>x,&#x5373; <br></p><div style="line-height: 1.6;"><div style="max-width: none; position: relative; width: 100%; text-indent: 0; margin: 1em 0; max-height: none; min-width: 0; min-height: 0; line-height: 1.6; text-align: center; display: block;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGb493a60af772ba4d43d61dadaf07e01c" hash="c8101f92806ac73e3adc6ad027a245e3" align="" alt="" longdesc="" width="98.875" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></div></div><p style="margin: 0 0 1.1em; line-height: 1.6;"><ol start="3" style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">swap(b[p], b[q]) <br>&#x3000;&#x3000;wp(S,P)=<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGb7b17c053cd67bd4403ce141887d8cfc" hash="8ec8044de4acde4c547eb405e6aba61d" align="" alt="" longdesc="" width="134.75" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/1453771153446.png" hash="33d2b8ae7be43af8f7c3d90347f345db" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%;" title="" lang="" xml:lang="" dir=""></li></ol></p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x9a8cx8bc1"><a name="&#x9A8C;&#x8BC1;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x9A8C;&#x8BC1;</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">Q: T <br>R: <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGbac8431b5c6745bae0d99c876ecfaa74" hash="c0ae8772d1588796919e4d3629cb0242" align="" alt="" longdesc="" width="178.5" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/1453771195972.png" hash="218b3bbfb055e556db314f32c5cf1652" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%;" title="" lang="" xml:lang="" dir=""></p><ol style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">wp(IS, P) = <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGdd6258225bddd84eac42ad3eb2e43d8f" hash="a95aac10d0f7ab57f250ef5fe80e0fd3" align="" alt="" longdesc="" width="197.75" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/1453771263078.png" hash="1411ee7338266fbe0789dfc52da0104c" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%;" title="" lang="" xml:lang="" dir=""></li><li style="line-height: 1.6;">P<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG27290dc895d845aaaa0cf6cd9efb862f" hash="3b2802f505970a35c63687787bb5395b" align="" alt="" longdesc="" width="9.625" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG3701c9d4b30bd9bd56d9cfbc0d034056" hash="010b009c212b5e22b2f23f051b316bcf" align="" alt="" longdesc="" width="43.75" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGd28140eda2d12e24b434e011b930fa23" hash="083a61bd57fad5ea2e10566503a8421a" align="" alt="" longdesc="" width="13.125" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>,P) <br>&#x8FD9;&#x4E2A;&#x663E;&#x7136;&#x4E5F;&#x662F;&#x6210;&#x7ACB;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x7684;<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG72f4aab7f49593ada1f6b406b90a8a94" hash="2c587398f225b0560a3357b941f0701a" align="" alt="" longdesc="" width="14.875" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x6765;&#x7684;</li><li style="line-height: 1.6;">P<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGfbcd8e802bd958421a3fd3223a62cc99" hash="fa28fb1c3fa2c3cbfb061c84d76a81ee" align="" alt="" longdesc="" width="19.25" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>R <br>&#x540C;&#x4E0A;&#xFF0C;&#x4EA6;&#x6210;&#x7ACB;</li><li style="line-height: 1.6;">P<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG27290dc895d845aaaa0cf6cd9efb862f" hash="3b2802f505970a35c63687787bb5395b" align="" alt="" longdesc="" width="9.625" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span><strong style="font-weight: bold; line-height: 1.6;">BB</strong><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG777d001ea1ec5971b67bb546ed760f97" hash="3c442fa291d2e190719b067ff63cdbd7" align="" alt="" longdesc="" width="14.875" height="10.5" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>(t&gt;0) <br><strong style="font-weight: bold; line-height: 1.6;">BB</strong> = (p<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG04de81d576ce79f945575d59b5754b6f" hash="92931762b47f1f9bf273cfa804f002d6" align="" alt="" longdesc="" width="11.375" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>q-1) <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG976a30a7c71e849ba05370616ae73a9b" hash="17b4902e8079b7fb10c0d3999f472472" align="" alt="" longdesc="" width="14.875" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> p-q+1<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG04de81d576ce79f945575d59b5754b6f" hash="92931762b47f1f9bf273cfa804f002d6" align="" alt="" longdesc="" width="11.375" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>0 <br>&#x53C8;&#x7531;P&#x6709; <br>q<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>p+1 <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG976a30a7c71e849ba05370616ae73a9b" hash="17b4902e8079b7fb10c0d3999f472472" align="" alt="" longdesc="" width="14.875" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> p-q+1<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa27bd5e00db840936296ead0783388e7" hash="cb82c987552ec5cddcbaa328af0a8ff6" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>0 <br><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGdd346d5af971e1d1e1f87f86bb18597c" hash="56f94c18d4e2bd4be328c8db8dc1c4b9" align="" alt="" longdesc="" width="9.625" height="9.625" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> t=p-q+1&gt;0 <br>&#x5F97;&#x8BC1;</li><li style="line-height: 1.6;">P<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG3701c9d4b30bd9bd56d9cfbc0d034056" hash="010b009c212b5e22b2f23f051b316bcf" align="" alt="" longdesc="" width="43.75" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> wp(&#x201C;<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG06cc831eedbb30a0113e8547604f888d" hash="c0982c094102e009d777ecafc1ae35fc" align="" alt="" longdesc="" width="56" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>&#x201D;, &#x201C;t&lt;t1&quot;) <br>&#x5BF9;&#x4E8E;&#x4E09;&#x79CD;<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGd28140eda2d12e24b434e011b930fa23" hash="083a61bd57fad5ea2e10566503a8421a" align="" alt="" longdesc="" width="13.125" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>,t&#x90FD;&#x663E;&#x7136;&#x4F1A;&#x53D8;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;&#x6EE1;&#x8DB3;</li></ol><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x7EFC;&#x4E0A;&#xFF0C;5&#x6761;check point&#x90FD;&#x6EE1;&#x8DB3;&#xFF0C;&#x7A0B;&#x5E8F;&#x6B63;&#x786E;&#x6027;&#x53EF;&#x4FDD;&#x8BC1;</p></div><div style="line-height: 1.6;"><h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="sort"><a name="sort" style="background: transparent; color: #1980e6; text-decoration: none;">Sort</a></h3></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="x63a8x5bfc"><a name="&#x63A8;&#x5BFC;" style="background: transparent; color: #1980e6; text-decoration: none;">&#x63A8;&#x5BFC;</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x6839;&#x636E;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x53EF;&#x77E5;&#xFF0C;&#x5BF9;&#x6570;&#x7EC4;&#x6392;&#x5E8F;&#xFF0C;&#x5373;&#x8FDB;&#x884C;&#x82E5;&#x5E72;&#x6B21;&#x5206;&#x5272;&#xFF0C;&#x76F4;&#x81F3;&#x5B50;&#x533A;&#x95F4;&#x5305;&#x542B;<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGc85a67d18322c7784f40a29a9fd19c86" hash="eeb70083db86dbacaa893e44dbc3ce63" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>2&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x5373;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x6392;&#x5E8F;&#x3002;</p><ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">P: <em style="line-height: 1.6;">s</em> is a set of pairs (i, j) representing disjoint array sections b[i:j] of b. Further&#xFF0C;b[0:n&#x2014;1] is ordered iff all the disjoint partitions given by set <em style="line-height: 1.6;">s</em> are.</li><li style="line-height: 1.6;">IS: <em style="line-height: 1.6;">s</em>:={(0,n-1)}</li><li style="line-height: 1.6;">R: b[0:n-1] are ordered</li><li style="line-height: 1.6;">t: n - ordered</li></ul><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7A0B;&#x5E8F;&#x5982;&#x4E0B;: <br><em style="line-height: 1.6;">s</em>:={(0,n-1)} <br>{<em style="line-height: 1.6;">Invariant</em>: &#x5982;&#x4E0A;P} <br><strong style="font-weight: bold; line-height: 1.6;">do</strong> <em style="line-height: 1.6;">s</em><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG04de81d576ce79f945575d59b5754b6f" hash="92931762b47f1f9bf273cfa804f002d6" align="" alt="" longdesc="" width="11.375" height="14" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>{} <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span> Choose((i,j),<em style="line-height: 1.6;">s</em>); s:=s-{(i,j)}; <br>&#x3000;&#x3000;&#x3000;<strong style="font-weight: bold; line-height: 1.6;">if</strong> j-i \&lt; 2 <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span> Sort b[i:j] directly <br>&#x3000;&#x3000;&#x3000;<span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVG365841a3c2f20d1b1a7fa5bf49ebb8ea" hash="b0fb1dae063d3c6406f2cfda420e91e9" align="" alt="" longdesc="" width="13.125" height="18.375" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> j-i <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGa27bd5e00db840936296ead0783388e7" hash="cb82c987552ec5cddcbaa328af0a8ff6" align="" alt="" longdesc="" width="11.375" height="12.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span>2 <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6; display: inline-block; white-space: nowrap; padding: 1px 0px;"><span style="line-height: 1.6; display: inline-block; position: relative; width: 2.17ex; height: 0.894ex; vertical-align: 0.128ex;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGe5d134f35dc4949fab12ec64d186248a" hash="824c94e45a50759ad62b55ab09772d6c" align="" alt="" longdesc="" width="14.875" height="7.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span></span></span> Partition(b,i,j,p;); <span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/QuickSort&#x63A8;&#x5BFC; - The Science of Programming/SVGd58f79b3586049a01349889cf9cb3f81" hash="f37a222b4d471d1a83ee19ff42a22bf7" align="" alt="" longdesc="" width="182.875" height="14.875" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> <br>&#x3000;&#x3000;&#x3000;<strong style="font-weight: bold; line-height: 1.6;">fi</strong> <br><strong style="font-weight: bold; line-height: 1.6;">od</strong></p></div><div style="line-height: 1.6;"><h4 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;" id="cx4ee3x7801"><a name="c&#x4EE3;&#x7801;" style="background: transparent; color: #1980e6; text-decoration: none;">C&#x4EE3;&#x7801;</a></h4><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x6700;&#x7EC8;Quick Sort C&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;:</p></div><div style="line-height: 1.6;"><pre style="word-wrap: break-word; font-family: &apos;Source Code Pro&apos;,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; font-size: .9em; background: #f6f6f6; word-break: break-all; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; position: relative;"><code style="font-family: &apos;Source Code Pro&apos;,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #d1d9e1; display: block; background: #474949; overflow-x: auto; padding: 1.3em 2em; padding-left: 3.3em;"><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">1.</span><span style="line-height: 1.6;">#<span style="line-height: 1.6; color: #cc99cc;">define</span> N           <span style="line-height: 1.6; color: #f99157;">50</span></span><br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">2.</span><span style="line-height: 1.6;">#<span style="line-height: 1.6; color: #cc99cc;">define</span> MAX_SPLIT   <span style="line-height: 1.6; color: #f99157;">50</span> <span style="line-height: 1.6; color: #969896; font-style: italic;">// This should be logN</span></span><br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">3.</span><span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">void</span> <span style="line-height: 1.6; color: #b5bd68;">swap</span><span style="line-height: 1.6; color: #f8f8f2;">(<span style="line-height: 1.6; color: #66d9ef;">int</span>* b, <span style="line-height: 1.6; color: #66d9ef;">int</span> p, <span style="line-height: 1.6; color: #66d9ef;">int</span> q)</span><br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">4.</span></span>{<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">5.</span>    b[p]=b[p]+b[q];<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">6.</span>    b[q]=b[p]-b[q];<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">7.</span>    b[p]=b[p]-b[q];<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">8.</span>}<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">9.</span><span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">int</span> <span style="line-height: 1.6; color: #b5bd68;">Partition</span> <span style="line-height: 1.6; color: #f8f8f2;">(<span style="line-height: 1.6; color: #66d9ef;">int</span>* b, <span style="line-height: 1.6; color: #66d9ef;">int</span> m, <span style="line-height: 1.6; color: #66d9ef;">int</span> n)</span><br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">10.</span></span>{<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">11.</span>    assert(n&gt;m);<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">12.</span>    <span style="line-height: 1.6; color: #cc99cc;">int</span> p=n-<span style="line-height: 1.6; color: #f99157;">1</span>, q=m+<span style="line-height: 1.6; color: #f99157;">1</span>;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">13.</span>    <span style="line-height: 1.6; color: #cc99cc;">while</span> (p != q-<span style="line-height: 1.6; color: #f99157;">1</span>)<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">14.</span>    {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">15.</span>        <span style="line-height: 1.6; color: #cc99cc;">if</span> (b[p]&gt;x)<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">16.</span>        {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">17.</span>            p--;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">18.</span>        }<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">19.</span>        <span style="line-height: 1.6; color: #cc99cc;">else</span> <span style="line-height: 1.6; color: #cc99cc;">if</span> (b[q]&lt;=x)<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">20.</span>        {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">21.</span>            q++;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">22.</span>        }<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">23.</span>        <span style="line-height: 1.6; color: #cc99cc;">else</span> <span style="line-height: 1.6; color: #cc99cc;">if</span> (b[q]&lt;=x &amp;&amp; b[p]&gt;x)<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">24.</span>        {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">25.</span>            swap(b, p ,q);<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">26.</span>            p--;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">27.</span>            q++;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">28.</span>        }<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">29.</span>    }<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">30.</span>    <span style="line-height: 1.6; color: #cc99cc;">return</span> p;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">31.</span>}<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">32.</span><span style="line-height: 1.6; color: #f92672;"><span style="line-height: 1.6; color: #66d9ef;">void</span> <span style="line-height: 1.6; color: #b5bd68;">QuickSort</span><span style="line-height: 1.6; color: #f8f8f2;">(<span style="line-height: 1.6; color: #66d9ef;">int</span>* b, <span style="line-height: 1.6; color: #66d9ef;">int</span> n)</span><br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">33.</span></span>{<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">34.</span>    <span style="line-height: 1.6; color: #cc99cc;">typedef</span> <span style="line-height: 1.6; color: #cc99cc;">struct</span> <br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">35.</span>    {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">36.</span>        <span style="line-height: 1.6; color: #cc99cc;">int</span> start;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">37.</span>        <span style="line-height: 1.6; color: #cc99cc;">int</span> end;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">38.</span>    }Pair s[MAX_SPLIT] = {<span style="line-height: 1.6; color: #f99157;">0</span>};<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">39.</span>    <span style="line-height: 1.6; color: #cc99cc;">int</span> count = <span style="line-height: 1.6; color: #f99157;">1</span>; <span style="line-height: 1.6; color: #969896; font-style: italic;">// how many pairs in s</span><br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">40.</span>    s[<span style="line-height: 1.6; color: #f99157;">0</span>].start = <span style="line-height: 1.6; color: #f99157;">0</span>;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">41.</span>    s[<span style="line-height: 1.6; color: #f99157;">0</span>].end = n-<span style="line-height: 1.6; color: #f99157;">1</span>;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">42.</span>    <span style="line-height: 1.6; color: #cc99cc;">while</span> (count &gt; <span style="line-height: 1.6; color: #f99157;">0</span>)<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">43.</span>    {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">44.</span>        Pair p;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">45.</span>        <span style="line-height: 1.6; color: #b5bd68;">memcpy</span>(&amp;p, &amp;s[count-<span style="line-height: 1.6; color: #f99157;">1</span>], <span style="line-height: 1.6; color: #cc99cc;">sizeof</span>(Pair));<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">46.</span>        <span style="line-height: 1.6; color: #cc99cc;">if</span>(p.end - p.start &lt; <span style="line-height: 1.6; color: #f99157;">2</span>)<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">47.</span>        {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">48.</span>            <span style="line-height: 1.6; color: #cc99cc;">if</span> (p.start &gt; p.end)<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">49.</span>            {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">50.</span>                swap (b, p.start, p.end);<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">51.</span>                count --;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">52.</span>            }<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">53.</span>            <span style="line-height: 1.6; color: #cc99cc;">else</span><br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">54.</span>            {<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">55.</span>                <span style="line-height: 1.6; color: #cc99cc;">int</span> m = p.start;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">56.</span>                <span style="line-height: 1.6; color: #cc99cc;">int</span> n = p.end - p.start + <span style="line-height: 1.6; color: #f99157;">1</span>;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">57.</span>                <span style="line-height: 1.6; color: #cc99cc;">int</span> x = Partition(b, m, n);<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">58.</span>                s[count-<span style="line-height: 1.6; color: #f99157;">1</span>].start = p.start;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">59.</span>                s[count-<span style="line-height: 1.6; color: #f99157;">1</span>].end = x-<span style="line-height: 1.6; color: #f99157;">1</span>;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">60.</span>                s[count].start = x+<span style="line-height: 1.6; color: #f99157;">1</span>;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">61.</span>                s[count].end = p.end;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">62.</span>                count ++;<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">63.</span>            }<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">64.</span>        } <br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">65.</span>    }<br><span style="line-height: 1.6; color: #969896; font-style: italic; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em;">66.</span>}<br></code></pre></div><div style="line-height: 1.6;"></div><center style="display:none">%23QuickSort%u63A8%u5BFC%20-%20The%20Science%20of%20Programming%0A%0A@%28%u5B66%u4E60%u7B14%u8BB0%29%5B%u8BFB%u4E66%u7B14%u8BB0%2C%20Programming%5D%0A%0A%u7531%u4E8E%u8FD1%u65E5%u5F00%u53D1%u5355%u7247%u673A%u7A0B%u5E8F%u7684%u65F6%u5019%uFF0C%u5199%u5230%u4E00%u4E2A%u5C0F%u5FAA%u73AF%uFF0C%u4E0D%u80FD%u786E%u5B9A%u5176%u6B63%u786E%u6027%uFF0C%u8FDB%u800C%u60F3%u5230%u8FD9%u672C%u4E66%u7684%u5185%u5BB9%uFF0C%u7B97%u662F%u4E00%u4E2A%u5C0F%u5C0F%u7684%u56DE%u987E%u3002%u672C%u4E66%u7684%u8BFB%u4E66%u7B14%u8BB0%u53C2%u8003%u8FD9%u7BC7%5BThe%20Science%20of%20Programming%5D%28https%3A//www.evernote.com/shard/s24/nl/697376807/c79122e8-c790-44b7-afa4-93eca3ad662e/%29%u3002%0A%u6B63%u6240%u8C13%u6E29%u6545%u800C%u77E5%u65B0%uFF0C%u8FD9%u6B21%u91CD%u65B0%u6458%u8BFB%u53C8%u6709%u4E9B%u65B0%u7684%u6536%u83B7%u3002%u672C%u60F3%u4EE5QuickSort%u4F5C%u4E3A%u4E00%u4E2A%u7EC3%u4E60%u6765%u8FD0%u7528%u672C%u4E66%u7684%u77E5%u8BC6%uFF0C%u7ED3%u679C%u5C1D%u8BD5%u4E86%u8BB8%u4E45%uFF0C%u53D1%u73B0%u8D8A%u9677%u8D8A%u6DF1%u3002%u6700%u540E%u8FD8%u662F%u627E%u4E86%u4E66%u4E0A%u7684%u4F8B%u5B50%uFF08%u4E66%u4E2D%u6709QuickSort%u7684%u4F8B%u5B50%uFF09%u3002%u672C%u6587%u6700%u7EC8%u76EE%u6807%u662F%u9610%u8FF0%u5982%u4F55%u63A8%u5BFCQuickSort%u7A0B%u5E8F%u672C%u8EAB%u3002%u5148%u6458%u53D6%u4E00%u4E9B%u91CD%u8981%u7684%u77E5%u8BC6%u70B9%2C%u518D%u5229%u7528%u8FD9%u4E9B%u77E5%u8BC6%u70B9%u6765%u63A8%u5BFCQuickSort%u3002%0A%0A%5BTOC%5D%0A%0A%23%23%u77E5%u8BC6%u70B9%u68B3%u7406%0A%23%23%231.%20Quantification%uFF08%u91CF%u5316%uFF09%5B%u539F%u4E664.2%u8282%5D%0A%0A*%20There%20exists%20%20%0A%09%28***E***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20E%3Csub%3Ei%3C/sub%3E%29%0A*%20For%20all%20%20%0A%09%28***A***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20E%3Csub%3Ei%3C/sub%3E%29%0A*%20Numerial%20%20%0A%09%28***N***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20E%3Csub%3Ei%3C/sub%3E%29%0A%09%0A%u4ED6%u4EEC%u6709%u4EE5%u4E0B%u7279%u6027%0A%0A%3E%28***E***%20i%3A%20m%24%5Cleq%24i%5C%3Ck+1%3A%20E%3Csub%3Ei%3C/sub%3E%29%20%3D%20%28***E***%20i%3A%20m%24%5Cleq%24i%5C%3Ck%3A%20E%3Csub%3Ei%3C/sub%3E%29%20V%20E%3Csub%3Ek+1%3C/sub%3E%0A%3E%28***A***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20E%3Csub%3Ei%3C/sub%3E%29%20%3D%20%24%5Cdaleth%24%28***E***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20%24%5Cdaleth%24E%3Csub%3Ei%3C/sub%3E%29%0A%3E%28***E***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20E%3Csub%3Ei%3C/sub%3E%29%20%3D%20%28***N***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20E%3Csub%3Ei%3C/sub%3E%29%20%24%5Cgeq%24%201%0A%3E%28***A***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20E%3Csub%3Ei%3C/sub%3E%29%20%3D%20%28***N***%20i%3A%20m%24%5Cleq%24i%5C%3Cn%3A%20E%3Csub%3Ei%3C/sub%3E%29%20%3D%20n-m%0A%0A%23%23%232.%20%u4F55%u4E3Awp%uFF1F%5B%u539F%u4E66%u7B2C7%u7AE0%5D%0A%u539F%u4E66%u7684%u5B9A%u4E49%uFF1A%0A%3EThe%20Predicate%20Transformer%20wp%0A%3E%0A%3EThe%20set%20of%20all%20states%20such%20that%20execution%20of%20**S**%20begun%20in%20any%20one%20of%20them%20%3Cfont%20color%3D%22Blue%22%3Eis%20guaranteed%20to%20terminate%20in%20a%20finite%20amount%20of%20time%3C/font%3E%20in%20a%20state%20satisfying%20**R**.%0A%0Awp%u901A%u5E38%u88AB%u7528%u6765%u8868%u8FBE%u4E00%u6BB5%u7A0B%u5E8F%0A%24%24%5C%7BQ%5C%7DS%5C%7BR%5C%7D%24%24%0A%u6216%u8005%u8FD9%u6837%u5199%0A%24%24Q%5CRightarrow%20wp%28S%2CR%29%24%24%0A-%20Q%3A%u524D%u6761%u4EF6%20%20%0A-%20S%3A%u6267%u884C%u4EE3%u7801%uFF08%u539F%u6587%u79F0%u4E3Acommands%uFF09%20%20%0A-%20R%3A%u540E%u6761%u4EF6%0A%0A**wp%u7684%u7279%u6027**%0A%3E1%29%20wp%28S%2CF%29%20%3D%20F%20%20%20%0A%3E2%29%20wp%28S%20%5E%20Q%29%20%5E%20wp%28S%2CR%29%20%3D%20wp%28S%2CQ%20%5E%20R%20%29%20%20%0A%3E3%29%20if%20Q%20then%20wp%28S%2C%20Q%20%29%20%24%5CRightarrow%24%20wp%28S%2C%20R%29%20%20%20%0A%3E4%29%20wp%28S%20wp%28S%2C%20R%29%29%20%24%5CRightarrow%24%20wp%28S%20%2CQ%20v%20R%29%20%20%0A%3E5%29%20wp%28S%2C%20Q%29%20V%20wp%28S%2C%20R%29%20%3D%20wp%28S%2C%20Q%20V%20R%29%20%28for%20deterministic%20S%29%0A%0A%23%23%233.%20%u5FAA%u73AF%u68C0%u67E5%20%28%u539F%u4E66%u7B2C11%u7AE0%29%0A%u5B9A%u4E49%20%20%0A%24%24%20wp%28DO%2C%20R%29%20%5CRightarrow%20%28E%20k%3A%200%5Cleq%20k%3A%20H_k%28R%29%29%24%24%0A%0A%u7528%u6570%u5B66%u8BED%u8A00%u6807%u8BB0%u4E00%u4E2A%u5FAA%u73AF%u5982%u4E0B%3A%20%20%0A%7BQ%7D%20%20%0A%7Binv%20P%3A%20the%20invariant%7D%20%20%0A%7Bbound%20t%3A%20the%20bound%20function%7D%20%20%0A%7Binit%20IS%3A%20initialization%20command%7D%20%20%0A**do**%20*B*%3Csub%3E1%3C/sub%3E%20%24%5Crightarrow%24%20*S*%3Csub%3E1%3C/sub%3E%20%20%0A%20%24%5Csquare%5C%20%5Ccdots%24%20%20%0A%20%24%5Csquare%5C%20%24%20*B*%3Csub%3En%3C/sub%3E%20%24%5Crightarrow%24%20*S*%3Csub%3En%3C/sub%3E%20%20%20%0A**od**%0A%0A%23%23%23%23Invariant%0A%3E%3Cfont%20%20face%3D%22Arial%22%3EA%20predicate%20**P**%20that%20is%20true%20**before%20and%20after%20each%20iteration**%20of%20a%20loop.%3C/font%3E%20%20%0A%0A%u8FD9%u5C31%u662F%u8BF4P%u5728%u4EFB%u4F55%u60C5%u51B5%u4E0B%u90FD%u8981%u6210%u7ACB%uFF0C%u4E8E%u662F%u6709%20%20%0A-%20Q%20%24%5CRightarrow%24%20wp%28IS%2C%20P%29%20%20%0A-%20P%20%24%5CRightarrow%24%20wp%28DO%2C%20P%20%5E%20%24%5Cdaleth%24BB%29%0A%0A%23%23%23%23Bound%0A%u53C8%u53EBbound%20function%0A%3E%3Cfont%20%20face%3D%22Arial%22%3EThe%20function%20changes%20at%20each%20iteration%3B%20the%20relation%20remains%20invariantly%20true.%0A%3E**each%20iteration%20decreases%20t%20by%20at%20least%20one%uFF0Cso%20that%20termination%20is%20guaranteed%20to%20occur.**%3C/font%3E%0A%0A%u68C0%u67E5bound%u51FD%u6570%u786E%u4FDD%u5FAA%u73AF%u80FD%u7ED3%u675F%u3002%0A%0A%23%23%23%23Checklist%0A%3Cfont%20color%3D%22IndianRed%22%20size%3D%226%22%3E%u975E%u5E38%u91CD%u8981%21%21%21%3C/font%3E%20%20%0A%3Ca%20name%3D%22checklist%22%3E%3C/a%3E%20%0A1.%20Q%20%24%5CRightarrow%24%20wp%28IS%2C%20P%29%0A2.%20P%20%5E%20B%3Csub%3Ei%3C/sub%3E%20%24%5CRightarrow%24%20wp%28S%3Csub%3Ei%3C/sub%3E%2C%20P%29%0A3.%20P%20%5E%20%24%5Cdaleth%24**BB**%20%24%5CRightarrow%24%20R%0A4.%20P%20%5E%20**BB**%20%24%5CRightarrow%24%20%28t%20%3E%200%29%0A5.%20P%20%5E%20B%3Csub%3Ei%3C/sub%3E%20%24%5CRightarrow%24%20wp%28%22t%3Csub%3E1%3C/sub%3E%3A%3Dt%3B%20S%3Csub%3Ei%3C/sub%3E%22%2C%20%22t%20%3C%20t%3Csub%3E1%3C/sub%3E%22%29%20%20%0A%0A%u4F9D%u6B21%u9A8C%u8BC1%u8FD95%u6761%uFF0C%u5C31%u80FD%u8BC1%u660E%u4E00%u4E2A%u5FAA%u73AF%u7684%u6B63%u786E%u6027%u4E86%0A%0A%23%23%234.%20%u5982%u4F55%u8FD0%u7528%u6240%u6709%u7684%u77E5%u8BC6%u6765%u5F00%u53D1%u4E00%u6BB5%u7A0B%u5E8F%uFF08%u539F%u4E66PART%20III%uFF09%0A%23%23%23%23%u63A8%u6D4BCommand%0A%u901A%u8FC7%u540E%u6761%u4EF6R%uFF0C%u6765%u63A8%u6D4B%u6267%u884C%u4EE3%u7801%28Command%29%u3002%u8FD9%u5C31%u662F%u6240%u8C13%u7684Programming%20as%20a%20Goal-Oriented%20Activity%u3002%u8BE6%u60C5%u53C2%u770B%u539F%u4E66%u7B2C14%u7AE0%u3002%0A%3E**Strategy%20for%20developing%20an%20alternative%20command**%3A%20To%20invent%20a%20guarded%20command%uFF0Cfind%20a%20command%20C%20whose%20execution%20will%20establish%20postcondition%20R%20in%20at%20least%20some%20cases%3B%20find%20a%20Boolean%20B%20satisfying%20B%24%5CRightarrow%24wp%28C%2CR%29%20and%20put%20them%20together%20to%20form%20B%20%24%5Crightarrow%24C.%20Continue%20to%20invent%20guarded%20commands%20until%20the%20precondition%20of%20the%20construct%20implies%20that%20at%20least%20one%20guard%20is%20true.%20-%20%u539F%u6587%2814.7%29%0A%0A%23%23%23%23%u83B7%u5F97Guard%uFF08%u539F%u4E66%u7B2C15%u7AE0%uFF09%0A%u6240%u6709%u7684%u7F16%u7A0B%u90FD%u5E94%u8BE5%u662F%u7ED3%u679C%u5BFC%u5411%u7684%uFF08%u8FD9%u4E0E%u6D4B%u8BD5%u9A71%u52A8%u5F00%u53D1TDD%u7684%u601D%u60F3%u6697%u5408%uFF09%u3002%u6240%u4EE5%u540E%u6761%u4EF6R%u662F%u6700%u5148%u6709%u7684%u3002%0A%u5176%u6B21%uFF0C%u901A%u8FC7P%20%24%5Cwedge%5C%20%5Cdaleth%24**BB**%20%24%5CRightarrow%24%20R%u80FD%u5F97%u5230**BB**%uFF08%u5373guard%uFF09%u3002%u867D%u7136%u6709%u516C%u5F0FA%24%5CRightarrow%24B%20%3C%3D%3E%20%24%5Cdaleth%24A%20V%20B%3DT%uFF0C%u4F46%u662FB%u7684%u83B7%u5F97%u611F%u89C9%u66F4%u591A%u662F%u4F9D%u9760%u5206%u6790%u800C%u4E0D%u662F%u63A8%u5BFC%u3002%u5177%u4F53%u4F8B%u5B50%u4F1A%u5728%u672C%u6587%u6700%u540E%u63A8%u5BFCQuick%20Sort%u4E2D%u63D0%u53CA%u3002%0A%u5176%u4E2D%0A%24%24%20%5Cmathbf%20B%20%5Cmathbf%20B%20%3D%20B_1%20%5Cwedge%20%5C%20B%5C_2%20%5Cwedge%20%5Cldots%20%5C%20B%5C_n%24%24%0A%u4E0D%u8FC7%u7531%u4E0A%u5F0F%u53EF%u77E5%uFF0C%u6B64%u65F6%u7684guard%u8FD8%u662F%u4E2A%u603B%u7684guard%uFF0C%u8FD8%u9700%u8981%u5C06%u4E4B%u5206%u89E3%u4E3A%u5404%u4E2AB%3Csub%3Ei%3C/sub%3E%u3002%0A%23%23%23%23%u83B7%u5F97%u4E0D%u53D8%u91CFInvariant%uFF08%u539F%u4E66%u7B2C16%u7AE0%uFF09%0A%u4E66%u4E2D%u7ED9%u4E864%u79CD%u65B9%u6CD5%uFF1A%20%20%0A1.%20**Delete%20a%20conjunct.**%20For%20example%2C%20predicate%20A%20%5E%20B%20%5E%20C%20can%20be%20weakened%20to%20A%20%5E%20C%20%20%0A2.%20**Replace%20a%20constant%20by%20a%20variable.**%20For%20example%2C%20predicate%20x%20%24%5Cleq%24b%5B1%3A10%5D%2C%20where%20x%20is%20a%20simple%20variable%uFF0Ccan%20be%20weakened%20to%20x%20%24%5Cleq%24%20b%5B1%3Ai%5D%20%5E%201%24%5Cleq%20i%20%5Cleq%2410%uFF0Cwhere%20i%20is%20a%20fresh%20variable.%20Since%20a%20new%0Avariable%20has%20been%20introduced%2C%20%3Cfont%20color%3D%22IndianRed%22%3Eits%20possible%20set%20of%20values%20must%20be%20precisely%20stated.%3C/font%3E%20%20%0A3.%20**Enlarge%20the%20range%20of%20a%20variable.**%20For%20example%2C%20predicate%205%20%24%5Cleq%24%20i%20%3C%2010%20can%20be%20weakened%20to%200%20%24%5Cleq%24%20i%20%3C%2010.%20%20%0A4.%20**Add%20a%20disjunct.**%20For%20example%2C%20predicate%20A%20can%20be%20weakened%20to%20A%20v%20B%2C%20for%20some%20other%20predicate%20B.%0A%0A%u4E66%u4E2D%u63A8%u8350%u7528%u524D%u4E09%u4E2A%uFF0C%u6839%u636E%u9605%u8BFB%u672C%u4E66%u540E%u9762%u90E8%u5206%u7684%u7ECF%u9A8C%uFF0C%u6700%u5E38%u7528%u7684%u8FD8%u662F%u7B2C%u4E8C%u6761%u3002%0A%0A%23%23%u63A8%u5BFCQuick%20Sort%20%uFF08%u539F%u4E6618.2%u8282%uFF09%0A%u672C%u6587%u4EE5%u63A8%u5BFC%u5FEB%u901F%u6392%u5E8F%u4F5C%u4E3A%u7ED3%u675F%u3002%0A%u5FEB%u901F%u6392%u5E8F%u7684%u6838%u5FC3%u601D%u60F3%u5C31%u662F%u4E0D%u65AD%u5206%u5272%uFF0C%u5728%u5C0F%u6570%u7EC4%u4E2D%u9012%u5F52%u7684%u4F5C%u6392%u5E8F%uFF0C%u76F4%u5230%u5C0F%u6570%u7EC4%u7684%u5143%u7D20%u4E2A%u6570%u5C11%u4E8E%u6216%u7B49%u4E8E2%u4E2A%uFF0C%u5373%u53EF%u8FDB%u884C%u76F4%u63A5%u6392%u5E8F%u4E86%u3002%u6240%u4EE5%u5206%u6210Partition%u548CSort%u4E24%u90E8%u5206%u3002%0A%23%23%23Partition%20%uFF08%u539F%u4E66%u7EC3%u4E6016.5%uFF09%0A%u4E00%u6B21%u5206%u5272%u7684%u540E%u6761%u4EF6%u5982%u4E0B%0AR%3A%20%24m%5Cleq%20p%3Cn%20%5Cwedge%20perm%28b%2C%20B%29%20%5Cwedge%20b%24%21%5BAlt%20text%5D%28./1453770826140.png%29%0A%23%23%23%23%u7531R%u83B7%u5F97P%0A%u901A%u8FC7%u4E0A%u4E00%u8282%u4E2D%u7684%u65B9%u6CD5%u4E8C**Replace%20a%20constant%20by%20a%20variable.**%u6765%u5F97%u5230P%u3002%0AP%3A%20%24m%3Cq%20%5Cleq%20p+1%20%5Cleq%20n%20%5Cwedge%20x%3DB%5Bm%5D%20%5Cwedge%20%24%21%5BAlt%20text%5D%28./1453770875251.png%29%0A%23%23%23%23%u7531P%20%24%5Cwedge%20%5Cdaleth%24**BB**%20%24%5CRightarrow%24R%3Cfont%20color%3D%22IndianRed%22%3E%u63A8%u7B97%3C/font%3EBB%0A%u6CE8%u610F%u662F%u63A8%u7B97%uFF0C%u4E0D%u662F%u4E25%u683C%u7684%u903B%u8F91%u63A8%u5BFC%0A%24%5Cbecause%5C%20%24P%20%24%5Cwedge%24%20%28p-q+1%3D0%29%20%24%5CLeftrightarrow%24%20R%0A%24%5Ctherefore%5C%20%5Cdaleth%24**BB**%20%3D%20%28p-q+1%3D0%29%0A%24%5Ctherefore%5C%20%24**BB**%20%3D%20%28p%24%5Cneq%24q-1%29%0A%23%23%23%23Bound%20function%0At%20%3D%20p-q+1%0A%23%23%23%23%u63A8%u6D4Bcommand%0A%u7531QuickSort%u7684%u57FA%u672C%u7B97%u6CD5%u53EF%u77E5%uFF0C%u6709%u4E09%u4E2A%u53EF%u80FD%u7684command%0A1.%20q++%0A2.%20p--%0A3.%20swap%28b%5Bp%5D%2C%20b%5Bq%5D%29%0A%u6240%u4EE5%u73B0%u5728%u7A0B%u5E8F%u5F62%u5F0F%u5982%u4E0B%uFF1A%0Ado%20p%24%5Cneq%24q-1%0A%u3000if________%20%24%5Crightarrow%24%20p%3A%3Dp-1%0A%u3000%24%5Csquare%24%20________%20%24%5Crightarrow%24%20q%3A%3Dq+1%0A%u3000%24%5Csquare%24%20________%20%24%5Crightarrow%24%20swap%28b%5Bp%5D%2C%20b%5Bq%5D%29%0A%u3000fi%0Aod%0A%23%23%23%23%u7531command+P+BB%u83B7%u5F97Guard%0AP%24%5Cwedge%24**BB**%24%5Cwedge%20B_i%20%5CRightarrow%24wp%28S%2CP%29%0A1.%20S%20%3D%20%22p%3A%3Dp-1%22%0A%u3000%u3000wp%28S%2CP%29%20%3D%20%24%28m%3Cq%20%5Cleq%20p%20%5Cleq%20n%29%20%5Cwedge%20%28x%3DB%5Bm%5D%29%20%5Cwedge%20%24%21%5BAlt%20text%5D%28./1453770917851.png%29%0A%24%5Cbecause%24**BB**%20%3D%20%28p%24%5Cneq%24q-1%29%0A%24%5Ctherefore%24q%5C%3Cp+1%0A%24%5Ctherefore%24q%24%5Cleq%24p%0A%u53EF%u89C1%uFF0C%u8981%u8BC1%u51FAP%24%5Cwedge%24**BB**%24%5Cwedge%20B_i%20%5CRightarrow%24wp%28S%2CP%29%u53EA%u8981%u56FE%u5F62%u4E2D%u7684b%5Bp%5D%u80FD%u6EE1%u8DB3%u5206%u5272%u6761%u4EF6%u5C31%u53EF%u4EE5%u4E86%uFF0C%u6240%u4EE5%u6709%0A%24%24B_i%20%3D%20b%5Bp%5D%3Ex%24%24%0A2.%20S%20%3D%20%22q%3A%3Dq+1%22%0A%u8FC7%u7A0B%u7C7B%u4F3C%0A%u3000%u3000wp%28S%2CP%29%3D%24m%3Cq+1%5Cleq%20p+1%20%5Cleq%20n%20%5Cwedge%24%21%5BAlt%20text%5D%28./1453770962336.png%29%0A%0A%u5BF9%u4E8E%u524D%u534A%u90E8%u5206%u7684%u8BC1%u660E%u5982%u4E0B%uFF1A%0AP%u4E2D%u6709%24m%3Cq%20%5Cleq%20p+1%20%5Cleq%20n%24%0A**BB**%20%3D%20%28p%24%5Cneq%24q-1%29%0A%24%5Ctherefore%24%20q%20%3C%20p%20%24%5CLeftrightarrow%24%20q%20%24%5Cleq%24p-1%20%24%5CLeftrightarrow%24%20q+1%24%5Cleq%24p%0A%u5F97%u8BC1%0A%u5BF9%u4E8E%u540E%u534A%u90E8%u5206%uFF0C%u663E%u800C%u6613%u89C1%u9700%u8981b%5Bq%5D%24%5Cleq%24x%2C%u5373%0A%24%24B_i%20%3D%20%28b%5Bq%5D%20%5Cleq%20x%29%24%24%0A3.%20swap%28b%5Bp%5D%2C%20b%5Bq%5D%29%0A%u3000%u3000wp%28S%2CP%29%3D%24m%3Cq%20%5Cleq%20p+1%20%5Cleq%20n%20%5Cwedge%24%21%5BAlt%20text%5D%28./1453771153446.png%29%0A%u4ECD%u7136%u663E%u800C%u6613%u89C1%u6709%uFF1A%0A%24%24B_i%20%3D%20b%5Bq%5D%20%5Cleq%20x%20%5Cwedge%20b%5Bp%5D%3Ex%24%24%0A%u4F9D%u6B21%3Cfont%20color%3D%22IndianRed%22%20size%3D%225%22%3E%u5206%u5272%u7A0B%u5E8F%3C/font%3E%u5199%u4F5C%uFF1A%0A**do**%20p%24%5Cneq%24q-1%0A%u3000**if**%20b%5Bp%5D%5C%3Ex%20%24%5Crightarrow%24%20p%3A%3Dp-1%0A%u3000%24%5Csquare%24%20b%5Bq%5D%24%5Cleq%24%20x%20%24%5Crightarrow%24%20q%3A%3Dq+1%0A%u3000%24%5Csquare%24%20%28b%5Bq%5D%24%5Cleq%24%20x%29%20%24%5Cwedge%24%20%28b%5Bp%5D%5C%3Ex%29%24%5Crightarrow%24%20swap%28b%5Bp%5D%2C%20b%5Bq%5D%29%3B%20p%2Cq%3A%3Dp-1%2Cq+1%0A%u3000**fi**%0A**od**%0A%23%23%23%23%u9A8C%u8BC1%0AQ%3A%20T%0AR%3A%20%24m%5Cleq%20p%20%5Cleq%20n%20%5Cwedge%20perm%28b%2C%20B%29%20%5Cwedge%20b%24%21%5BAlt%20text%5D%28./1453771195972.png%29%0AP%3A%20%24m%3Cq%20%5Cleq%20p+1%20%5Cleq%20n%20%5Cwedge%20x%3DB%5Bm%5D%20%5Cwedge%20%24%21%5BAlt%20text%5D%28./1453771223774.png%29%0ABound%3A%20t%20%3D%20p-q+1%0AIS%3A%20p%3A%3Dn-1%2C%20q%3A%3Dm+1%0A%u6839%u636E5%u6761%5BCheck%20List%5D%28%23checklist%29%uFF0C%u4F9D%u6B21check%uFF1A%0A1.%20wp%28IS%2C%20P%29%20%3D%20%24m%3Cm+1%5Cleq%20n%20%5Cwedge%20%28x%3DB%5Bm%5D%29%20%5Cwedge%20%24%21%5BAlt%20text%5D%28./1453771263078.png%29%0A%u663E%u7136%u662F%u6210%u7ACB%u7684%0A2.%20P%24%5Cwedge%24**BB**%24%5Cwedge%20B_i%20%5CRightarrow%24%20wp%28%24S_i%24%2CP%29%0A%u8FD9%u4E2A%u663E%u7136%u4E5F%u662F%u6210%u7ACB%u7684%uFF0C%u56E0%u4E3A%u6211%u4EEC%u7684%24B_i%24%u5C31%u662F%u8FD9%u4E48%u6765%u7684%0A3.%20P%24%5Cwedge%20%5Cdaleth%24**BB**%24%5CRightarrow%24R%0A%u540C%u4E0A%uFF0C%u4EA6%u6210%u7ACB%0A4.%20P%24%5Cwedge%24**BB**%24%5CRightarrow%24%28t%5C%3E0%29%0A**BB**%20%3D%20%28p%24%5Cneq%24q-1%29%20%24%5CLeftrightarrow%24%20p-q+1%24%5Cneq%240%0A%u53C8%u7531P%u6709%0Aq%24%5Cleq%24p+1%20%24%5CLeftrightarrow%24%20p-q+1%24%5Cgeq%240%0A%24%5Ctherefore%24%20t%3Dp-q+1%3E0%0A%u5F97%u8BC1%0A5.%20P%24%5Cwedge%20B_i%20%5CRightarrow%24%20wp%28%22%24t_1%3Dt%3BS_i%24%22%2C%20%22t%3Ct1%22%29%0A%u5BF9%u4E8E%u4E09%u79CD%24S_i%24%2Ct%u90FD%u663E%u7136%u4F1A%u53D8%u5C0F%uFF0C%u6240%u4EE5%u6EE1%u8DB3%0A%0A%u7EFC%u4E0A%uFF0C5%u6761check%20point%u90FD%u6EE1%u8DB3%uFF0C%u7A0B%u5E8F%u6B63%u786E%u6027%u53EF%u4FDD%u8BC1%0A%23%23%23Sort%0A%23%23%23%23%u63A8%u5BFC%0A%u6839%u636E%u5FEB%u901F%u6392%u5E8F%u7B97%u6CD5%u53EF%u77E5%uFF0C%u5BF9%u6570%u7EC4%u6392%u5E8F%uFF0C%u5373%u8FDB%u884C%u82E5%u5E72%u6B21%u5206%u5272%uFF0C%u76F4%u81F3%u5B50%u533A%u95F4%u5305%u542B%24%5Cleq%242%u4E2A%u5143%u7D20%uFF0C%u5373%u53EF%u4EE5%u8FDB%u884C%u76F4%u63A5%u6392%u5E8F%u3002%0A*%20P%3A%20*s*%20is%20a%20set%20of%20pairs%20%28i%2C%20j%29%20representing%20disjoint%20array%20sections%20b%5Bi%3Aj%5D%20of%20b.%20Further%uFF0Cb%5B0%3An%u20141%5D%20is%20ordered%20iff%20all%20the%20disjoint%20partitions%20given%20by%20set%20*s*%20are.%0A*%20IS%3A%20*s*%3A%3D%7B%280%2Cn-1%29%7D%0A*%20R%3A%20b%5B0%3An-1%5D%20are%20ordered%0A*%20t%3A%20n%20-%20ordered%0A%0A%u5FEB%u901F%u6392%u5E8F%u7A0B%u5E8F%u5982%u4E0B%3A%0A*s*%3A%3D%7B%280%2Cn-1%29%7D%0A%7B*Invariant*%3A%20%u5982%u4E0AP%7D%0A**do**%20*s*%24%5Cneq%24%7B%7D%20%24%5Crightarrow%24%20Choose%28%28i%2Cj%29%2C*s*%29%3B%20s%3A%3Ds-%7B%28i%2Cj%29%7D%3B%0A%u3000%u3000%u3000**if**%20j-i%20%5C%3C%202%20%24%5Crightarrow%24%20Sort%20b%5Bi%3Aj%5D%20directly%0A%u3000%u3000%u3000%24%5Csquare%24%20j-i%20%24%5Cgeq%242%20%24%5Crightarrow%24%20Partition%28b%2Ci%2Cj%2Cp%3B%29%3B%20%24s%3A%3Ds%5Ccup%20%7B%28i%2Cp-1%29%7D%20%5Ccup%20%7B%28p+1%2Cj%29%7D%24%0A%u3000%u3000%u3000**fi**%0A**od**%0A%23%23%23%23C%u4EE3%u7801%0A%u6700%u7EC8Quick%20Sort%20C%u4EE3%u7801%u5B9E%u73B0%u5982%u4E0B%3A%0A%60%60%60c%0A%23define%20N%09%09%0950%0A%23define%20MAX_SPLIT%20%0950%20//%20This%20should%20be%20logN%0Avoid%20swap%28int*%20b%2C%20int%20p%2C%20int%20q%29%0A%7B%0A%09b%5Bp%5D%3Db%5Bp%5D+b%5Bq%5D%3B%0A%09b%5Bq%5D%3Db%5Bp%5D-b%5Bq%5D%3B%0A%09b%5Bp%5D%3Db%5Bp%5D-b%5Bq%5D%3B%0A%7D%0Aint%20Partition%20%28int*%20b%2C%20int%20m%2C%20int%20n%29%0A%7B%0A%09assert%28n%3Em%29%3B%0A%09int%20p%3Dn-1%2C%20q%3Dm+1%3B%0A%09while%20%28p%20%21%3D%20q-1%29%0A%09%7B%0A%09%09if%20%28b%5Bp%5D%3Ex%29%0A%09%09%7B%0A%09%09%09p--%3B%0A%09%09%7D%0A%09%09else%20if%20%28b%5Bq%5D%3C%3Dx%29%0A%09%09%7B%0A%09%09%09q++%3B%0A%09%09%7D%0A%09%09else%20if%20%28b%5Bq%5D%3C%3Dx%20%26%26%20b%5Bp%5D%3Ex%29%0A%09%09%7B%0A%09%09%09swap%28b%2C%20p%20%2Cq%29%3B%0A%09%09%09p--%3B%0A%09%09%09q++%3B%0A%09%09%7D%0A%09%7D%0A%09return%20p%3B%0A%7D%0Avoid%20QuickSort%28int*%20b%2C%20int%20n%29%0A%7B%0A%09typedef%20struct%20%0A%09%7B%0A%09%09int%20start%3B%0A%09%09int%20end%3B%0A%09%7DPair%20s%5BMAX_SPLIT%5D%20%3D%20%7B0%7D%3B%0A%09int%20count%20%3D%201%3B%20//%20how%20many%20pairs%20in%20s%0A%09s%5B0%5D.start%20%3D%200%3B%0A%09s%5B0%5D.end%20%3D%20n-1%3B%0A%09while%20%28count%20%3E%200%29%0A%09%7B%0A%09%09Pair%20p%3B%0A%09%09memcpy%28%26p%2C%20%26s%5Bcount-1%5D%2C%20sizeof%28Pair%29%29%3B%0A%09%09if%28p.end%20-%20p.start%20%3C%202%29%0A%09%09%7B%0A%09%09%09if%20%28p.start%20%3E%20p.end%29%0A%09%09%09%7B%0A%09%09%09%09swap%20%28b%2C%20p.start%2C%20p.end%29%3B%0A%09%09%09%09count%20--%3B%0A%09%09%09%7D%0A%09%09%09else%0A%09%09%09%7B%0A%09%09%09%09int%20m%20%3D%20p.start%3B%0A%09%09%09%09int%20n%20%3D%20p.end%20-%20p.start%20+%201%3B%0A%09%09%09%09int%20x%20%3D%20Partition%28b%2C%20m%2C%20n%29%3B%0A%09%09%09%09s%5Bcount-1%5D.start%20%3D%20p.start%3B%0A%09%09%09%09s%5Bcount-1%5D.end%20%3D%20x-1%3B%0A%09%09%09%09s%5Bcount%5D.start%20%3D%20x+1%3B%0A%09%09%09%09s%5Bcount%5D.end%20%3D%20p.end%3B%0A%09%09%09%09count%20++%3B%0A%09%09%09%7D%0A%09%09%7D%20%0A%09%7D%0A%7D%0A%60%60%60%0A%0A%0A%0A%0A%0A%0A</center><br></div></div></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2016/01/04/quicksort-tui-dao-the-science-of-programming-trashed/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2016/01/04/quicksort-tui-dao-the-science-of-programming-trashed/" class="post-title-link" itemprop="url">QuickSort推导 - The Science of Programming</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-01-04 14:41:30" itemprop="dateCreated datePublished" datetime="2016-01-04T14:41:30+08:00">2016-01-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-11 07:03:45" itemprop="dateModified" datetime="2019-02-11T07:03:45+08:00">2019-02-11</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/未分类/" itemprop="url" rel="index"><span itemprop="name">未分类</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2016/01/04/quicksort-tui-dao-the-science-of-programming-trashed/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2016/01/04/quicksort-tui-dao-the-science-of-programming-trashed/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@(学习笔记)[读书笔记, Programming]</p>
<p>由于近日开发单片机程序的时候，写到一个小循环，不能确定其正确性，进而想到这本书的内容，算是一个小小的回顾。本书的读书笔记参考这篇<a href="https://www.evernote.com/shard/s24/nl/697376807/c79122e8-c790-44b7-afa4-93eca3ad662e/">The Science of Programming</a>。<br>正所谓温故而知新，这次重新摘读又有些新的收获。本想以QuickSort作为一个练习来运用本书的知识，结果尝试了许久，发现越陷越深。最后还是找了书上的例子（书中有QuickSort的例子）。本文最终目标是阐述如何推导QuickSort程序本身。先摘取一些重要的知识点,再利用这些知识点来推导QuickSort。</p>
<ul>
<li><a href="#toc_0">知识点梳理</a><ul>
<li><a href="#toc_1">1. Quantification（量化）[原书4.2节]</a></li>
<li><a href="#toc_2">2. 何为wp？[原书第7章]</a></li>
<li><a href="#toc_3">3. 循环检查 (原书第11章)</a><ul>
<li><a href="#toc_4">Invariant</a></li>
<li><a href="#toc_5">Bound</a></li>
<li><a href="#toc_6">Checklist</a></li>
</ul>
</li>
<li><a href="#toc_7">4. 如何运用所有的知识来开发一段程序（原书PART III）</a><ul>
<li><a href="#toc_8">推测Command</a></li>
<li><a href="#toc_9">获得Guard（原书第15章）</a></li>
<li><a href="#toc_10">获得不变量Invariant（原书第16章）</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#toc_11">推导Quick Sort （原书18.2节）</a><ul>
<li><a href="#toc_12">Partition （原书练习16.5）</a><ul>
<li><a href="#toc_13">由R获得P</a></li>
<li><a href="#toc_14">由P $wedge daleth$<strong>BB</strong> $Rightarrow$R推算BB</a></li>
<li><a href="#toc_15">Bound function</a></li>
<li><a href="#toc_16">推测command</a></li>
<li><a href="#toc_17">由command+P+BB获得Guard</a></li>
<li><a href="#toc_18">验证</a></li>
</ul>
</li>
<li><a href="#toc_19">Sort</a><ul>
<li><a href="#toc_20">推导</a></li>
<li><a href="#toc_21">C代码</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="知识点梳理"><a href="#知识点梳理" class="headerlink" title="知识点梳理"></a>知识点梳理</h2><h3 id="1-quantification量化原书42节"><a href="#1-Quantification（量化）-原书4-2节" class="headerlink" title="1. Quantification（量化）[原书4.2节]"></a>1. Quantification（量化）[原书4.2节]</h3><ul>
<li>There exists<br>(<strong><em>E</em></strong> i: m\(\leq\)i&lt;n: Ei)</li>
<li>For all<br>(<strong><em>A</em></strong> i: m\(\leq\)i&lt;n: Ei)</li>
<li>Numerial<br>(<strong><em>N</em></strong> i: m\(\leq\)i&lt;n: Ei)</li>
</ul>
<p>他们有以下特性</p>
<blockquote>
<p>(<strong><em>E</em></strong> i: m\(\leq\)i&lt;k+1: Ei) = (<strong><em>E</em></strong> i: m\(\leq\)i&lt;k: Ei) V Ek+1<br>(<strong><em>A</em></strong> i: m\(\leq\)i&lt;n: Ei) = \(\daleth\)(<strong><em>E</em></strong> i: m\(\leq\)i&lt;n: \(\daleth\)Ei)<br>(<strong><em>E</em></strong> i: m\(\leq\)i&lt;n: Ei) = (<strong><em>N</em></strong> i: m\(\leq\)i&lt;n: Ei) \(\geq\) 1<br>(<strong><em>A</em></strong> i: m\(\leq\)i&lt;n: Ei) = (<strong><em>N</em></strong> i: m\(\leq\)i&lt;n: Ei) = n-m</p>
</blockquote>
<h3 id="2-何为wp原书第7章"><a href="#2-何为wp？-原书第7章" class="headerlink" title="2. 何为wp？[原书第7章]"></a>2. 何为wp？[原书第7章]</h3><p>原书的定义：</p>
<blockquote>
<p>The Predicate Transformer wp</p>
<p>The set of all states such that execution of <strong>S</strong> begun in any one of them is guaranteed to terminate in a finite amount of time in a state satisfying <strong>R</strong>.</p>
</blockquote>
<p>wp通常被用来表达一段程序<br>\[\{Q\}S\{R\}\]<br>或者这样写<br>\[Q\Rightarrow wp(S,R)\]<br>- Q:前条件  </p>
<p>- S:执行代码（原文称为commands）  </p>
<p>- R:后条件</p>
<p><strong>wp的特性</strong></p>
<blockquote>
<p>1) wp(S,F) = F  </p>
<p>2) wp(S ^ Q) ^ wp(S,R) = wp(S,Q ^ R )  </p>
<p>3) if Q then wp(S, Q ) \(\Rightarrow\) wp(S, R)  </p>
<p>4) wp(S wp(S, R)) \(\Rightarrow\) wp(S ,Q v R)  </p>
<p>5) wp(S, Q) V wp(S, R) = wp(S, Q V R) (for deterministic S)</p>
</blockquote>
<h3 id="3-循环检查-原书第11章"><a href="#3-循环检查-原书第11章" class="headerlink" title="3. 循环检查 (原书第11章)"></a>3. 循环检查 (原书第11章)</h3><p>定义  </p>
<p>\[ wp(DO, R) \Rightarrow (E k: 0\leq k: H_k(R))\]</p>
<p>用数学语言标记一个循环如下:  </p>
<p>{Q}  </p>
<p>{inv P: the invariant}  </p>
<p>{bound t: the bound function}  </p>
<p>{init IS: initialization command}  </p>
<p><strong>do</strong> _B_1 \(\rightarrow\) _S_1  </p>
<p>\(\square\ \cdots\)  </p>
<p>\(\square\ \) _B_n \(\rightarrow\) _S_n  </p>
<p><strong>od</strong></p>
<h4 id="invariant"><a href="#Invariant" class="headerlink" title="Invariant"></a>Invariant</h4><blockquote>
<p>A predicate <strong>P</strong> that is true <strong>before and after each iteration</strong> of a loop.</p>
</blockquote>
<p>这就是说P在任何情况下都要成立，于是有  </p>
<p>- Q \(\Rightarrow\) wp(IS, P)  </p>
<p>- P \(\Rightarrow\) wp(DO, P ^ \(\daleth\)BB)</p>
<h4 id="bound"><a href="#Bound" class="headerlink" title="Bound"></a>Bound</h4><p>又叫bound function</p>
<blockquote>
<p>The function changes at each iteration; the relation remains invariantly true.<br><strong>each iteration decreases t by at least one，so that termination is guaranteed to occur.</strong></p>
</blockquote>
<p>检查bound函数确保循环能结束。</p>
<h4 id="checklist"><a href="#Checklist" class="headerlink" title="Checklist"></a>Checklist</h4><p>非常重要!!!  </p>
<p>1. Q \(\Rightarrow\) wp(IS, P)<br>2. P ^ Bi \(\Rightarrow\) wp(Si, P)<br>3. P ^ \(\daleth\)<strong>BB</strong> \(\Rightarrow\) R<br>4. P ^ <strong>BB</strong> \(\Rightarrow\) (t &gt; 0)<br>5. P ^ Bi \(\Rightarrow\) wp(t1:=t; Si, t &lt; t1)</p>
<p>依次验证这5条，就能证明一个循环的正确性了</p>
<h3 id="4-如何运用所有的知识来开发一段程序原书part-iii"><a href="#4-如何运用所有的知识来开发一段程序（原书PART-III）" class="headerlink" title="4. 如何运用所有的知识来开发一段程序（原书PART III）"></a>4. 如何运用所有的知识来开发一段程序（原书PART III）</h3><h4 id="推测command"><a href="#推测Command" class="headerlink" title="推测Command"></a>推测Command</h4><p>通过后条件R，来推测执行代码(Command)。这就是所谓的Programming as a Goal-Oriented Activity。详情参看原书第14章。</p>
<blockquote>
<p><strong>Strategy for developing an alternative command</strong>: To invent a guarded command，find a command C whose execution will establish postcondition R in at least some cases; find a Boolean B satisfying B\(\Rightarrow\)wp(C,R) and put them together to form B \(\rightarrow\)C. Continue to invent guarded commands until the precondition of the construct implies that at least one guard is true. - 原文(14.7)</p>
</blockquote>
<h4 id="获得guard原书第15章"><a href="#获得Guard（原书第15章）" class="headerlink" title="获得Guard（原书第15章）"></a>获得Guard（原书第15章）</h4><p>所有的编程都应该是结果导向的（这与测试驱动开发TDD的思想暗合）。所以后条件R是最先有的。<br>其次，通过P \(\wedge\ \daleth\)<strong>BB</strong> \(\Rightarrow\) R能得到<strong>BB</strong>（即guard）。虽然有公式A\(\Rightarrow\)B &lt;=&gt; \(\daleth\)A V B=T，但是B的获得感觉更多是依靠分析而不是推导。具体例子会在本文最后推导Quick Sort中提及。<br>其中<br>\[ \mathbf B \mathbf B = B_1 \wedge \ B\_2 \wedge \ldots \ B\_n\]<br>不过由上式可知，此时的guard还是个总的guard，还需要将之分解为各个Bi。</p>
<h4 id="获得不变量invariant原书第16章"><a href="#获得不变量Invariant（原书第16章）" class="headerlink" title="获得不变量Invariant（原书第16章）"></a>获得不变量Invariant（原书第16章）</h4><p>书中给了4种方法：  </p>
<p>1. <strong>Delete a conjunct.</strong> For example, predicate A ^ B ^ C can be weakened to A ^ C  </p>
<p>2. <strong>Replace a constant by a variable.</strong> For example, predicate x \(\leq\)b[1:10], where x is a simple variable，can be weakened to x \(\leq\) b[1:i] ^ 1\(\leq i \leq\)10，where i is a fresh variable. Since a new<br>variable has been introduced, its possible set of values must be precisely stated.  </p>
<p>3. <strong>Enlarge the range of a variable.</strong> For example, predicate 5 \(\leq\) i &lt; 10 can be weakened to 0 \(\leq\) i &lt; 10.  </p>
<p>4. <strong>Add a disjunct.</strong> For example, predicate A can be weakened to A v B, for some other predicate B.</p>
<p>书中推荐用前三个，根据阅读本书后面部分的经验，最常用的还是第二条。</p>
<h2 id="推导quick-sort-原书182节"><a href="#推导Quick-Sort-（原书18-2节）" class="headerlink" title="推导Quick Sort （原书18.2节）"></a>推导Quick Sort （原书18.2节）</h2><p>本文以推导快速排序作为结束。<br>快速排序的核心思想就是不断分割，在小数组中递归的作排序，直到小数组的元素个数少于或等于2个，即可进行直接排序了。所以分成Partition和Sort两部分。</p>
<h3 id="partition-原书练习165"><a href="#Partition-（原书练习16-5）" class="headerlink" title="Partition （原书练习16.5）"></a>Partition （原书练习16.5）</h3><p>一次分割的后条件如下<br>R: \(m\leq p&lt;n \wedge perm(b, B) \wedge b\)<img src="https://bannyzhou.files.wordpress.com/2016/01/14520041726076.jpg" alt=""></p>
<h4 id="由r获得p"><a href="#由R获得P" class="headerlink" title="由R获得P"></a>由R获得P</h4><p>通过上一节中的方法二<strong>Replace a constant by a variable.</strong>来得到P。<br>P: \(m&lt;q \leq p+1 \leq n \wedge x=B[m] \wedge \)<img src="https://bannyzhou.files.wordpress.com/2016/01/14520042104719.jpg" alt=""></p>
<h4 id="由p-wedge-dalethbb-rightarrowr推算bb"><a href="#由P-wedge-daleth-BB-Rightarrow-R推算BB" class="headerlink" title="由P \(\wedge \daleth\)BB \(\Rightarrow\)R推算BB"></a>由P \(\wedge \daleth\)<strong>BB</strong> \(\Rightarrow\)R推算BB</h4><p>注意是推算，不是严格的逻辑推导<br>\(\because\ \)P \(\wedge\) (p-q+1=0) \(\Leftrightarrow\) R<br>\(\therefore\ \daleth\)<strong>BB</strong> = (p-q+1=0)<br>\(\therefore\ \)<strong>BB</strong> = (p\(\neq\)q-1)</p>
<h4 id="bound-function"><a href="#Bound-function" class="headerlink" title="Bound function"></a>Bound function</h4><p>t = p-q+1</p>
<h4 id="推测command"><a href="#推测command" class="headerlink" title="推测command"></a>推测command</h4><p>由QuickSort的基本算法可知，有三个可能的command<br>1. q++<br>2. p–<br>3. swap(b[p], b[q])<br>所以现在程序形式如下：<br>do p\(\neq\)q-1<br>　if<strong><em>__</em></strong> \(\rightarrow\) p:=p-1<br>　\(\square\) <strong><em>__</em></strong> \(\rightarrow\) q:=q+1<br>　\(\square\) <strong><em>__</em></strong> \(\rightarrow\) swap(b[p], b[q])<br>　fi<br>od</p>
<h4 id="由commandpbb获得guard"><a href="#由command-P-BB获得Guard" class="headerlink" title="由command+P+BB获得Guard"></a>由command+P+BB获得Guard</h4><p>P\(\wedge\)<strong>BB</strong>\(\wedge B_i \Rightarrow\)wp(S,P)<br>1. S = p:=p-1<br>　　wp(S,P) = \((m<q 2016="" \\leq="" p="" n)="" \\wedge="" (x="B\[m\])" \\)![](https:="" bannyzhou.files.wordpress.com="" 01="" 14521236417702.jpg)="" \\(\\because\\)**bb**="(p\\(\\neq\\)q-1)" \\(\\therefore\\)q<p+1="" \\(\\therefore\\)q\\(\\leq\\)p="" 可见，要证出p\\(\\wedge\\)**bb**\\(\\wedge="" b_i="" \\rightarrow\\)wp(s,p)只要图形中的b\[p\]能满足分割条件就可以了，所以有="" \\\[b_i="b\[p\]">x\]<br>2. S = q:=q+1<br>过程类似<br>　　wp(S,P)=\(m&lt;q+1\leq p+1 \leq n \wedge\)<img src="https://bannyzhou.files.wordpress.com/2016/01/14521250060550.jpg" alt=""></q></p>
<p>对于前半部分的证明如下：<br>P中有\(m<q 2016="" \\leq="" p+1="" n\\)="" **bb**="(p\\(\\neq\\)q-1)" \\(\\therefore\\)="" q="" <="" p="" \\(\\leftrightarrow\\)="" \\(\\leq\\)p-1="" q+1\\(\\leq\\)p="" 得证="" 对于后半部分，显而易见需要b\[q\]\\(\\leq\\)x,即="" \\\[b_i="(b\[q\]" x)\\\]="" 3\.="" swap(b\[p\],="" b\[q\])="" 　　wp(s,p)="\\(m<q" n="" \\wedge\\)![](https:="" bannyzhou.files.wordpress.com="" 01="" 14521251135556.jpg)="" 仍然显而易见有：="" x="" \\wedge="" b\[p\]="">x\]<br>依次分割程序写作：<br><strong>do</strong> p\(\neq\)q-1<br>　<strong>if</strong> b[p]&gt;x \(\rightarrow\) p:=p-1<br>　\(\square\) b[q]\(\leq\) x \(\rightarrow\) q:=q+1<br>　\(\square\) (b[q]\(\leq\) x) \(\wedge\) (b[p]&gt;x)\(\rightarrow\) swap(b[p], b[q]); p,q:=p-1,q+1<br>　<strong>fi</strong><br><strong>od</strong></q></p>
<h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><p>Q: T<br>R: \(m\leq p \leq n \wedge perm(b, B) \wedge b\)<img src="https://bannyzhou.files.wordpress.com/2016/01/14520041726076.jpg" alt=""><br>P: \(m<q 2016="" \\leq="" p+1="" n="" \\wedge="" x="B\[m\]" \\)![](https:="" bannyzhou.files.wordpress.com="" 01="" 14520042104719.jpg)="" bound:="" t="p-q+1" is:="" p:="n-1," q:="m+1" 根据5条[check="" list](#checklist)，依次check：="" 1\.="" wp(is,="" p)="\\(m<m+1\\leq" (x="B\[m\])" 14521477150907.jpg)="" 显然是成立的="" 2\.="" p\\(\\wedge\\)**bb**\\(\\wedge="" b\_i="" \\rightarrow\\)="" wp(\\(s\_i\\),p)="" 这个显然也是成立的，因为我们的\\(b_i\\)就是这么来的="" 3\.="" p\\(\\wedge="" \\daleth\\)**bb**\\(\\rightarrow\\)r="" 同上，亦成立="" 4\.="" p\\(\\wedge\\)**bb**\\(\\rightarrow\\)(t="">0)<br><strong>BB</strong> = (p\(\neq\)q-1) \(\Leftrightarrow\) p-q+1\(\neq\)0<br>又由P有<br>q\(\leq\)p+1 \(\Leftrightarrow\) p-q+1\(\geq\)0<br>\(\therefore\) t=p-q+1&gt;0<br>得证<br>5. P\(\wedge B_i \Rightarrow\) wp(\(t_1=t;S_i\), t&lt;t1)<br>对于三种\(S_i\),t都显然会变小，所以满足</q></p>
<p>综上，5条check point都满足，程序正确性可保证</p>
<h3 id="sort"><a href="#Sort" class="headerlink" title="Sort"></a>Sort</h3><h4 id="推导"><a href="#推导" class="headerlink" title="推导"></a>推导</h4><p>根据快速排序算法可知，对数组排序，即进行若干次分割，直至子区间包含\(\leq\)2个元素，即可以进行直接排序。<br>* P: <em>s</em> is a set of pairs (i, j) representing disjoint array sections b[i:j] of b. Further，b[0:n—1] is ordered iff all the disjoint partitions given by set <em>s</em> are.<br>* IS: <em>s</em>:={(0,n-1)}<br>* R: b[0:n-1] are ordered<br>* t: n - ordered</p>
<p>快速排序程序如下:<br><em>s</em>:={(0,n-1)}<br>{<em>Invariant</em>: 如上P}<br><strong>do</strong> <em>s</em>\(\neq\){} \(\rightarrow\) Choose((i,j),<em>s</em>); s:=s-{(i,j)};<br>　　　<strong>if</strong> j-i &lt; 2 \(\rightarrow\) Sort b[i:j] directly<br>　　　\(\square\) j-i \(\geq\)2 \(\rightarrow\) Partition(b,i,j,p;); \(s:=s\cup {(i,p-1)} \cup {(p+1,j)}\)<br>　　　<strong>fi</strong><br><strong>od</strong></p>
<h4 id="c代码"><a href="#C代码" class="headerlink" title="C代码"></a>C代码</h4><p>最终Quick Sort C代码实现如下:</p>
<pre><code>#define N           50
#define MAX_SPLIT   50 // This should be logN
void swap(int* b, int p, int q)
{
    b[p]=b[p]+b[q];
    b[q]=b[p]-b[q];
    b[p]=b[p]-b[q];
}
int Partition (int* b, int m, int n)
{
    assert(n&gt;m);
    int p=n-1, q=m+1;
    while (p != q-1)
    {
        if (b[p]&gt;x)
        {
            p--;
        }
        else if (b[q]&lt;=x)
        {
            q++;
        }
        else if (b[q]&lt;=x &amp;&amp; b[p]&gt;x)
        {
            swap(b, p ,q);
            p--;
            q++;
        }
    }
    return p;
}
void QuickSort(int* b, int n)
{
    typedef struct 
    {
        int start;
        int end;
    }Pair s[MAX_SPLIT] = {0};
    int count = 1; // how many pairs in s
    s[0].start = 0;
    s[0].end = n-1;
    while (count &gt; 0)
    {
        Pair p;
        memcpy(&amp;p, &amp;s[count-1], sizeof(Pair));
        if(p.end - p.start &lt; 2)
        {
            if (p.start &gt; p.end)
            {
                swap (b, p.start, p.end);
                count --;
            }
            else
            {
                int m = p.start;
                int n = p.end - p.start + 1;
                int x = Partition(b, m, n);
                s[count-1].start = p.start;
                s[count-1].end = x-1;
                s[count].start = x+1;
                s[count].end = p.end;
                count ++;
            }
        } 
    }
}
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2015/12/26/Markdown对数学公式的支持/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2015/12/26/Markdown对数学公式的支持/" class="post-title-link" itemprop="url">Markdown对数学公式的支持</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-12-26 17:51:18" itemprop="dateCreated datePublished" datetime="2015-12-26T17:51:18+08:00">2015-12-26</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2016-01-01 07:39:54" itemprop="dateModified" datetime="2016-01-01T07:39:54+08:00">2016-01-01</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2015/12/26/Markdown对数学公式的支持/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2015/12/26/Markdown对数学公式的支持/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!DOCTYPE en-note SYSTEM 'http://xml.evernote.com/pub/enml2.dtd'><div class="enNote" style="color: #2c3f51; font-family: &apos;Helvetica Neue&apos;, Arial, &apos;Hiragino Sans GB&apos;, STHeiti, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, Song, sans-serif; line-height: 1.6;" title="" lang="v2" xml:lang="" dir=""><del style="position:relative;display:block;z-index:10;"><a style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;" href="http://maxiang.io/#/?provider=evernote_int&amp;guid=82c3b31f-2f9f-4de1-823e-aa1b3e7ae6c6&amp;notebook=%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Edit</a></del><div style="color: #2c3f51; font-family: &apos;Helvetica Neue&apos;, Arial, &apos;Hiragino Sans GB&apos;, STHeiti, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, Song, sans-serif; line-height: 1.6;"><div style="line-height: 1.6;"><div style="line-height: 1.6;"><div style="line-height: 1.6;"><div style="line-height: 1.6;"><div style="line-height: 1.6;"><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#markdown&#x5BF9;&#x6570;&#x5B66;&#x516C;&#x5F0F;&#x7684;&#x652F;&#x6301;" style="background: transparent; color: #1980e6; text-decoration: none;">Markdown&#x5BF9;&#x6570;&#x5B66;&#x516C;&#x5F0F;&#x7684;&#x652F;&#x6301;</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none; line-height: 1.6;"><li style="line-height: 1.6;"><a href="#mathjax" style="background: transparent; color: #1980e6; text-decoration: none;">MathJax</a></li></ul></li></ul></div></div></div></div><div style="line-height: 1.6;"><p style="margin: 0 0 1.1em; line-height: 1.6;"> <br>Markdown&#x7684;&#x4E66;&#x5199;&#x5DE5;&#x5177;&#x591A;&#x5982;&#x725B;&#x6BDB;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x4E0D;&#x5C3D;&#x76F8;&#x540C;&#xFF0C;&#x6709;&#x4E9B;&#x652F;&#x6301;LaTex&#x6709;&#x4E9B;&#x4E0D;&#x652F;&#x6301;&#x3002;&#x652F;&#x6301;&#x8005;&#x5982;&#x9A6C;&#x514B;&#x98DE;&#x8C61;&#xFF0C;CMD&#x5DE5;&#x4F5C;&#x7AD9;&#xFF1B;&#x4E0D;&#x652F;&#x6301;&#x8005;&#x5982;&#x6211;&#x6B63;&#x5728;&#x7528;&#x7684;MacDown&#x3002;&#x4E0D;&#x8FC7;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x56E0;&#x4E3A;Markdown&#x4E0E;HTML&#x7684;&#x5929;&#x751F;&#x8054;&#x7CFB;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x7684;&#x5185;&#x5D4C;<a href="http://docs.mathjax.org/en/latest/start.html#mathjax-cdn" target="_blank" style="background: transparent; color: #1980e6; text-decoration: none;">MathJax</a>&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p></div><div style="line-height: 1.6;"><h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0 .6em 0; text-align: start;" id="mathjax"><a name="mathjax" style="background: transparent; color: #1980e6; text-decoration: none;">MathJax</a></h2><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x5B98;&#x65B9;&#x6587;&#x6863;&#x8BF4;&#x8981;&#x5C06;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x6807;&#x7B7E;&#x52A0;&#x5230;&#x7F51;&#x9875;&#x7684;&#x4E2D;&#xFF0C;&#x4E0D;&#x8FC7;&#x6211;&#x4EEC;&#x52A0;&#x5230;&#x4E2D;&#x4F7F;&#x7528;&#x6548;&#x679C;&#x4E5F;&#x662F;&#x4E00;&#x6837;</p><pre style="font-family: &apos;Source Code Pro&apos;,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; background: #23241f; padding: 1.3em 2em;"><span style="line-height: 1.6; display: none; color: #75715e;">1.</span><span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">script</span> <span style="line-height: 1.6; color: #f92672;">type</span>=<span style="line-height: 1.6; color: #a6e22e;">&quot;text/javascript&quot;</span><br><span style="line-height: 1.6; display: none; color: #75715e;">2.</span>  <span style="line-height: 1.6; color: #f92672;">src</span>=<span style="line-height: 1.6; color: #a6e22e;">&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML.js&quot;</span>&gt;</span><span style="line-height: 1.6;"><br><span style="line-height: 1.6; display: none; color: #75715e;">3.</span></span><span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">script</span>&gt;</span><br></code></pre><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x68C0;&#x9A8C;&#x4E00;&#x4E0B;&#x6548;&#x679C;</p><ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">&#x884C;&#x7EA7;:  <br><span style="line-height: 1.6;">$</span>\daleth<span style="line-height: 1.6;">$</span> <br><span style="line-height: 1.6;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/Markdown&#x5BF9;&#x6570;&#x5B66;&#x516C;&#x5F0F;&#x7684;&#x652F;&#x6301;/SVGa25fc1d4c7fd699a05e0f1026b59e75c" hash="aee62b7842e8bb029c435bc565021d2d" align="" alt="" longdesc="" width="8.75" height="21" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></span> - Science of Programming&#x4E2D;&#x5E38;&#x7528;&#x7684;&#x7B26;&#x53F7;&#xFF0C;&#x8868;&#x793A;&#x53D6;&#x53CD;</li><li style="line-height: 1.6;">&#x5757;&#x7EA7; <br><span style="line-height: 1.6;">$</span><span style="line-height: 1.6;">$</span>bla..bla..bla<span style="line-height: 1.6;">$</span><span style="line-height: 1.6;">$</span> <br><div style="line-height: 1.6;"><div style="max-width: none; position: relative; width: 100%; text-indent: 0; margin: 1em 0; max-height: none; min-width: 0; min-height: 0; line-height: 1.6; text-align: center; display: block;"><span style="word-wrap: normal; vertical-align: middle; font-style: normal; font-weight: normal; margin: 0; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; padding: 0; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; line-height: 1.6; display: inline-block; font-size: 100%;"><span style="line-height: 1.6;"><img class="enMedia" src="/images/Markdown&#x5BF9;&#x6570;&#x5B66;&#x516C;&#x5F0F;&#x7684;&#x652F;&#x6301;/SVGe3f5ffc7eb0b8208eb18fc819997a0fa" hash="16a4ead385ee81642ba38e032661535a" align="" alt="" longdesc="" width="141.75" height="40.25" border="" hspace="" vspace="" usemap="" style="border: 0; vertical-align: middle; max-width: 100%; margin-top: 0; margin-bottom: 0;" title="" lang="" xml:lang="" dir=""></span></span></div></div></li></ul><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x53E6;&#x5916;&#x4E00;&#x70B9;&#x8FD8;&#x9700;&#x8981;&#x8BF4;&#x660E;&#x7684;&#x662F;&#xFF0C;Markdown&#x4E2D;&#x884C;&#x5185;&#x5185;&#x5D4C;&#x6570;&#x5B66;&#x516C;&#x5F0F;&#x7684;&#x6807;&#x8BB0;&#x662F;<code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">$...$</code>&#xFF0C;&#x800C;MathJax&#x9ED8;&#x8BA4;&#x5E76;&#x4E0D;&#x652F;&#x6301;&#x8BE5;&#x6807;&#x8BB0;&#xFF0C;&#x5B98;&#x65B9;&#x7684;&#x8BF4;&#x6CD5;&#x662F;</p><blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;"><p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;">That is because dollar signs appear too often in non-mathematical settings, which could cause some text to be treated as mathematics unexpectedly.</p></blockquote><p style="margin: 0 0 1.1em; line-height: 1.6;">MathJax&#x4E2D;&#x9ED8;&#x8BA4;&#x7684;&#x884C;&#x5185;&#x5185;&#x5D4C;&#x516C;&#x5F0F;&#x6807;&#x8BB0;&#x662F;<code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">\(...\)</code>&#xFF0C;&#x5199;&#x4F5C;<code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">\\(...\\)</code>&#xFF0C;&#x4F8B;&#x5982;<code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">\\(\daleth\\)</code>&#x52A0;&#x4E0A;&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5C31;&#x80FD;&#x8BA9;MathJax&#x652F;&#x6301;<code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">$...$</code>&#x4E86;</p></div><div style="line-height: 1.6;"><pre style="font-family: &apos;Source Code Pro&apos;,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; background: #23241f; padding: 1.3em 2em;"><span style="line-height: 1.6; display: none; color: #75715e;">1.</span><span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">script</span> <span style="line-height: 1.6; color: #f92672;">type</span>=<span style="line-height: 1.6; color: #a6e22e;">&quot;text/x-mathjax-config&quot;</span>&gt;</span><span style="line-height: 1.6;"> MathJax.Hub.Config({ <br><span style="line-height: 1.6; display: none; color: #75715e;">2.</span>    tex2jax: {inlineMath: [[<span style="line-height: 1.6; color: #e6db74;">&apos;$&apos;</span>,<span style="line-height: 1.6; color: #e6db74;">&apos;$&apos;</span>], [<span style="line-height: 1.6; color: #e6db74;">&apos;\\(&apos;</span>,<span style="line-height: 1.6; color: #e6db74;">&apos;\\)&apos;</span>]]} }); </span><span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">script</span>&gt;</span> <br><span style="line-height: 1.6; display: none; color: #75715e;">3.</span><span style="line-height: 1.6; color: #f8f8f2;">&lt;<span style="line-height: 1.6; color: #f92672;">script</span> <span style="line-height: 1.6; color: #f92672;">type</span>=<span style="line-height: 1.6; color: #a6e22e;">&quot;text/javascript&quot;</span> <span style="line-height: 1.6; color: #f92672;">src</span>=<span style="line-height: 1.6; color: #a6e22e;">&quot;path-to-mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;</span>&gt;</span><span style="line-height: 1.6;"><span style="line-height: 1.6; color: #f8f8f2;">&lt;/<span style="line-height: 1.6; color: #f92672;">script</span>&gt;</span><br></span></code></pre><p style="margin: 0 0 1.1em; line-height: 1.6;">&#x800C;&#x9A6C;&#x514B;&#x98DE;&#x8C61;&#x4E2D;&#x7684;MathJax&#x53EF;&#x80FD;&#x7ECF;&#x8FC7;&#x5B9A;&#x5236;&#xFF0C;&#x662F;&#x9ED8;&#x8BA4;&#x652F;&#x6301;<code style="font-family: &apos;Source Code Pro&apos;,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">$...$</code>&#x5185;&#x5D4C;&#x7684;</p></div><div style="line-height: 1.6;"></div><center style="display:none">%3Cscript%20type%3D%22text/javascript%22%0A%09%20src%3D%22https%3A//cdn.mathjax.org/mathjax/latest/MathJax.js%3Fconfig%3DTeX-AMS-MML_HTMLorMML.js%22%3E%0A%3C/script%3E%0A%5BTOC%5D%0A%23Markdown%u5BF9%u6570%u5B66%u516C%u5F0F%u7684%u652F%u6301%0A@%28%u5B66%u4E60%u7B14%u8BB0%29%5BMarkdown%5D%0AMarkdown%u7684%u4E66%u5199%u5DE5%u5177%u591A%u5982%u725B%u6BDB%uFF0C%u4F46%u662F%u5B9E%u73B0%u65B9%u5F0F%u4E0D%u5C3D%u76F8%u540C%uFF0C%u6709%u4E9B%u652F%u6301LaTex%u6709%u4E9B%u4E0D%u652F%u6301%u3002%u652F%u6301%u8005%u5982%u9A6C%u514B%u98DE%u8C61%uFF0CCMD%u5DE5%u4F5C%u7AD9%uFF1B%u4E0D%u652F%u6301%u8005%u5982%u6211%u6B63%u5728%u7528%u7684MacDown%u3002%u4E0D%u8FC7%u6CA1%u5173%u7CFB%uFF0C%u56E0%u4E3AMarkdown%u4E0EHTML%u7684%u5929%u751F%u8054%u7CFB%uFF0C%u6211%u4EEC%u53EF%u4EE5%u5F88%u597D%u7684%u5185%u5D4C%5BMathJax%5D%28http%3A//docs.mathjax.org/en/latest/start.html%23mathjax-cdn%29%u6765%u89E3%u51B3%u8FD9%u4E2A%u95EE%u9898%u3002%0A%0A%23%23MathJax%0A%u5B98%u65B9%u6587%u6863%u8BF4%u8981%u5C06%u4E0B%u9762%u8FD9%u4E2A%u6807%u7B7E%u52A0%u5230%u7F51%u9875%u7684%3Chead%3E%u4E2D%uFF0C%u4E0D%u8FC7%u6211%u4EEC%u52A0%u5230%3Cbody%3E%u4E2D%u4F7F%u7528%u6548%u679C%u4E5F%u662F%u4E00%u6837%0A%09%0A%09%3Cscript%20type%3D%22text/javascript%22%0A%09%20%20src%3D%22https%3A//cdn.mathjax.org/mathjax/latest/MathJax.js%3Fconfig%3DTeX-AMS-MML_HTMLorMML.js%22%3E%0A%09%3C/script%3E%0A%09%0A%09%0A%u68C0%u9A8C%u4E00%u4E0B%u6548%u679C%0A%0A*%20%u884C%u7EA7%3A%20%0A%20%20%20%20%5C%24%5Cdaleth%5C%24%0A%24%5Cdaleth%24%20-%20Science%20of%20Programming%u4E2D%u5E38%u7528%u7684%u7B26%u53F7%uFF0C%u8868%u793A%u53D6%u53CD%0A*%20%u5757%u7EA7%0A%20%20%20%20%5C%24%5C%24bla..bla..bla%5C%24%5C%24%0A%24%24x%3D%5Cfrac%7B-b%5Cpm%5Csqrt%7Bb%5E2-4ac%7D%7D%7B2a%7D%24%24%0A%0A%u53E6%u5916%u4E00%u70B9%u8FD8%u9700%u8981%u8BF4%u660E%u7684%u662F%uFF0CMarkdown%u4E2D%u884C%u5185%u5185%u5D4C%u6570%u5B66%u516C%u5F0F%u7684%u6807%u8BB0%u662F%60%24...%24%60%uFF0C%u800CMathJax%u9ED8%u8BA4%u5E76%u4E0D%u652F%u6301%u8BE5%u6807%u8BB0%uFF0C%u5B98%u65B9%u7684%u8BF4%u6CD5%u662F%0A%3EThat%20is%20because%20dollar%20signs%20appear%20too%20often%20in%20non-mathematical%20settings%2C%20which%20could%20cause%20some%20text%20to%20be%20treated%20as%20mathematics%20unexpectedly.%0A%0AMathJax%u4E2D%u9ED8%u8BA4%u7684%u884C%u5185%u5185%u5D4C%u516C%u5F0F%u6807%u8BB0%u662F%60%5C%28...%5C%29%60%uFF0C%u5199%u4F5C%60%5C%5C%28...%5C%5C%29%60%uFF0C%u4F8B%u5982%60%5C%5C%28%5Cdaleth%5C%5C%29%60%u52A0%u4E0A%u4E0B%u9762%u8FD9%u6BB5%u4EE3%u7801%u5C31%u80FD%u8BA9MathJax%u652F%u6301%60%24...%24%60%u4E86%0A%60%60%60xml%0A%3Cscript%20type%3D%22text/x-mathjax-config%22%3E%20MathJax.Hub.Config%28%7B%20%0A%20%20%20%20tex2jax%3A%20%7BinlineMath%3A%20%5B%5B%27%24%27%2C%27%24%27%5D%2C%20%5B%27%5C%5C%28%27%2C%27%5C%5C%29%27%5D%5D%7D%20%7D%29%3B%20%3C/script%3E%20%0A%3Cscript%20type%3D%22text/javascript%22%20src%3D%22path-to-mathjax/MathJax.js%3Fconfig%3DTeX-AMS-MML_HTMLorMML%22%3E%3C/script%3E%0A%60%60%60%0A%0A%u800C%u9A6C%u514B%u98DE%u8C61%u4E2D%u7684MathJax%u53EF%u80FD%u7ECF%u8FC7%u5B9A%u5236%uFF0C%u662F%u9ED8%u8BA4%u652F%u6301%60%24...%24%60%u5185%u5D4C%u7684%0A</center><br></div></div></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2013/08/08/The_Science_of_Programming/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2013/08/08/The_Science_of_Programming/" class="post-title-link" itemprop="url">The Science of Programming</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2013-08-08 22:11:50" itemprop="dateCreated datePublished" datetime="2013-08-08T22:11:50+08:00">2013-08-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2015-12-27 15:13:24" itemprop="dateModified" datetime="2015-12-27T15:13:24+08:00">2015-12-27</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2013/08/08/The_Science_of_Programming/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2013/08/08/The_Science_of_Programming/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="enNote" style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" title="" lang="" xml:lang="" dir=""><div><iframe class="enMedia" src="https://app.yinxiang.com/shard/s10//res/fa587501-1f55-4fac-8362-0c4c53c7b39c" hash="784bdc50d75aa5b9e8e9df7deb1da1dd" style="cursor:pointer;" name="" frameborder="0"></iframe></div><span style="font-size: 24px;"><b>Chp 1. Propositions</b></span><div>conjunction: b ^ c</div><div>disjunction: b V c</div><div>implication: b =&gt; c</div><div><br></div><div><img class="enMedia" src="/images/The Science of Programming/1537085024024" hash="9473280394917c5f5be549389371435e" align="" alt="" longdesc="" width="588" height="146" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div><b>1.4 Precedence Rules for Operators</b></div><div>The order of evaluation of different, adjacent operators is given by the list: not (has highest precedence and binds tightest), and&#xFF0C; or&#xFF0C; imp&#xFF0C;equals</div><div><br></div><div><b>1.6 Propositions as Sets of States</b></div><div>A proposition represents, or describes&#xFF0C;the set of states in which it is true.</div><div><br></div><div>Weak &amp; Strong</div><div>Proposition b is weaker than c if c =&gt;b. Correspondingly, c is said to be stronger than b. The weakest proposition is T (or any tautology), because it represents the set of all states; the strongest is F.</div><div><br></div><div style="font-size: 24px;"><b>Chp 2. Reasoning using Equivalence Transformations</b></div><div>An equivalence is an equality that is a tautology.</div><div><br></div><div><b>12&#x6761;law&#xFF0C;&#x6240;&#x6709;&#x8BC1;&#x660E;&#x7684;&#x57FA;&#x7840;</b></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>1. Commutative Laws (These allow us to reorder the operands of and, or and equality):</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>(E1 ^ E2) = (E2 ^ E1)</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>(E1 v E2) = (E2 v E1)</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>(E1 = E2 ) = (E2 = E1)</div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>2. Associative Laws (These allow us to dispense with parentheses when dealing with sequences of and and sequences of or):</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 ^ (E2 ^ E3) = (E1 ^ E2)^E3 (so write both as E1^E2^E3)</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 v (E2 v E3) = ( E1 v E2 ) v E3</div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>3. Distributive Laws (These are useful in factoring a proposition, in the same way that we rewrite 2*(3+4) as (2*3)+(2*4)):</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 v ( E2 ^ E3 ) = (E1 v E2) ^ (E1 v E3 )</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 ^ (E2 v E3) = ( E1 ^ E 2 ) v ( E1 ^ E3 )</div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>4. De Morgan&#x2019;s Laws (After Augustus De Morgan, a 19th century English mathematician who&#xFF0C;along with Boole&#xFF0C;laid much of the founda&#xAD;tions for mathematical logic):</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>&#x2510;(E1 ^ E2 ) = &#x2510;E1 v &#x2510;E2</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>&#x2510;(E1 v E2) = &#x2510;E1 ^ &#x2510;E2</div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>5. Law of Negation: &#x2510;(&#x2510;E1) = E1</div><div>6. Law of the Excluded Middle: E1 v &#x2510;E1 = T</div><div>7. Law of Contradiction: E1 ^ &#x2510;El = F</div><div>8. Law of Implication: E1 =&gt;E2 = &#x2510;E1 v E2</div><div>9. Law of Equality: (El = E2) = (E1 =&gt; E2)^(E2=&gt;E1)</div><div>10. Laws of or-simplification:</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 v E1 = E1</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 v T = T</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 v F = E1</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 v (E1 ^ E2 ) = El</div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>11. Laws of and-simplification:</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 ^ E1 = E1</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 ^ T = E1</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 ^ F = F</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>E1 ^ (E1 v E2) = E1</div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>12. Law of Identity: E1 = E1</div><div>&#x6BD4;&#x8F83;&#x4E0D;&#x5BB9;&#x6613;&#x60F3;&#x5230;&#x7684;&#x662F;&#x7B2C;8&#x6761;&#x548C;&#x7B2C;9&#x6761;&#xFF0C;&#x8981;&#x7262;&#x8BB0;&#xFF0C;&#x4E4B;&#x540E;&#x7684;&#x8BC1;&#x660E;&#x4F1A;&#x7ECF;&#x5E38;&#x7528;&#x5230;&#x3002;&#x53E6;&#x5916;&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x57FA;&#x672C;&#x5B9A;&#x7406;&#x4E2D;&#x8FD8;&#x53EF;&#x4EE5;&#x63A8;&#x5BFC;&#x51FA;&#x4EE5;&#x4E0B;&#x7684;&#x5F15;&#x7406;&#x3002;</div><div>&#x91CD;&#x8981;&#x5F15;&#x7406;&#xFF1A;(E1=&gt;E2) =&gt; (E1^E2=&gt;E1)<br>&#x8BC1;&#x660E;&#xFF1A;1) E1^E2=&gt;E1=T 2) E1=&gt;E1^E2=T<br>= &#x2513;(E1^E2)VE2 = &#x2513;E1V(E1^E2)<br>= &#x2513;E1V&#x2513;E2VE2 = (&#x2513;E1VE1)^(&#x2513;E1VE2)<br>= T = T ^ T = T</div><div>&#x8FD9;&#x4E2A;&#x4E0D;&#x662F;&#x90A3;&#x4E48;&#x5BB9;&#x6613;&#x80FD;&#x770B;&#x51FA;&#x6765;&#xFF0C;&#x6240;&#x4EE5;&#x7ED9;&#x51FA;&#x8BC1;&#x660E;&#x3002;&#x8FD9;&#x4E2A;&#x63A8;&#x5BFC;&#x8868;&#x793A;: &#x5982;&#x679C;E1=&gt;E2&#xFF0C;&#x8868;&#x793A;E1&#x662F;E2&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x96C6;</div><div><br></div></blockquote><b><span style="font-size: 24px;">Chp 3. A Natural Deduction System</span> (skip)</b><div><b><br></b><div><b><span style="font-size: 24px;">Chp 4.</span></b> <span style="font-size: 24px;"><b>Predicates</b></span></div><div><b><br></b></div><div><b>cand &amp; cor</b></div><div>The operands of these new operators can be any of three values: F, T and U (for Undefined).</div><div><img class="enMedia" src="/images/The Science of Programming/1537085023990" hash="66df1a56c7e9a0e30af6b3658a0898f1" align="" alt="" longdesc="" width="616" height="157" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div><img class="enMedia" src="/images/The Science of Programming/1537085024043" hash="e45d729773d36209c96b0ceaf8c41dfc" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div>cand/cor &#x652F;&#x6301;&#x4EE5;&#x4E0B;&#x5B9A;&#x7406;</div></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>2. Associativity:</div><div>E1 cand (E2 cand E3) = (E1 cand E2) cand E3</div><div>E1 cor (E2 cor E3) = (E1 cor E2) cor E3</div><div>3. Distributivity:</div><div>E1 cand (E2 cor E3) = (E1 cand E2) cor (E1 cand E3)</div><div>E1 cor (E2 cand E3) = (E1 cor E2) cand (E1 cor E3)</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>4. De Morgan:</div><div>&#x2510;(E1 cand E2) = &#x2510;E1 cor &#x2510;E2</div><div>&#x2510;(El cor E2) = &#x2510;E1 cand &#x2510;E2</div><div>6. Excluded Middle: E1 cor &#x2510;E1 = T (provided E1 is well-defined)</div><div>7. Contradiction: E1 cand &#x2510;E1 = F (provided E1 is well-defined)</div><div>10. cor-simplification</div><div>E1 cor E1 = E1</div><div>E1 cor T = T (provided El is well-defined)</div><div>E1 cor F = E1</div><div>E1 cor (E1 cand E2) = E1</div><div>11. cand-simplification</div><div>E1 cand E1 = E1</div><div>E1 cand T = E1</div><div>E1 cand F = F (provided El is well-defined)</div><div>E1 cand (E1 cor E2) = E1</div></blockquote><div><br></div><div><b>4.2 Quantification</b></div><div>summarize: (&#x2211;: i: 0&lt;i&lt;n:xi)</div><div>&#x8FDE;&#x4E58;&#x79EF;: (&#x220F;: i: 0&lt;i&lt;n:xi)</div><div>exist one: (E: i: 0&lt;i&lt;n: xi)</div><div>for all: (A: i: 0&lt;i&lt;n: xi)</div><div><br></div><div><b>free &amp; bound</b></div><div>(A i:m ( i &lt; n : x*i &gt;0)</div><div>m, n and x are free identifiers of the predicate. Identif&#xAD;ier i is bound.</div><div><br></div><div><b>4.4 Textual Substitution</b></div><div><img class="enMedia" src="/images/The Science of Programming/1537085024031" hash="b4e82ffa3f31c5629420402615ec89f0" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><ul><li>&#x4EC0;&#x4E48;&#x53EB;bound&#x5B57;&#x7B26;&#xFF1F;&#x770B;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;<br></li></ul><div><img class="enMedia" src="/images/The Science of Programming/1537085024014" hash="8b9f17e102bce6498d8f7d6c29ef02ad" align="" alt="" longdesc="" width="487" height="" border="" hspace="" vspace="" usemap="" style="height:auto;" title="" lang="" xml:lang="" dir=""></div><div>But this is not the desired predicate&#xFF0C;because the i in y &#x2014;i has become &#xA0;bound to the quantifier A, since it now occurs within the scope of A.</div><div><img class="enMedia" src="/images/The Science of Programming/1537085024012" hash="82a8dea36cb7e64afbbfb4bec80a7d9b" align="" alt="" longdesc="" width="530" height="" border="" hspace="" vspace="" usemap="" style="height:auto;" title="" lang="" xml:lang="" dir=""></div><div>&#x8981;&#x8FD9;&#x6837;&#x66FF;&#x6362;&#xFF0C;&#x628A;bound&#x5B57;&#x7B26;&#x5148;&#x66FF;&#x6362;&#x6210;&#x5176;&#x4ED6;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x4EE5;&#x514D;&#x9020;&#x6210;confuse&#x3002;</div><div><br></div><div style="font-size: 24px;"><b>Chp 5. Notations and Conventions for Arrays</b></div><div>Array b is considered to be a (partial) function: b is a simple variable that contains a function from subscript values to integers.</div><div><img class="enMedia" src="/images/The Science of Programming/1537085024045" hash="f3b6f14f83c28ef9ea90c4e0316a7ba1" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div><br></div><div>However, when developing a program to meet the specification it is often advantageous to <font color="#FF0000">expand the abbrevia&#xAD;tions</font> into their full form&#xFF0C;because the full form can give more insight into program development.</div><div><br></div><div style="font-size: 24px;"><b>Chp 6. Using Assertions To Document Programs</b></div><div>{Q}S{R}</div><div>Q is called the precondition or input assertion of S; R the postcondition, output assertion or result assertion.</div><div><br></div><div><b>6.3 Proof Outlines</b></div><div>A predicate placed in a program is called an assertion, we assert it is true at that point of execution. A program together with an assertion between each pair of statements is called a proof outline.</div><div><br></div><div style="font-size: 24px;"><b>Part II The Semantics of a Small Language</b></div><div style="font-size: 24px;"><b><br></b></div><div style="font-size: 24px;"><b>Chapter 7 The Predicate Transformer wp</b></div><div><b>wp( S, R)</b></div><div>The set of all states such that execution of S begun in any one of them is guaranteed to terminate in a finite amount of time in a state satisfying R.</div><div>We call wp( S, R ) the <font color="#FF0000">weakest</font> precondition of S with respect to R&#xFF0C;since it represents the set of all states such that execution begun in any one of them will terminate with R true.</div><div>weakest&#x8868;&#x793A;&#x66F4;&#x5BB9;&#x6613;&#x8FBE;&#x5230;&#x7684;&#x6761;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x8868;&#x793A;&#x6700;&#x5927;&#x5B50;&#x96C6;&#xFF0C;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x627E;&#x5230;&#x7B26;&#x5408;Q=&gt;wp(S, R)&#x7684;Q&#x3002;&#x7406;&#x89E3;&#x8FD9;&#x70B9;&#x5BF9;&#x672A;&#x6765;&#x7684;&#x63A8;&#x5BFC;&#x5F88;&#x91CD;&#x8981;&#x3002;</div><div><br></div><div><b>Some properties of wp</b></div><div>Law of the Excluded Miracle: wp ( S, F) = F</div><div>Distributivity of Conjunction: wp ( S,Q ) ^ wp ( S,R ) = wp(S, Q ^ R )</div><div>Law of Monotonicity: if Q=&gt;R then wp ( S, Q ) ^ w p ( S, R)</div><div>&#x8BC1;&#x660E;&#xFF1A;&#x5229;&#x7528;&#x5F15;&#x7406;Q=&gt;R =&gt; Q^R=Q&#xFF0C;&#x5219;&#x6709;wp(S,Q)=wp(S, Q^R)=wp(S,Q)^wp(S,R)&#xFF0C;</div>&#x2513;wp(S,Q)=&#x2513;(wp(S,Q)^wp(S,R))=&#x2513;wp(S,Q)V&#x2513;wp(S,R)<br>&#x2513;wp(S,Q)Vwp(S,R)=&#x2513;wp(S,Q)V&#x2513;wp(S,R)Vwp(S,R)=T&#xFF0C;&#x5F97;&#x8BC1;<div>Distributivity of Disjunction: wp(S,Q) V wp(S,R) = wp(S,QVR)</div><div>&#x8BC1;&#x660E;&#xFF1A;&#x539F;&#x5F0F;&#x7B49;&#x4EF7;&#x4E8E;</div>(wp(S,Q)=&gt;wp(S,QVR))^(wp(S,R)=&gt;wp(S,QVR))<br>&#x53EF;&#x4EE5;&#x8BC1;&#x660E;Q=&gt;QVR&#xFF0C;&#x5219;&#x4E0A;&#x5F0F;&#x6839;&#x636E;7.5&#x6709;&#x5DE6;&#x53F3;&#x534A;&#x90E8;&#x5206;<br>&#x5747;&#x4E3A;T&#xFF0C;&#x5373;T^T=T&#xFF0C;&#x5F97;&#x8BC1;<div>wp( S, Q ) ^ wp ( S, R) = w p ( S, Q ^ R) (for deterministic S)</div><div><br></div><div style="font-size: 24px;"><b>Chapter 8 The Commands skip&#xFF0C;abort and Composition</b></div><div><b>skip &amp; abort</b></div><div>wp(skip, R) = R</div><div>wp(abort, R) = F</div><div><br></div><div>(8.3) Definition. wp(&#x201C;S1; S2&#x201D;&#xFF0C;R) = wp(S1, wp(S2, R)).</div><div><br></div><div style="font-size: 24px;"><b>Chapter 9 The Assignment Command</b></div><div><b><font color="#FF0000">*&#x56E0;&#x4E3A;&#x7F16;&#x8F91;&#x5668;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x672C;&#x7B14;&#x8BB0;&#x6240;&#x6709;&#x7684;<img class="enMedia" src="/images/The Science of Programming/1537085023959" hash="1cef632ad75ab05c13eb020952ff9fa3" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></font></b></div><div><b><font color="#FF0000"><br></font></b></div><div>Definition: wp( &quot;x:= e&quot;, R) = domain(e) cand Rx/e</div><div>domain(e) is a predicate that describes the set of all states in which e may be evaluated - i.e. is well-defined. It must exclude all states in which evaluation of e would be undefined.</div><div><br></div><div>Execution of an assignment may change only the variable indicated and evaluation of an expression may change no variable. <font color="#FF0000">The ban on side effects is extremely important</font>, for it allows us to con&#xAD;sider expressions as conventional mathematical entities.</div><div><b><br></b></div><div>The definition of wp was used to derive the assignment&#xFF0C;and not only to show that the assignment was correct. &#x8FD9;&#x53E5;&#x8BDD;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x540E;&#x9762;&#x7B2C;&#x4E09;&#x90E8;&#x5206;&#x7684;&#x5E94;&#x7528;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x90FD;&#x662F;&#x5BF9;&#x8FD9;&#x53E5;&#x8BDD;&#x7684;&#x9610;&#x91CA;&#x3002;</div><div><br></div><div>P137&#x9875;&#x7684;Remark&#xFF0C;&#x601D;&#x8DEF;&#x5F88;&#x72EC;&#x7279;&#xFF0C;&#x6CA1;&#x6709;&#x5728;&#x672C;&#x4E66;&#x540E;&#x9762;&#x53D1;&#x73B0;&#x5BF9;&#x8BE5;&#x4F8B;&#x5B50;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x7F57;&#x5217;&#x5982;&#x4E0B;&#xFF0C;&#x76EE;&#x524D;&#x8FD8;&#x4E0D;&#x662F;&#x5F88;&#x7406;&#x89E3;</div><div><img class="enMedia" src="/images/The Science of Programming/1537085024041" hash="db67de9a7351fbab8799488e6cf414ba" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div><b>9.3 Assignment to an Array Element</b></div><div>&#x672C;&#x8282;&#x7528;&#x5230;&#x4E4B;&#x524D;&#x7AE0;&#x8282;&#x63D0;&#x51FA;&#x7684;&#x6570;&#x7EC4;&#x7684;&#x51FD;&#x6570;&#x8868;&#x793A;&#x6CD5;&#xFF0C;&#x5BF9;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x4F7F;&#x7528;&#x53EF;&#x4EE5;&#x53C2;&#x770B;P140 Example 3&#x3002;&#x5C55;&#x5F00;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x5230;&#x4E24;&#x5206;&#x6CD5;&#xFF0C;=i&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x548C;&#x2260;i&#x7684;&#x60C5;&#x51B5;</div><div><img class="enMedia" src="/images/The Science of Programming/1537085024034" hash="b9f984ba1d90ffe4a0abc40c82f97cd6" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div><br></div><div style="font-size: 24px;"><b>Chapter 10 The Alternative Command</b></div><div><b>IF&#xFF1A;</b></div><div><span style="font-size: 24px;"><img class="enMedia" src="/images/The Science of Programming/1537085023962" hash="20cd22266982468abd2bf4001e213ee3" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></span><img class="enMedia" src="/images/The Science of Programming/1537085024026" hash="9c6c4764a56229ada7b908cddfbf503d" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div>BB: B1 v B2 v...v Bn</div><div>&#x2460; BB is well-defined</div><div>&#x2461; at least one guard is true</div><div>&#x2462; Bi =&gt;wp(Si, R)</div><div><br></div><div><img class="enMedia" src="/images/The Science of Programming/1537085023985" hash="5ff453eae050e751499b32ba1610ca73" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div>&#x9898;&#x76EE;: S = (10.4), R = i&lt;=m ^ p=(N j: 0&lt;=j&lt;i: b[j]&gt;0)</div><div>&#x8BC1;&#x660E;&#xFF08;chp10_eg2_prove.txt&#xFF09;:</div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&#x8003;&#x8651;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x5F0F;&#x5B50;</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">(b[i]&gt;0 =&gt; i+1&lt;=m ^ p+1=(N j:0&lt;=j&lt;i+1: b[j]&gt;0)) ^ (b[i]&lt;0 =&gt; i+1&lt;=m ^ p=(N j:0&lt;=j&lt;i+1: b[j]&gt;0))</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">1.&#x56E0;&#x4E3A;&#x6709;b[i]&gt;0&#xFF0C;&#x6240;&#x4EE5;&#x4E0A;&#x5F0F;&#x5DE6;&#x534A;&#x8FB9;&#x7B49;&#x4EF7;&#x4E8E;(b[i]&gt;0 =&gt; i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0))</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">2.&#x540C;&#x7406;&#x4E0A;&#x5F0F;&#x53F3;&#x8FB9;&#x7B49;&#x4EF7;&#x4E3A;(b[i]&lt;0 =&gt; i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0))</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&#x6240;&#x4EE5;example 2&#x7684;&#x8BC1;&#x660E;&#x7B49;&#x4EF7;&#x5982;&#x4E0B;&#xFF1A;</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">b[i]&#x2260;0 ^ (b[i]&gt;0 =&gt; i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0)) ^ (b[i]&lt;0 =&gt; i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0))</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">= b[i]&#x2260;0 ^ (b[i]&#x2264;0 V (i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0))) ^ (b[i]&#x2265;0 V (i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0)))</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">= b[i]&#x2260;0 ^ ((b[i]&#x2264;0 ^ b[i]&#x2265;0) V (i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0)))</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">= b[i]&#x2260;0 ^ (b[i]=0 V (i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0))</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">= b[i]&#x2260;0 ^ i&lt;m ^ p=(N j:0&lt;=j&lt;i: b[j]&gt;0)</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote></blockquote>* For purposes of efficiency the programmer could strengthen the guards to excise the nondeterminism. &#x7A0B;&#x5E8F;&#x5458;&#x901A;&#x5E38;&#x901A;&#x8FC7;&#x52A0;&#x5F3A;&#x6761;&#x4EF6;&#xFF0C;&#x6765;&#x6D88;&#x9664;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#x4EE5;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x6548;&#x7387;&#x3002;<div><br></div><div><img class="enMedia" src="/images/The Science of Programming/1537085023981" hash="4ae7c3ac69d741660052ba335129e89d" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div><br></div><div><span style="font-size: 24px;"><b>Chapter 11 The Iterative Command</b></span></div><div><img class="enMedia" src="/images/The Science of Programming/1537085024030" hash="aab462b8fe86f99cbfd58e033f077821" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div><div>Choosing a true guard executing its command is called performing an iteration of the loop.</div><div><span style="font-size: 24px;"><font size="3"><br></font></span></div><div>H0(R) = &#x2510;BB ^ R</div><div>The following predicate <font color="#FF0000">H0(R)</font> represents the <font color="#FF0000">set of states</font> in which execution of DO terminates in <font color="#FF0000">0 iterations</font> with R true, because the guards are initially false.</div><div><div>Iteration: Choosing a true guard executing its command is called performing an iteration of the loop.</div><div><br></div><div>Hk(R) = H0(R) v wp (IF&#xFF0C;Hk-1(R))&#xFF0C;for k&gt;0.</div><div><br></div><div>Invariant</div><div>A predicate P that is true before and after each iteration of a loop is called an invariant relation, or simply an invariant, of the loop.</div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote></blockquote><div>Checklist for understanding a loop<br></div></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>1. Show that P is true before execution of the loop begins.</div><div><font color="#FF0000">2. Show that {P ^ Bi}Si{P}, for 1&#x2264;i&#x2264;n. That is&#xFF0C;execution of each guarded command terminates with P true, so that P is indeed an invariant of the loop.</font></div><div><font color="#FF0000">3. Show that P^&#x2510;BB =&gt; R , i.e. upon termination the desired result is true.</font></div><div>4. Show that P^BB =&gt;t&gt;0&#xFF0C;so that t is bounded from below as long as the loop has not terminated.</div><div>5. Show that {P^Bi } t1:=t; Si {t&lt;t1}, for 1&#x2264;i&#x2264;n, so that each loop iteration is guaranteed to decrease the bound func&#xAD;tion.</div><div><br></div><div>2,3&#x4E24;&#x6761;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x5148;&#x5F97;&#x5230;P,&#x518D;&#x901A;&#x8FC7;3&#x5F97;&#x5230;BB&#xFF0C;&#x518D;&#x901A;&#x8FC7;2&#x5F97;&#x5230;Si&#x3002;1&#x7528;&#x6765;&#x83B7;&#x5F97;&#x521D;&#x59CB;&#x6761;&#x4EF6;&#x3002;4,5&#x7528;&#x6765;&#x83B7;&#x5F97;bound function&#xFF0C;&#x7528;&#x6765;&#x9A8C;&#x8BC1;loop&#x7684;&#x6B63;&#x786E;&#x6027;&#x3002;&#x7EB5;&#x89C2;&#x6574;&#x4E66;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E2A;check list&#x5E94;&#x8BE5;&#x5C31;&#x662F;&#x672C;&#x4E66;&#x7684;&#x6838;&#x5FC3;&#x3002;</div><div><br></div></blockquote><span style="font-size: 24px;"><b>Chapter 12 Procedure Call (skip)</b></span><div><span style="font-size: 24px;"><b><br></b></span></div><div><b><span style="font-size: 24px;">Part III The Development of Programs</span></b></div><div><div>&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x7406;&#x8BBA;&#x63A8;&#x5BFC;&#x7684;&#x57FA;&#x7840;&#x5B9A;&#x7406;&#xFF0C;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#x5C06;&#x8BE5;&#x57FA;&#x7840;&#x5B9A;&#x7406;&#x4E0A;&#x5347;&#x5230;&#x5BF9;&#x7A0B;&#x5E8F;&#x7279;&#x5F81;&#x7684;&#x63A8;&#x5BFC;&#xFF0C;&#x7B2C;&#x4E09;&#x90E8;&#x5206;&#x5C06;&#x6B64;&#x63A8;&#x5BFC;&#x5E94;&#x7528;&#x5230;&#x5F00;&#x53D1;&#x7A0B;&#x5E8F;&#x4EE5;&#x53CA;&#x9A8C;&#x8BC1;&#x7A0B;&#x5E8F;&#x7684;&#x6B63;&#x786E;&#x6027;&#x3002;</div><div><br></div><b><span style="font-size: 24px;">Chapter 13 Introduction</span></b></div><div>It is just too difficult to prove an already existing program correct, and it is far better to use the proof-of-correctness ideas throughout the program&#xAD;ming process for insight.</div><div><br></div><div><b>formality &amp; common sense</b></div><div>What is needed is a fine balance between the two.</div><div><font color="#FF0000"><b>Principle</b>: Use theory to provide insight; use common sense and intuition where it is suitable, but fall back on the formal theory for support when difficulties and com&#xAD;plexities arise. &#x7406;&#x89E3;&#x8FD9;&#x6BB5;&#x8BDD;&#x5F88;&#x91CD;&#x8981;</font></div><div><font color="#FF0000"><br></font></div><div><b>Principle</b>: Know the properties of the objects that are to be manipulated by a program.</div><div><br></div><div style="font-size: 24px;"><b>Chapter 14 Programming as a Goal-Oriented Activity</b></div><div><b>Principle</b>: Programming is a goal-oriented activity.</div><div><b>Principle</b>: Before attempting to solve a problem, make absolutely sure you know what the problem is.</div><div><b>Principle</b>: Before developing a program, make precise and refine the pre- and postconditions.</div><div><font color="#FF0000">&#x8FD9;&#x4E09;&#x6761;&#x8981;&#x597D;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x5F88;&#x91CD;&#x8981;</font></div><div><font color="#FF0000"><br></font></div><div><b>Strategy for developing an alternative command:</b></div><div>&#x2460;find a command C whose execution will establish postcondition R in at least some cases.</div><div>&#x2461;find a Boolean B satisfying B=&gt;wp(C, R)</div><div>&#x2462;repeat &#x2460;&#x2461; ---&gt; B1vB2v...vBn = T</div><div><br></div><div>&#x5173;&#x4E8E;&#x63A8;&#x5BFC;&#x7684;&#x4E24;&#x4E2A;&#x4F8B;&#x5B50;&#x5982;&#x4E0B;&#xFF1A;eg1 (P186) &amp; eg2 (P189)</div><img class="enMedia" src="/images/The Science of Programming/IMG20130812165658.094.jpg" hash="6894baf74f281e23a636389e0f05976f" align="" alt="" longdesc="" width="1141" height="814" border="" hspace="" vspace="" usemap="" style="cursor: default; height: auto;" title="" lang="" xml:lang="" dir=""></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2013/05/22/Cortex_M3_(STM32)/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2013/05/22/Cortex_M3_(STM32)/" class="post-title-link" itemprop="url">Cortex M3 (STM32)</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2013-05-22 16:28:26 / Modified: 17:12:23" itemprop="dateCreated datePublished" datetime="2013-05-22T16:28:26+08:00">2013-05-22</time>
            

            
              

              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2013/05/22/Cortex_M3_(STM32)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2013/05/22/Cortex_M3_(STM32)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="enNote" style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" title="" lang="" xml:lang="" dir=""><span style="font-size: 21px;"><b><font color="#2D4FC9">1.&#x542F;&#x52A8;&#x6D41;&#x7A0B;</font></b></span><div>&#xA0; &#xA0; &#xA0;&#x6709;&#x4E24;&#x6839;boot pin&#xFF0C;&#x6765;&#x9009;&#x62E9;&#x542F;&#x52A8;&#x8BBE;&#x5907;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x4ECE;flash&#x542F;&#x52A8;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x4ECE;system memory&#x6216;&#x8005;SRAM&#x542F;&#x52A8;&#x3002;</div><div>&#xA0; &#xA0; &#xA0;&#x5982;&#x679C;&#x8D70;system memory&#x542F;&#x52A8;&#x7684;&#x8BDD;&#xFF0C;&#x5176;&#x5B9E;&#x662F;&#x8D70;ST&#x56FA;&#x5316;&#x5728;&#x8FD9;&#x7247;&#x5B58;&#x50A8;&#x533A;&#x7684;Embedded boot loader&#x3002;&#x8FD9;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;bootloader&#xFF0C;&#x4ED6;&#x80FD;&#x63D0;&#x4F9B;&#x7ED9;&#x6211;&#x4EEC;&#x5F88;&#x591A;&#x5176;&#x4ED6;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;IAP&#xFF08;In-Application Programming&#xFF09;<br><div><img class="enMedia" src="/images/Cortex M3 (STM32)/1537085028920" hash="75d833eb32075762c0a1e7c4c7291387" align="" alt="" longdesc="" width="741" height="209" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div></div><div>&#x518D;&#x770B;memory map&#xFF0C;&#x4EE5;STM32F103ZET6&#x4E3A;&#x4F8B;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x770B;block 0</div><div><br></div><div>0x0000 0000 ~ 0x0007 FFFF&#x8FD9;&#x4E00;&#x6BB5;&#xFF0C;&#x4F1A;&#x88AB;boot pin&#x8FDE;&#x63A5;&#x5230;flash&#xFF08;sram&#xFF0C;system memory&#xFF09;&#x4E0A;</div><div><img class="enMedia" src="/images/Cortex M3 (STM32)/1537085028917" hash="2abf8fa5053d620c6416b782aea4f39b" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div>&#x7CFB;&#x7EDF;&#x4E0A;&#x7535;&#x540E;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x8DD1;reset&#x6D41;&#x7A0B;&#xFF0C;&#x5F53;&#x8FDB;&#x5165;&#x8F6F;&#x4EF6;&#x6D41;&#x7A0B;&#x65F6;&#xFF0C;&#x5982;&#x4E0B;&#x8FDB;&#x884C;</div><div>&#x5728;&#x79BB;&#x5F00;&#x590D;&#x4F4D;&#x72B6;&#x6001;&#x540E;&#xFF0C;CM3&#x505A;&#x7684;&#x7B2C;&#x4E00;&#x4EF6;&#x4E8B;&#x5C31;&#x662F;&#x8BFB;&#x53D6;&#x4E0B;&#x5217;&#x4E24;&#x4E2A; 32&#x4F4D;&#x6574;&#x6570;&#x7684;&#x503C;&#xFF1A;<br><ul><li>&#xA0; &#xA0; &#xA0;&#x4ECE;&#x5730;&#x5740; 0x0000,0000&#x5904;&#x53D6;&#x51FA; MSP&#x7684;&#x521D;&#x59CB;&#x503C;&#x3002;&#xA0;</li><li>&#xA0; &#xA0; &#xA0;&#x4ECE;&#x5730;&#x5740; 0x0000,0004 &#x5904;&#x53D6;&#x51FA; PC &#x7684;&#x521D;&#x59CB;&#x503C;&#x2014;&#x2014;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x590D;&#x4F4D;&#x5411;&#x91CF;&#xFF0C;LSB &#x5FC5;&#x987B;&#x662F; 1&#x3002;&#x7136;&#x540E;&#x4ECE;&#x8FD9;</li></ul>&#x4E2A;&#x503C;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x5730;&#x5740;&#x5904;&#x53D6;&#x6307;&#x3002;</div><div><br></div><div><img class="enMedia" src="/images/Cortex M3 (STM32)/1537085028911" hash="1d6eb2466830b87218d2872290c68a0a" align="" alt="" longdesc="" width="710" height="133" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div><br>&#x7CFB;&#x7EDF;reset&#x5411;&#x91CF;&#x4E00;&#x5B9A;&#x662F;&#x8981;&#x5728;0&#x5730;&#x5740;&#x5904;&#xFF0C;&#x800C;&#x5F02;&#x5E38;&#x5411;&#x91CF;&#x8868;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;SCB_VTOR&#x6765;&#x4FEE;&#x6539;&#x3002;&#x800C;&#x4E14;&#x5411;&#x91CF;&#x8868;&#x7684;&#x7ED3;&#x6784;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x8BE6;&#x60C5;&#x8BF7;&#x89C1;&#x4E0B;&#x56FE;</div><div><img class="enMedia" src="/images/Cortex M3 (STM32)/1537085028925" hash="cb05061c6a81e36da2506371b44c75eb" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default;" title="" lang="" xml:lang="" dir=""></div><div>&#x518D;&#x770B;DMR&#x7684;&#x4E2D;&#x65AD;&#x5411;&#x91CF;&#x4EE3;&#x7801;&#xFF1A;</div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font color="#2D4FC9" face="Courier New">__root&#xA0; const&#xA0; APP_INTVECT_ELEM&#xA0; __vector_table[] @ &quot;.intvec&quot; = {</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0; { .Ptr = (void *)__sfe( &quot;CSTACK&quot; )}, &#xA0;/*&#xA0; 0, SP start value. */</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0; __iar_program_start, &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;/*&#xA0; 1, PC start value. */</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0; App_NMI_ISR, &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;/*&#xA0; 2, NMI. &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;*/</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0; App_Fault_ISR, &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;/*&#xA0; 3, Hard Fault. &#xA0; &#xA0; */</font></div><div>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;<font color="#2D4FC9" face="Courier New">&#x2026;&#x2026;</font></div><div><font color="#2D4FC9" face="Courier New">}</font></div></blockquote><div><span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;"><br></span></div><div><span style="font-family: &apos;Courier New&apos;;">APP_INTVECT_ELEM&#xA0;&#xA0;&#x662F;&#x4E00;&#x4E2A;union</span></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font color="#2D4FC9" face="Courier New">typedef&#xA0; union {</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0; CPU_FNCT_VOID&#xA0;&#xA0; Fnct;</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0; void&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; *Ptr;</font></div><div><font color="#2D4FC9" face="Courier New">} APP_INTVECT_ELEM;</font></div></blockquote><div><font face="Courier New"><font face="Courier New"><br></font></font></div><ul><li><font face="Courier New"><font face="Courier New">&#x7B2C;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x5C31;&#x662F;MSP&#xFF08;Main Stack Pointer&#xFF09;&#x503C;&#xFF0C;</font>__sfe( &quot;CSTACK&quot; )&#x6307;CSTACK&#x6BB5;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x56E0;&#x4E3A;Coretex M3&#x7684;&#x5806;&#x6808;&#x662F;&#x5411;&#x4E0A;&#x751F;&#x957F;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x503C;&#x6B63;&#x597D;&#x662F;&#x6808;&#x5E95;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</font></li><li><font face="Courier New"><font face="Courier New">&#x7B2C;&#x4E8C;&#x4E2A;&#x6210;&#x5458;</font>__iar_program_start&#x5219;&#x662F;IAR&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x51FD;&#x6570;&#xFF0C;&#x5176;&#x6E90;&#x4EE3;&#x7801;&#x5E76;&#x4E0D;&#x53EF;&#x89C1;&#xFF0C;&#x4F46;&#x4ED6;&#x4F1A;&#x8C03;&#x7528;&#x51E0;&#x4E2A;&#x51FD;&#x6570;&#x6765;&#x5B8C;&#x6210;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x4EE5;&#x53CA;&#x5916;&#x90E8;memory&#x7684;&#x521D;&#x59CB;&#x5316;&#x3002;&#x5176;&#x5185;&#x5BB9;&#x53EF;&#x53C2;&#x8003;<a href="evernote:///view/161681/s10/3bc21fd6-a9a6-4e82-9dcd-cfb8df8d7b2e/3bc21fd6-a9a6-4e82-9dcd-cfb8df8d7b2e/" style="color: rgb(105, 170, 53);">[&#x539F;&#x521B;]&#x5728;main()&#x4E4B;&#x524D;&#xFF0C;IAR&#x90FD;&#x505A;&#x4E86;&#x5565;&#xFF1F; - jk&#x7684;&#x4E13;&#x680F; - &#x535A;&#x5BA2;&#x9891;&#x9053; - CSDN.NET</a></font></li></ul></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2013/04/29/哈希搜索/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2013/04/29/哈希搜索/" class="post-title-link" itemprop="url">哈希搜索</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2013-04-29 15:50:10" itemprop="dateCreated datePublished" datetime="2013-04-29T15:50:10+08:00">2013-04-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2013-05-06 10:45:22" itemprop="dateModified" datetime="2013-05-06T10:45:22+08:00">2013-05-06</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2013/04/29/哈希搜索/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2013/04/29/哈希搜索/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="enNote" style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" title="" lang="" xml:lang="" dir=""><div><font face="Courier New">&#x54C8;&#x5E0C;&#x641C;&#x7D22;&#x662F;&#x5178;&#x578B;&#x7684;&#x4EE5;&#x7A7A;&#x95F4;&#x6362;&#x65F6;&#x95F4;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x4E0D;&#x8BBA;&#x5176;&#x5EFA;&#x7ACB;&#x54C8;&#x5E0C;&#x8868;&#x65F6;&#x95F4;&#xFF0C;&#x8FD8;&#x662F;&#x641C;&#x7D22;&#x65F6;&#x95F4;&#x5747;&#x5C0F;&#x4E8E;&#x4F18;&#x8D28;&#x7B97;&#x6CD5;&#xFF1A;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x548C;&#x4E8C;&#x5206;&#x641C;&#x7D22;&#x3002;&#x5728;&#x6570;&#x7EC4;&#x5C3A;&#x5BF8;&#x4E3A;1&#x4E07;&#xFF0C;&#x54C8;&#x5E0C;&#x53C2;&#x6570;&#x4E3A;1000&#xFF08;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x662F;val%HASH_ARG&#xFF09;&#x65F6;&#xFF0C;&#x5176;&#x65F6;&#x95F4;&#x53C2;&#x6570;&#x4E3A;</font></div><div><p>qsort takes: 1755060 ns (1.75 ms)<br clear="none">build hash table takes: 1181122 ns (1.18 ms)</p><p>Array size: 10000, Value range: 10000<br clear="none">average search time:<br clear="none">binary search: 166 ns<br clear="none">hash search: 48 ns</p></div><div><font face="Courier New"><font face="Courier New"><br></font></font></div><div><font face="Courier New">&#x5176;&#x6392;&#x5E8F;&#x65F6;&#x95F4;&#x51CF;&#x5C11;30%&#xFF0C;&#x5355;&#x6B21;&#x641C;&#x7D22;&#x65F6;&#x95F4;&#x51CF;&#x5C11;70%&#x3002;&#x6027;&#x80FD;&#x63D0;&#x5347;&#x5F88;&#x591A;&#x3002;&#x7F3A;&#x70B9;&#x662F;&#x7531;&#x4E8E;&#x5F15;&#x5165;hash_node&#x7ED3;&#x6784;&#xFF0C;1&#x4E07;&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x5927;&#x5C0F;&#x4E3A;4Bx1w&#xFF0C;&#x9700;&#x8981;&#x6269;&#x5C55;&#x51FA;16Bx1w&#xFF0C;&#x7A7A;&#x95F4;&#x4F7F;&#x7528;&#x63D0;&#x5347;&#x4E86;4&#x500D;&#x3002;&#x53E6;&#x6709;&#x7A7A;&#x95F4;&#x63D0;&#x5347;&#x4E24;&#x500D;&#x7684;&#x7B97;&#x6CD5;&#xFF08;&#x53C2;&#x8003;</font><a href="evernote:///view/161681/s10/7f820bda-9098-43ce-95de-eb1203317f77/7f820bda-9098-43ce-95de-eb1203317f77/" style="color: rgb(105, 170, 53);">&#x6563;&#x5217;&#x6CD5;&#x89E3;&#x51B3;1000&#x4E2A;&#x6574;&#x6570;&#x7684;&#x641C;&#x7D22; - cqnuztq&#x7684;&#x4E13;&#x680F; - &#x535A;&#x5BA2;&#x9891;&#x9053; - CSDN.NET</a><span style="font-family: &apos;Courier New&apos;;">&#xFF09;</span></div><div><span style="font-family: &apos;Courier New&apos;;"><br></span></div><div><span style="font-family: &apos;Courier New&apos;;">&#x5F53;&#x6570;&#x7EC4;&#x5C3A;&#x5BF8;&#x8FDB;&#x4E00;&#x6B65;&#x4E0A;&#x5347;&#xFF08;10w&#xFF09;&#xFF0C;&#x800C;&#x503C;&#x57DF;&#x4E0D;&#x53D8;&#x65F6;&#xFF0C;&#x65F6;&#x95F4;&#x53C2;&#x6570;&#x4E3A;</span></div><div><span style="font-family: &apos;Courier New&apos;;"><br></span></div><div>qsort takes: 25675050 ns (25.67 ms)<br>build hash table takes: 47017148 ns (47.02 ms)<br><br>Array size: 100000, Value range: 10000<br>average search time:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; binary search: 220 ns<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; hash search: 276 ns</div><div><br></div><div>&#x6B64;&#x65F6;&#x54C8;&#x5E0C;&#x641C;&#x7D22;&#x5DF2;&#x7ECF;&#x5728;&#x6392;&#x5E8F;&#x548C;&#x641C;&#x7D22;&#x4E0A;&#xFF0C;&#x5168;&#x9762;&#x843D;&#x540E;&#x4E86;&#x3002;&#x7A76;&#x5176;&#x539F;&#x56E0;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x56E0;&#x4E3A;&#x6B64;&#x65F6;&#x6570;&#x7EC4;&#x5C3A;&#x5BF8;&#x4E0A;&#x5347;&#xFF0C;&#x4F46;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x548C;&#x54C8;&#x5E0C;&#x53C2;&#x6570;&#x5E76;&#x6CA1;&#x53D8;&#xFF0C;&#x6240;&#x4EE5;&#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#x6570;&#x5927;&#x5927;&#x4E0A;&#x5347;&#x3002;&#x8003;&#x8651;&#x51B2;&#x7A81;&#x7684;&#x6982;&#x7387;&#x76F8;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x4E2A;&#x54C8;&#x5E0C;&#x7D22;&#x5F15;&#x4E0B;&#x7684;&#x51B2;&#x7A81;&#x6570;&#x7EA6;&#x4E3A;&#xFF08;ARRAY_SIZE / HASH_ARG&#xFF09;&#xFF0C;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x53D6;&#x503C;&#x4E3A;&#x4F8B;&#xFF0C;&#x5219;&#x51B2;&#x7A81;&#x6570;&#x4E3A;100&#xFF0C;&#x5373;&#x5176;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;100&#xFF0C;&#x800C;&#x4E8C;&#x5206;&#x641C;&#x7D22;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x4E3A;logn = 16.6&#xFF0C;&#x5DF2;&#x7ECF;&#x8FDC;&#x5C0F;&#x4E8E;&#x54C8;&#x5E0C;&#x641C;&#x7D22;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x4E86;&#x3002;</div><div><span style="font-family: &apos;Courier New&apos;;"><br></span></div><div><span style="font-family: &apos;Courier New&apos;;">&#x7EFC;&#x4E0A;&#xFF0C;&#x54C8;&#x5E0C;&#x641C;&#x7D22;&#x9002;&#x7528;&#x4E8E;&#x5C5E;&#x6027;&#x503C;&#x8303;&#x56F4;&#x8FDC;&#x5C0F;&#x4E8E;&#x6570;&#x7EC4;&#x4E2A;&#x6570;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x7B14;&#x8BB0;&#x4E2D;&#x6709;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x641C;&#x7D22;&#x7684;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x9610;&#x8FF0;&#x4E86;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#xFF08;</span><a href="evernote:///view/161681/s10/e13b4258-3932-4e07-8211-5746cd6cc1fd/e13b4258-3932-4e07-8211-5746cd6cc1fd/" style="color: rgb(105, 170, 53);">&#x4ECE;&#x5927;&#x91CF;&#x6574;&#x6570;&#x4E2D;&#x9009;&#x53D6;&#x6700;&#x5C0F;/&#x5927;&#x7684;&#x82E5;&#x5E72;&#x4E2A; &#xAB; GoCalf Blog</a><span style="font-family: &apos;Courier New&apos;;">&#xFF09;&#x3002;&#x4F46;&#x6570;&#x7EC4;&#x8303;&#x56F4;&#x4E0D;&#x80FD;&#x8FC7;&#x5927;&#xFF0C;&#x5BFC;&#x81F4;&#x51B2;&#x7A81;&#x6570;&#x4E0A;&#x5347;&#x8FC7;&#x5FEB;&#x3002;&#x6216;&#x8005;&#x8BF4;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x54C8;&#x5E0C;&#x641C;&#x7D22;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x6700;&#x597D;&#x80FD;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x80FD;&#x6D88;&#x9664;&#x51B2;&#x7A81;&#x7684;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x3002;</span></div><div><span style="font-family: &apos;Courier New&apos;;"><br></span></div><div><span style="font-family: &apos;Courier New&apos;;">&#x4E0B;&#x9762;&#x9644;&#x4E0A;&#x6E90;&#x7801;</span></div><div><span style="font-family: &apos;Courier New&apos;;"><br></span></div><font color="#2D4FC9" face="Courier New">// Hash search<br>// Ben @ 2013-04-29<br><br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;stdlib.h&gt;<br><br>struct hash_node<br>{<br>&#xA0;&#xA0;&#xA0;&#xA0; int inited;<br>&#xA0;&#xA0;&#xA0;&#xA0; int key;<br>&#xA0;&#xA0;&#xA0;&#xA0; int pos;<br>&#xA0;&#xA0;&#xA0;&#xA0; struct hash_node* next;<br>};<br><br>#define HASH_ARG&#xA0;&#xA0;&#xA0;&#xA0; 1000<br>static struct hash_node hash_table[HASH_ARG];<br><br>void build_hash_table(int* L, int size)<br>{<br>&#xA0;&#xA0;&#xA0;&#xA0; memset ((char*)hash_table, 0, sizeof(hash_table));<br><br>&#xA0;&#xA0;&#xA0;&#xA0; int i;<br>&#xA0;&#xA0;&#xA0;&#xA0; for (i=0; i&lt;size; i++)<br>&#xA0;&#xA0;&#xA0;&#xA0; {<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; int index = hash(L[i]);<br><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (hash_table[index].inited == 1)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; struct hash_node* n = &amp;hash_table[index];<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; while (n-&gt;next != NULL)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; n = n-&gt;next;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; n-&gt;next = (struct hash_node*)malloc(sizeof(struct hash_node));<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; n-&gt;next-&gt;inited = 1;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; n-&gt;next-&gt;key = L[i];<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; n-&gt;next-&gt;pos = i;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; n-&gt;next-&gt;next = NULL;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; else<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; hash_table[index].inited = 1;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; hash_table[index].key = L[i];<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; hash_table[index].pos = i;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }<br>&#xA0;&#xA0;&#xA0;&#xA0; }<br>}<br><br>void destroy_hash_table()<br>{<br>&#xA0;&#xA0;&#xA0;&#xA0; int i;<br>&#xA0;&#xA0;&#xA0;&#xA0; for(i=0; i&lt;HASH_ARG; i++)<br>&#xA0;&#xA0;&#xA0;&#xA0; {<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; struct hash_node* n = hash_table[i].next;<br><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; while (n != NULL)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; struct hash_node* tmp = n-&gt;next;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; free(n);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; n = tmp;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }<br>&#xA0;&#xA0;&#xA0;&#xA0; }<br>}<br><br>int hash(int val)<br>{<br>&#xA0;&#xA0;&#xA0;&#xA0; return val%HASH_ARG;<br>}<br><br>int hsearch(int t, int* L, int size)<br>{<br>&#xA0;&#xA0;&#xA0;&#xA0; int index = hash(t);<br>&#xA0;&#xA0;&#xA0;&#xA0; struct hash_node* i = &amp;hash_table[index];<br>&#xA0;&#xA0;&#xA0;&#xA0; while (i != NULL)<br>&#xA0;&#xA0;&#xA0;&#xA0; {<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (t == i-&gt;key)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; break;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; else<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; i = i-&gt;next;<br>&#xA0;&#xA0;&#xA0;&#xA0; }<br><br>&#xA0;&#xA0;&#xA0;&#xA0; if (i ==&#xA0; NULL)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return -1;<br>&#xA0;&#xA0;&#xA0;&#xA0; else<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return i-&gt;pos;<br>}</font><br></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2013/04/10/快速排序-qsort/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2013/04/10/快速排序-qsort/" class="post-title-link" itemprop="url">快速排序-qsort</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2013-04-10 23:51:42" itemprop="dateCreated datePublished" datetime="2013-04-10T23:51:42+08:00">2013-04-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2013-05-05 22:39:23" itemprop="dateModified" datetime="2013-05-05T22:39:23+08:00">2013-05-05</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2013/04/10/快速排序-qsort/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2013/04/10/快速排序-qsort/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="enNote" style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" title="" lang="" xml:lang="" dir=""><div><font face="Consolas">&#x6709;&#x51E0;&#x70B9;&#x8BB0;&#x5F55;&#x4E00;&#x4E0B;&#xFF1A;</font></div><div><font face="Consolas">1.&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;nlogn&#xFF0C;&#x63A8;&#x5230;&#x300A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x300B;&#x4E0A;&#x6709;&#xFF0C;&#x770B;&#x4E0D;&#x61C2;&#x3002;&#x5728;&#x8BB0;&#x5F55;&#x4E3A;&#x6709;&#x5E8F;&#x65F6;&#xFF0C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x9000;&#x5316;&#x6210;&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x3002;</font></div><div><font face="Consolas">2.&#x6CE8;&#x610F;&#x662F;low&#x8DDF;high&#x8BB0;&#x5F55;&#x4EA4;&#x6362;&#xFF0C;&#x800C;&#x5E76;&#x975E;&#x8DDF;&#x67A2;&#x8F74;&#x8BB0;&#x5F55;&#x4EA4;&#x6362;&#x3002;&#x524D;&#x8005;&#x624D;&#x80FD;&#x4FDD;&#x8BC1;low&#xFF0C;high&#x4E24;&#x90E8;&#x5206;&#x7684;&#x57FA;&#x672C;&#x6709;&#x5E8F;&#x3002;&#x53EA;&#x4E0D;&#x8FC7;&#x8981;&#x6CE8;&#x610F;&#xFF0C;low&#xFF0C;high&#x8BB0;&#x5F55;&#x4EA4;&#x6362;&#x540E;&#xFF0C;low&#x8BB0;&#x5F55;&#x672C;&#x8EAB;&#x5B58;&#x5728;&#x5076;&#x7136;&#x6027;&#xFF0C;&#x5373;&#x5176;&#x8DDF;&#x67A2;&#x8F74;&#x8BB0;&#x5F55;&#x7684;&#x76F8;&#x5BF9;&#x5927;&#x5C0F;&#x4E0D;&#x786E;&#x5B9A;&#x3002;&#x9700;&#x8981;&#x6BD4;&#x8F83;&#xFF0C;&#x7136;&#x540E;&#x505A;&#x51FA;&#x4EA4;&#x6362;&#x52A8;&#x4F5C;&#xFF0C;&#x624D;&#x80FD;&#x4FDD;&#x8BC1;&#x524D;&#x540E;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x57FA;&#x672C;&#x6709;&#x5E8F;&#xFF0C;&#x5982;&#x4E0B;&#x9762;&#x7EFF;&#x8272;&#x6CE8;&#x91CA;&#x90E8;&#x5206;&#x6240;&#x6307;&#x51FA;&#x7684;&#x3002;</font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas">================2013/5/2&#x66F4;&#x65B0;===========================</font></div><div><font face="Consolas"><br></font></div><div><font face="Consolas">Programming Pearls&#x7B2C;11&#x7AE0;&#xFF0C;&#x7740;&#x91CD;&#x4ECB;&#x7ECD;&#x4E86;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x5176;&#x8BB2;&#x89E3;&#x7684;&#x6DF1;&#x5EA6;&#x548C;&#x7B97;&#x6CD5;&#x7684;&#x4F18;&#x7F8E;&#x5EA6;&#x90FD;&#x8FDC;&#x5927;&#x4E8E;&#x4E25;&#x851A;&#x654F;&#x7684;&#x300A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x300B;&#x7B2C;&#x5341;&#x7AE0;&#x6240;&#x4ECB;&#x7ECD;&#x7684;&#x3002;&#x6311;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x57FA;&#x672C;&#x7684;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF0C;&#x5E76;&#x505A;&#x4E00;&#x4E9B;&#x7B14;&#x8BB0;</font></div><div><font face="Consolas"><br></font></div><div><font color="#41AD1C" face="Consolas">// &#x89E3;&#x51B3;&#x4E86;&#x539F;&#x5148;swap&#x76F8;&#x540C;&#x53D8;&#x91CF;&#x7684;&#x95EE;&#x9898;</font></div><div><font color="#2D4FC9" face="Courier New">#define swap(a, b) \<br>&#xA0;&#xA0;&#xA0;&#xA0; if (a!=b)\<br>&#xA0;&#xA0;&#xA0;&#xA0; {\<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; a = (a)+(b);\<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; b = (a)-(b);\<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; a = (a)-(b);\<br>&#xA0;&#xA0;&#xA0;&#xA0; }</font></div><div><font face="Consolas"><br></font></div><div><font color="#2D4FC9" face="Courier New">void qsort(int* L, int size)<br>{</font></div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <font color="#41AD1C" face="Courier New">// &#x786E;&#x4FDD;&#x9012;&#x5F52;&#x5FAA;&#x73AF;&#x80FD;&#x7ED3;&#x675F;&#xFF0C;&#x800C;&#x975E;&#x6B7B;&#x5FAA;&#x73AF;</font><font color="#2D4FC9" face="Courier New"><br>&#xA0;&#xA0;&#xA0;&#xA0; if (size &lt;= 1)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return;<br><br></font><div><font color="#41AD1C">&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="font-family: &apos;Courier New&apos;;">// i,j&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4ECE;&#x4E24;&#x4FA7;&#x5F00;&#x59CB;&#x626B;&#x63CF;&#xFF0C;</span></font></div><div><font color="#41AD1C">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <font face="Courier New">// while&#x5FAA;&#x73AF;&#x7684;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x5C06;&#x6570;&#x7EC4;&#x8F6C;&#x53D8;&#x4E3A;&#x5982;&#x4E0B;&#x56FE;</font></font></div><div><img class="enMedia" src="/images/&#x5FEB;&#x901F;&#x6392;&#x5E8F;-qsort/1537085029495" hash="9a98e9e9015027aac8f950646a9bfa6c" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div><img class="enMedia" src="/images/&#x5FEB;&#x901F;&#x6392;&#x5E8F;-qsort/1537085029488" hash="349404f4a7ca93383998d88aaf6c08ae" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<font color="#41AD1C"><font face="Courier New">//&#xA0;</font><span style="font-family: &apos;Courier New&apos;;">i&#x53D8;&#x91CF;&#x4E3A;&#x4E86;&#x627E;&#x6BD4;t&#x5927;&#x7684;&#x6570;&#xFF0C;j&#x53D8;&#x91CF;&#x4E3A;&#x4E86;&#x627E;&#x6BD4;t&#x5C0F;&#x7684;&#x6570;</span></font></div><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0;&#xA0; int t = L[0];<br>&#xA0;&#xA0;&#xA0;&#xA0; int i = 0, j = size;&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0; while (1)<br>&#xA0;&#xA0;&#xA0;&#xA0; {<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; do<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; i ++;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; } while (i&lt;size &amp;&amp; L[i]&lt;t);</font></div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <font color="#41AD1C" face="Courier New">// &#x6B64;&#x65F6;i&#x6709;&#x4E24;&#x79CD;&#x53EF;&#x80FD;&#xFF1A;</font></div><div><font color="#41AD1C" face="Courier New">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; // 1&#xFF09;i==u, 2&#xFF09;x[i]&gt;=t</font><br><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; do</font><br><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; j --;</font><br><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; } while (L[j]&gt;t);</font></div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <font color="#41AD1C" face="Courier New">// &#x6B64;&#x65F6;j&#x53EA;&#x6709;&#x4E00;&#x79CD;&#x53EF;&#x80FD;&#xFF1A;x[j]&lt;=t</font></div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <font color="#41AD1C" face="Courier New">// &#x5F53;i,j&#x4EA4;&#x53C9;&#x65F6;&#xFF0C;&#x8BF4;&#x660E;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x626B;&#x63CF;&#x5B8C;&#x6BD5;</font><font color="#2D4FC9" face="Courier New"><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (i&gt;j)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; break;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; swap (L[i], L[j]);<br>&#xA0;&#xA0;&#xA0;&#xA0; }<br>&#xA0;&#xA0;&#xA0;&#xA0; swap(L[0], L[j]);<br>&#xA0;&#xA0;&#xA0;&#xA0; qsort(L, j);<br>&#xA0;&#xA0;&#xA0;&#xA0; qsort(&amp;L[j+1], size-1-j);<br>}</font></div><div><font color="#2D4FC9" face="Courier New"><br></font></div><div><font face="Courier New">&#x6574;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x5173;&#x952E;&#x662F;&#x5728;&#x90A3;&#x4E2A;while(1)&#x5FAA;&#x73AF;&#xFF0C;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x6B64;&#x5FAA;&#x73AF;&#x53EF;&#x4EE5;&#x6B63;&#x786E;&#x7684;&#x7ED3;&#x675F;&#x3002;</font></div><div>&#x8981;&#x4FDD;&#x8BC1;&#x6B63;&#x786E;&#xFF0C;&#x8981;&#x4FDD;&#x8BC1;&#x4EE5;&#x4E0B;&#x4E09;&#x70B9;&#xFF1A;</div><div>&#xA0; &#xA0; &#xA0;1. &#x5FAA;&#x73AF;&#x7ED3;&#x675F;&#x540E;&#xFF0C;j&#x70B9;&#x5DE6;&#x4FA7;&#x7684;&#x90FD;&#x8981;&#x5C0F;&#x4E8E;t&#xFF0C;j&#x70B9;&#x53F3;&#x4FA7;&#x90FD;&#x8981;&#x5927;&#x4E8E;t</div><div>&#xA0; &#xA0; &#xA0;2. &#x5FAA;&#x73AF;&#x4E0D;&#x53D8;&#x5F0F;&#x662F;i &lt;= j</div><div>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;3. &#x4FDD;&#x8BC1;&#x5728;&#x4EA4;&#x6362;&#x65F6;&#xFF0C;i&#x3001;j&#x6CA1;&#x6709;&#x4EA4;&#x53C9;</div><div><font color="#2D4FC9" face="Courier New"><br></font></div><div><font face="Consolas"><font color="#2D4FC9"><font face="Consolas"><font color="#2D4FC9">============================================================</font></font></font></font></div><font face="Consolas"><font color="#2D4FC9">#include &lt;stdio.h&gt;</font><br><font color="#2D4FC9">#include &lt;time.h&gt;</font><br><br><font color="#41AD1C">// &#x6CE8;&#x610F;&#xFF1A;&#x4E0D;&#x52A0;{}&#xFF0C;&#x4F1A;&#x5F71;&#x54CD;&#x5230;if&#x5206;&#x652F;</font><br><font color="#2D4FC9">#define swap(a, b) \</font><br><font color="#2D4FC9">{\</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; a = (a)+(b);\</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; b = (a)-(b);\</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; a = (a)-(b);\</font><br><font color="#2D4FC9">}</font><br><font color="#2D4FC9">#define dim(a) (sizeof(a)/sizeof(a[0]))</font><br><br><font color="#2D4FC9">void qsort(int* L, int size);</font><br><br><font color="#2D4FC9">main()</font></font><div><font face="Consolas"><font color="#2D4FC9">{</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; int i;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; int a[10] = {0};</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; srand(time(NULL));</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; for (i=0; i&lt;dim(a); i++)</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; a[i] = rand() % 100;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; }</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; qsort(a, dim(a));</font><br><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; printf(&quot;a: &quot;);</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; for (i=0; i&lt;dim(a); i++)</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; printf(&quot;%d &quot;, a[i]);</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; }</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; printf(&quot;\n&quot;);</font><br><font color="#2D4FC9">}</font><br><br><font color="#2D4FC9">void qsort(int* L, int size)</font><br><font color="#2D4FC9">{</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; switch (size)</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; case 0:</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; printf (&quot;empty array is input.\n&quot;);</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; case 1:</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; printf (&quot;input array has only 1 member.\n&quot;);</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; case 2:</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (L[0] &gt; L[1])</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; swap(L[0], L[1]);</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; default:</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; break;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; }</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; int low = 1, high = size - 1;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; while(low &lt; high)</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; while (low&lt;high &amp;&amp; L[low] &lt;= L[0])</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; low ++;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (low != high)</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; swap(L[low], L[high]);</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; while (low&lt;high &amp;&amp; L[high] &gt;= L[0])</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; high --;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (low != high)</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; swap(L[low], L[high]);</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; }</font></font><div><font face="Consolas"><font color="#2D4FC9"><br></font></font></div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;<font color="#41AD1C" face="Consolas">//////////////////////</font></div><div><font face="Consolas"><font color="#41AD1C">&#xA0; &#xA0; &#xA0;// &#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x91CC;low&#x7684;&#x4F4D;&#x7F6E;&#x5B58;&#x5728;&#x968F;&#x673A;&#x6027;&#xFF0C;&#x300A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x300B;&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x6CE8;&#x610F;&#x5230;&#x8FD9;&#x70B9;</font><font color="#2D4FC9"><br>&#xA0;&#xA0;&#xA0;&#xA0; if (L[0] &gt; L[low])</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; swap(L[0], L[low])</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; else if (L[0] &lt; L[low])</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; {</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; low --;</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (low != 0)</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; swap(L[0], L[low])</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; }</font></font></div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;<span style="color: rgb(65, 173, 28); font-family: Consolas;">//////////////////////</span><br><font face="Consolas"><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; qsort(L, low);</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0; if (low &lt; size-1)</font><br><font color="#2D4FC9">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; qsort(&amp;L[low+1], size-low-1);</font><br><font color="#2D4FC9">}</font></font><br></div></div></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2013/02/16/swap_cache/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2013/02/16/swap_cache/" class="post-title-link" itemprop="url">swap cache</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2013-02-16 12:14:01" itemprop="dateCreated datePublished" datetime="2013-02-16T12:14:01+08:00">2013-02-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2013-07-20 21:59:10" itemprop="dateModified" datetime="2013-07-20T21:59:10+08:00">2013-07-20</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2013/02/16/swap_cache/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2013/02/16/swap_cache/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="enNote" style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" title="" lang="" xml:lang="" dir=""><span style="line-height: 22.390625px; background-color: rgb(255, 255, 255);">1.&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x4F1A;&#x7528;&#x5230;swap&#xFF1F;</span><div>&#xA0; &#xA0; &#xA0;1&#xFF09;&#x6362;&#x51FA;<span style="line-height: 22px;"><br></span><div>&#xA0; &#xA0; &#xA0;&#x5F53;&#x5185;&#x6838;&#x5728;&#x5206;&#x914D;&#x5185;&#x5B58;&#x65F6;&#xFF0C;&#x8C03;&#x7528;__alloc_pages&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7A7A;&#x95F2;&#x9875;&#xFF0C;&#x5185;&#x6838;&#x4F1A;&#x542F;&#x52A8;&#x9875;&#x9762;&#x4EA4;&#x6362;&#x673A;&#x5236;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;try_to_free_pages&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font color="#2D4FC9" face="Courier New">1293 &#xA0; &#xA0;page = get_page_from_freelist(gfp_mask, order,</font></div><div><font color="#2D4FC9" face="Courier New">1294&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; zonelist, ALLOC_NO_WATERMARKS);</font></div><div><font color="#2D4FC9" face="Courier New">1295&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (page)</font></div><div><font color="#2D4FC9" face="Courier New">1296&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; goto got_pg;</font></div><div><font color="#2D4FC9" face="Courier New"><br></font></div><div><font color="#2D4FC9" face="Courier New">1306 &#xA0; &#xA0;if (!w ait)</font></div><div><font color="#2D4FC9" face="Courier New">1307&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; goto nopage;</font></div><div><font color="#2D4FC9" face="Courier New"><br></font></div><div><font color="#2D4FC9" face="Courier New">1316</font></div><div><font color="#2D4FC9" face="Courier New">1317&#xA0;&#xA0;&#xA0;&#xA0; did_some_progress = try_to_free_pages(zonelist-&gt;zones, gfp_mask);</font></div><div><font color="#2D4FC9" face="Courier New"><br></font></div></blockquote>&#xA0; &#xA0; &#xA0;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5982;&#x679C;&#x5206;&#x914D;&#x8005;&#x5141;&#x8BB8;&#x7B49;&#x5F85;&#xFF0C;&#x5219;&#x4F1A;&#x5F00;&#x59CB;&#x56DE;&#x6536;&#x9875;&#x9762;&#x3002;&#x518D;&#x5F80;&#x4E0B;&#x7684;&#x8C03;&#x7528;&#x5173;&#x7CFB;&#x5982;&#x4E0B;&#xFF1A;<div>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">try_to_free_pages-&gt;shrink_zones-&gt;shrink_zone-&gt;shrink_inactive_list-&gt;add_to_swap-&gt;pageout-&gt;(swapper_space.a_ops-&gt;writepage)</span></div><div>&#xA0; &#xA0; &#xA0;&#x6700;&#x7EC8;&#x8C03;&#x7528;&#x5757;&#x8BBE;&#x5907;&#x63A5;&#x53E3;&#xFF0C;&#x5C06;page&#x5199;&#x5230;&#x78C1;&#x76D8;&#x4EA4;&#x6362;&#x5206;&#x533A;&#x7684;swap file&#x4E0A;&#x3002;</div><div>&#xA0; &#xA0; &#xA0;2&#xFF09;&#x6362;&#x5165;</div><div>&#xA0; &#xA0; &#xA0;&#x5F53;&#x5F15;&#x53D1;&#x7F3A;&#x9875;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x5185;&#x6838;&#x8C03;&#x7528;handle_pte_fault&#xFF0C;&#x5F53;&#x68C0;&#x6D4B;&#x5230;</div><div>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;!pte_present(entry) &lt;=&gt; (pte_val(pte) &amp; L_PTE_PRESENT == 0)</div><div>&#xA0; &#xA0; &#xA0;&#x6B64;&#x65F6;&#x4F1A;&#x8C03;&#x7528;do_swap_page-&gt;read_swap_cache_async-&gt;swap_readpage&#x6765;&#x8BFB;&#x5165;&#x6362;&#x51FA;&#x7684;&#x9875;&#x6570;&#x636E;&#x5230;&#x65B0;&#x7684;&#x4E00;&#x9875;&#xFF0C;&#x539F;&#x5148;&#x7684;&#x9875;&#x9762;&#x4F1A;&#x91CA;&#x653E;&#x6210;hot page&#x5230;&#x4F19;&#x4F34;&#x7CFB;&#x7EDF;&#x3002;</div><div><br></div><div>2.swap&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</div><div>&#xA0; &#xA0; &#xA0;swap&#x5C31;&#x662F;&#x4EA4;&#x6362;&#xFF0C;&#x6BCF;&#x6B21;&#x9700;&#x8981;&#x4EA4;&#x6362;&#x54EA;&#x4E9B;&#xFF0C;&#x548C;linux&#x7684;&#x9875;&#x56DE;&#x6536;&#x673A;&#x5236;&#x4E5F;&#x5C31;&#x662F;&#x8457;&#x540D;&#x7684;LRU&#x7B97;&#x6CD5;&#xFF0C;&#x6709;&#x4E9B;&#x76F8;&#x4F3C;&#x3002;&#x5F7C;&#x662F;&#x51B3;&#x5B9A;&#x8981;&#x56DE;&#x6536;&#x54EA;&#x4E9B;&#x3002;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x4E5F;&#x63D0;&#x5230;&#x8FC7;LRU&#x8FD9;&#x4E2A;&#x540D;&#x8BCD;&#x3002;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x4ED6;&#x5230;&#x5E95;&#x662F;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x7B97;&#x6CD5;&#x4E86;&#x3002;LRU = Least Recently Used&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="http://blog.csdn.net/antfang/article/details/5751786">LRU&#x7B97;&#x6CD5;</a>&#x3002;</div><div>&#xA0; &#xA0; &#xA0;&#x5BF9;&#x4E8E;&#x4EA4;&#x6362;&#x7B97;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x9875;&#x9762;&#x7684;&#x65B0;&#x65E7;&#x7A0B;&#x5EA6;&#x4E0D;&#x9700;&#x8981;&#x5F04;&#x7684;&#x90A3;&#x4E48;&#x6E05;&#x695A;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x77E5;&#x9053;&#x6709;&#x4E24;&#x4E2A;list&#xFF1A;active_list &amp; inactive_list&#x3002;&#x6BCF;&#x6B21;try_to_free_pages&#x5728;&#x4EA4;&#x6362;&#x65F6;&#xFF0C;&#x5C06;active page&#x653E;&#x4E00;&#x90E8;&#x5206;&#x5230;inactive list&#xFF0C;&#x518D;&#x5C06;inactive page&#x91CA;&#x653E;&#x4E00;&#x90E8;&#x5206;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#x3002;&#x5176;&#x6838;&#x5FC3;&#x51FD;&#x6570;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;shrink_zone&#x3002;</div><div>&#xA0; &#xA0; &#xA0;1&#xFF09;&#x9996;&#x5148;&#x6765;&#x770B;try_to_free_pages</div><div><font color="#2D4FC9" face="Courier New">&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for (priority = DEF_PRIORITY; priority &gt;= 0; priority--) {</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x2026;&#x2026;</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;nr_reclaimed += shrink_zones(priority, zones, &amp;sc);</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;shrink_slab(sc.nr_scanned, gfp_mask, lru_pages);</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x2026;&#x2026;</font></div><div><font color="#2D4FC9" face="Courier New">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }</font></div><div>&#xA0; &#xA0; &#xA0;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4E2A;priority&#x7684;&#x673A;&#x5236;&#x3002;&#x8FD9;&#x91CC;&#x5176;&#x5B9E;&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x4F18;&#x5148;&#x7EA7;&#x673A;&#x5236;&#xFF0C;&#x53EA;&#x662F;&#x6BCF;&#x6B21;&#x5C3D;&#x91CF;&#x5C11;&#x7684;&#x626B;&#x63CF;&#x9875;&#x9762;&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x901F;&#x7387;&#x3002;&#x5230;shrink_zone&#x91CC;&#x9762;&#x6709;&#xFF1A;</div><div><font face="Courier New">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <font color="#2D4FC9">zone-&gt;nr_scan_active +=</font></font></div><div><font color="#2D4FC9" face="Courier New">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;(zone_page_state(zone, NR_ACTIVE) &gt;&gt; priority) + 1;</font></div><div>&#xA0; &#xA0; &#xA0;&#x8FD9;&#x4E00;&#x6BB5;&#x6211;&#x4E00;&#x5EA6;&#x770B;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x5176;&#x5B9E;&#x4E0D;&#x8981;&#x8003;&#x8651;&#x7684;&#x90A3;&#x4E48;&#x6B7B;&#x3002;&#x4ED6;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x4E00;&#x6B65;&#x6B65;&#x589E;&#x52A0;&#x626B;&#x63CF;&#x9875;&#x9762;&#x7684;&#x6570;&#x91CF;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5F53;<span style="font-family: &apos;Courier New&apos;;">priority</span><span style="font-family: &apos;Courier New&apos;;">&#xA0;= 12~1&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x626B;&#x63CF;&#x6570;&#x91CF;&#x6BCF;&#x6B21;&#x589E;&#x52A0;zone-&gt;nr_active/(2^priority)&#x4E2A;&#x9875;&#x9762;&#x3002;&#x5982;&#x679C;&#x5230;</span><span style="font-family: &apos;Courier New&apos;;">priority</span><span style="font-family: &apos;Courier New&apos;;">&#xA0;=1&#x7684;&#x65F6;&#x5019;&#xFF0C;</span>nr_scan_active&#x4ECD;&#x7136;&#x6CA1;&#x8FBE;&#x5230;sc-&gt;swap_cluster_max&#xFF08;32&#xFF09;&#x7684;&#x8BDD;&#xFF0C;&#x5373;scan&#x7684;&#x603B;&#x6570;&#x7684;&#x7406;&#x8BBA;&#x503C;&#x4E3A;zone-&gt;nr_active*(1-1/(2^12))&#xFF0C;&#x5219;priority=0&#xFF0C;&#x6B64;&#x65F6;scan&#x603B;&#x6570;&#x5C06;&#x8D85;&#x8FC7;zone-&gt;nr_active&#x7684;&#x603B;&#x6570;&#x3002;&#x90A3;&#x662F;&#x4E0D;&#x662F;&#x5C31;&#x6709;&#x95EE;&#x9898;&#x4E86;&#x5462;&#xFF1F;&#x5F53;&#x7136;&#x4E0D;&#x662F;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x9762;&#x518D;&#x505A;&#x9875;&#x9762;&#x8F6C;&#x79FB;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x68C0;&#x6D4B;&#x6807;&#x51C6;&#x662F;list_empty&#xFF0C;&#x4E0D;&#x4F1A;&#x64CD;&#x4F5C;&#x8D85;&#x8FC7;&#x5217;&#x8868;&#x8303;&#x56F4;&#x7684;&#x9875;&#x9762;&#x7684;&#x3002;</div><div><br></div><div>&#xA0; &#xA0; &#xA0;2&#xFF09;shrink_zone</div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;<font color="#41AD1C" face="Courier New">/* &#x6839;&#x636E;priority&#x6765;&#x51B3;&#x5B9A;&#x626B;&#x63CF;&#x9875;&#x9762;&#x7684;&#x6570;&#x91CF;&#xFF0C;inactive&#x7684;&#x6570;&#x91CF;&#x91C7;&#x7528;&#x540C;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x83B7;&#x5F97;</font></div><div><font color="#41AD1C" face="Courier New">&#xA0; &#xA0; &#xA0; &#xA0;* &#x81F3;&#x5C11;&#x8981;&#x4FDD;&#x8BC1;sc-&gt;swap_cluster_max&#x4E2A;&#x9875;&#x9762;&#xFF0C;&#x5373;32&#x4E2A;&#x9875;&#x9762;</font></div><div><font color="#41AD1C" face="Courier New">&#xA0; &#xA0; &#xA0; &#xA0;*/</font></div><div><font color="#2D4FC9" face="Courier New">918&#xA0;&#xA0;&#xA0;&#xA0; zone-&gt;nr_scan_active +=<br>919&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; (zone_page_state(zone, NR_ACTIVE) &gt;&gt; priority) + 1;<br>920&#xA0;&#xA0;&#xA0;&#xA0; nr_active = zone-&gt;nr_scan_active;<br>921&#xA0;&#xA0;&#xA0;&#xA0; if (nr_active &gt;= sc-&gt;swap_cluster_max)<br>922&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; zone-&gt;nr_scan_active = 0;<br>923&#xA0;&#xA0;&#xA0;&#xA0; else<br>924&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; nr_active = 0;<br>925<br></font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<font color="#2D4FC9" face="Courier New">&#x2026;&#x2026;<br>933</font>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;<font color="#41AD1C"><span style="font-family: &apos;Courier New&apos;;">//&#xA0;</span><span style="font-family: &apos;Courier New&apos;;">nr_active: &#x4ECE;active&#x8F6C;&#x5230;inactive&#x5217;&#x8868;&#x4E0A;&#x7684;&#x9875;&#x9762;&#x6570;</span></font></div><div><font color="#41AD1C">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;<span style="font-family: &apos;Courier New&apos;;">//&#xA0;</span><span style="font-family: &apos;Courier New&apos;;">nr_inactive: &#x4ECE;inactive&#x5217;&#x8868;&#x6362;&#x51FA;&#x5230;&#x78C1;&#x76D8;&#x7684;&#x9875;&#x9762;&#x6570;</span></font><br><font color="#2D4FC9" face="Courier New">934&#xA0;&#xA0;&#xA0;&#xA0; while (nr_active || nr_inactive) {<br>935&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (nr_active) {<br>936&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; nr_to_scan = min(nr_active,<br>937&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; (unsigned long)sc-&gt;swap_cluster_max);<br>938&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; nr_active -= nr_to_scan;<br></font></div><div><font color="#2D4FC9" face="Courier New">939&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; shrink_active_list(nr_to_scan, zone, sc, priority);<br>940&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }<br>941<br>942&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (nr_inactive) {<br>943&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; nr_to_scan = min(nr_inactive,<br>944&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; (unsigned long)sc-&gt;swap_cluster_max);<br>945&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; nr_inactive -= nr_to_scan;<br>946&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; nr_reclaimed += shrink_inactive_list(nr_to_scan, zone,<br>947&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; sc);<br>948&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }<br>949&#xA0;&#xA0;&#xA0;&#xA0; }</font><br></div><div><font color="#2D4FC9" face="Courier New"><br></font></div><div>&#xA0; &#xA0; &#xA0;3&#xFF09;shrink_inactive_list</div><div>&#xA0; &#xA0; &#xA0;&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x5176;&#x5B9E;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;shrink_inactive_list&#x8981;&#x505A;&#x7684;&#x5DE5;&#x4F5C;&#x5C31;&#x662F;&#xFF0C;&#x626B;&#x63CF;&#x4F20;&#x5165;&#x7684;nr_to_scan&#x9875;&#x9762;&#xFF0C;&#x518D;&#x5C06;&#x5408;&#x9002;&#x7684;&#x9875;&#x9762;&#x6362;&#x51FA;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x6362;&#x51FA;&#x7684;&#x9875;&#x9762;&#x6570;&#x3002;&#x5176;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</div><div><img class="enMedia" src="/images/swap cache/1537085027008" hash="0d7d10ac0843681ee240a2949d8e2eef" align="" alt="" longdesc="" width="768" height="306" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div>&#xA0; &#xA0; &#xA0;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x6CA1;&#x9519;&#xFF0C;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#x3002;isolate_lru_pages&#x8D1F;&#x8D23;&#x626B;&#x63CF;&#x9875;&#x9762;&#x7684;struct page&#x7ED3;&#x6784;&#xFF0C;&#x6839;&#x636E;&#x5176;flags&#x6765;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6362;&#x51FA;&#xFF0C;&#x53EF;&#x4EE5;&#x6362;&#x51FA;&#x7684;&#x653E;&#x5230;&#x8F93;&#x51FA;&#x5217;&#x8868;&#x4E0A;&#xFF0C;&#x4EE5;&#x5907;shrink_page_list&#x6765;&#x505A;&#x771F;&#x6B63;&#x7684;&#x6362;&#x51FA;&#x3002;</div><div><br></div><div>&#xA0; &#xA0; &#xA0;4&#xFF09;shrink_page_list</div><div>&#xA0; &#xA0; &#xA0;&#x5176;&#x4E3B;&#x7EBF;&#x5982;&#x4E0B;&#xFF1A;</div><div>&#xA0; &#xA0; &#xA0;<img class="enMedia" src="/images/swap cache/1537085027018" hash="16f5dc62bc972f71ccf3912bd9d6bff5" align="" alt="" longdesc="" width="584" height="782" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div>&#xA0; &#xA0; &#xA0;&#x7ECF;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x5224;&#x65AD;&#x540E;&#xFF0C;&#x5C06;&#x9875;&#x9762;&#x6362;&#x51FA;&#xFF0C;&#x5E76;&#x4E14;&#x7528;__pagevec_release_nonlru(&amp;freed_pvec)&#x5C06;&#x9875;&#x9762;&#x91CA;&#x653E;&#x56DE;buddy system&#xFF0C;&#x6CE8;&#x610F;&#x5728;&#x521B;&#x5EFA;freed_pvec&#x65F6;&#xFF0C;&#x6307;&#x5B9A;&#x4E86;&#x9875;&#x9762;&#x7684;&#x5C5E;&#x6027;&#x4E3A;cold&#x3002;&#x6574;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x7CBE;&#x9AD3;&#xFF0C;&#x5728;&#x4E8E;&#x54EA;&#x4E9B;inactive&#x7684;&#x9875;&#x9762;&#x4E0D;&#x53EF;&#x4EE5;&#x6362;&#x51FA;&#x3002;</div><div>&#xA0; &#xA0; &#xA0;&#x5148;&#x770B;&#xFF0C;shrink_page_list&#x4E2D;&#x6709;&#x51E0;&#x4E2A;&#x6807;&#x53F7;</div><div>keep&#xFF1A;&#x76F4;&#x63A5;&#x5C06;&#x9875;&#x9762;add&#x56DE;page_list</div><div>keep_locked&#xFF1A;&#x6307;&#x8BE5;&#x9875;&#x9762;&#x5DF2;&#x7ECF;&#x88AB;lock&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x89E3;&#x9501;&#x518D;&#x8FDB;&#x5165;keep&#x6807;&#x53F7;</div><div>activate_locked&#xFF1A;&#x5C06;&#x9875;&#x9762;&#x6FC0;&#x6D3B;&#xFF0C;&#x518D;&#x653E;&#x56DE;page_list&#xFF0C;&#x8FD9;&#x4E2A;&#x5728;&#x540E;&#x7EED;&#xFF0C;&#x8BE5;&#x9875;&#x9762;&#x4F1A;&#x88AB;&#x653E;&#x5165;active list</div><div>free_it&#xFF1A;&#x8FD9;&#x4E2A;&#x662F;&#x6B63;&#x5E38;&#x6D41;&#x7A0B;&#xFF0C;&#x9875;&#x9762;&#x4F1A;&#x88AB;&#x91CA;&#x653E;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x5165;&#x626B;&#x63CF;&#x4E0B;&#x4E00;&#x4E2A;&#x9875;&#x9762;</div><div>&#xA0; &#xA0; &#xA0;&#x6240;&#x4EE5;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x51E1;&#x662F;&#x7ECF;&#x8FC7;&#x5224;&#x65AD;&#x540E;&#xFF0C;&#x8981;&#x8C03;&#x8F6C;&#x5230;&#x4EE5;&#x4E0A;&#x524D;&#x4E09;&#x4E2A;&#x6807;&#x53F7;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x90A3;&#x4E9B;&#x9875;&#x9762;&#x90FD;&#x662F;&#x4E0D;&#x4F1A;&#x88AB;&#x6362;&#x51FA;&#x91CA;&#x653E;&#x7684;&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x6709;&#x4EE5;&#x4E0B;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#xFF1A;</div><div>&#xA0; &#xA0; &#xA0;a.&#xA0;!sc-&gt;may_swap &amp;&amp; page_mapped(page)</div><div>&#xA0; &#xA0; &#xA0;b.&#xA0;PageWriteback(page)</div><div>&#xA0; &#xA0; &#xA0;c.&#xA0;PageDirty(page) &amp;&amp;&#xA0;page_referenced(page, 1)</div><div>&#xA0; &#xA0; &#xA0;d.&#xA0;PageDirty(page) &amp;&amp;&#xA0;!may_enter_fs</div><div>&#xA0; &#xA0; &#xA0;e.&#xA0;PageDirty(page) &amp;&amp;&#xA0;!sc-&gt;may_writepage</div><div>&#xA0; &#xA0; &#xA0;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;<a href="https://www.google.com.hk/url?sa=t&amp;amp;rct=j&amp;amp;q=&amp;amp;esrc=s&amp;amp;source=web&amp;amp;cd=2&amp;amp;ved=0CD4QFjAB&amp;amp;url=%68%74%74%70%3a%2f%2f%77%77%77%2e%34%75%63%6f%64%65%2e%63%6f%6d%2f%53%74%75%64%79%2f%54%6f%70%69%63%2f%31%34%37%33%37%35%34&amp;amp;ei=uoIkUcrgKIiuiQeZ8YDoCA&amp;amp;usg=AFQjCNEOl8IlmiO6gZG3632d58gOlDaxkA&amp;amp;sig2=7PgH7HVDHgF5OF-ko0qESA" target="_blank">Linux&#x8FDB;&#x7A0B;&#x8C03;&#x5EA6;&#x5207;&#x6362;&#x548C;&#x865A;&#x62DF;&#x7A7A;&#x95F4;&#x7BA1;&#x7406;&#x6DF1;&#x5165;&#x5206;&#x6790;</a></div><div>&#xA0; &#xA0; &#xA0;&#x4EE3;&#x7801;&#x4E2D;&#x591A;&#x4E2A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x6D89;&#x53CA;&#x5230;page-&gt;mapping&#x6210;&#x5458;&#xFF0C;&#x4F8B;&#x5982;page_mapping, page_mapped&#x3002;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x6210;&#x5458;&#xFF0C;&#x5176;&#x53D6;&#x503C;&#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;&#x60C5;&#x51B5;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;<a href="http://blog.chinaunix.net/uid-24517893-id-404640.html">Linux&#x5185;&#x5B58;&#x7BA1;&#x7406;&#x4E2D;address_space&#x7591;&#x60D1;&#x53CA;&#x89E3;&#x7B54;</a><span>&#xA0;</span></div><div><span>&#xFF08;1&#xFF09;swapper_space&#xFF1A;</span></div><div>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span>&#x5982;&#x679C;page-&gt;mapping&#x7B49;&#x4E8E;0&#xFF0C;&#x8BF4;&#x660E;&#x8BE5;&#x9875;&#x5C5E;&#x4E8E;&#x4EA4;&#x6362;&#x544A;&#x8BC9;&#x7F13;&#x5B58;swap cache</span><br><span>&#xFF08;2&#xFF09;anon_vma&#xFF1A;&#xA0;</span></div><div>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span>&#x5982;&#x679C;page-&gt;mapping&#x4E0D;&#x7B49;&#x4E8E;0&#xFF0C;&#x4F46;&#x7B2C;0&#x4F4D;&#x4E3A;0&#xFF0C;&#x8BF4;&#x660E;&#x8BE5;&#x9875;&#x4E3A;&#x533F;&#x540D;&#x4E5F;&#xFF0C;&#x6B64;&#x65F6;mapping&#x6307;&#x5411;&#x4E00;&#x4E2A;struct anon_vma&#x7ED3;&#x6784;&#x53D8;&#x91CF;&#xFF1B;</span><br><span>&#xFF08;3&#xFF09;address_space&#xFF1A;</span></div><div>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span>&#x5982;&#x679C;page-&gt;mapping&#x4E0D;&#x7B49;&#x4E8E;0&#xFF0C;&#x4F46;&#x7B2C;0&#x4F4D;&#x4E0D;&#x4E3A;0&#xFF0C;&#x5219;mapping&#x6307;&#x5411;&#x4E00;&#x4E2A;struct address_space&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x7ED3;&#x6784;&#x53D8;&#x91CF;&#xFF1B;</span></div><div><span><br></span></div><div>&#xA0; &#xA0; &#xA0;5&#xFF09;swap cache</div><div>&#xA0; &#xA0; &#xA0;&#x4E0A;&#x9762;&#x7B80;&#x8FF0;&#x4E86;linux&#x9875;&#x7F13;&#x51B2;&#x4EA4;&#x6362;&#x673A;&#x5236;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF0C;&#x6700;&#x540E;&#x56DE;&#x5230;swap cache&#x8FD9;&#x4E00;&#x57FA;&#x672C;&#x7ED3;&#x6784;&#x4E0A;&#x6765;&#x3002;gorman&#x7684;&#x4E66;&#x91CC;&#x9762;&#x8BB2;&#x5F97;&#x5F88;&#x6E05;&#x695A;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x505A;&#x4E00;&#x4E9B;&#x7B14;&#x8BB0;&#x3002;</div><div>&#xA0; &#xA0; &#xA0;</div><div>&#xA0; &#xA0; &#xA0;<span style="font-size: 15px;"><i><font color="#FA7A00">&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x6709;swap cache&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#xFF1F;</font></i></span></div><div>&#xA0; &#xA0; &#xA0;&#x56E0;&#x4E3A;A signi&#xFB01;cant number of the&#xA0;pages referenced by a process early in its life may only be used for initialization and&#xA0;then never used again. It is better to swap out those pages and create more disk</div>bu&#xFB00;ers than leave them resident and unused.<div><br></div><div>&#xA0; &#xA0; <span style="font-size: 15px;"><i><font color="#FA7A00">&#xA0;swap cache vs. page cache</font></i></span></div><div>&#xA0; &#xA0; &#xA0;The swap cache is purely&#xA0;conceptual because it is simply a specialization of the page cache.</div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 1.&#xA0;in the swap cache rather than the page cache is&#xA0;that pages in the swap cache always use swapper space as their address space in&#xA0;page&#x2192;mapping.</div><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 2.&#xA0;pages are added to the swap cache&#xA0;with add_to_swap_cache(),shown in Figure 11.3, instead of add_to_page_cache().</div><div><span style="color: rgb(250, 122, 0); font-size: 15px;"><font color="#000000" size="3"><br></font></span></div><div>&#xA0; &#xA0; &#xA0;&#x6240;&#x6709;&#x7684;swap file&#x4FE1;&#x606F;&#x90FD;&#x4FDD;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;</div><div>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;static struct swap_info_struct swap_info[MAX_SWAPFILES];</div><div>&#xA0; &#xA0; &#xA0;&#x53EF;&#x89C1;swap file&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x6709;MAX_SWAPFILES&#x4E2A;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;32&#x4E2A;&#x3002;</div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font color="#2D4FC9" face="Courier New">64 struct swap_info_struct {</font></div><div><font color="#2D4FC9" face="Courier New">65 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;unsigned int flags;</font></div><div><font color="#2D4FC9" face="Courier New">66 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;kdev_t swap_device;</font></div><div><font color="#2D4FC9" face="Courier New">67 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;spinlock_t sdev_lock;</font></div><div><font color="#2D4FC9" face="Courier New">68 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;struct dentry * swap_file;</font></div><div><font color="#2D4FC9" face="Courier New">69 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;struct vfsmount *swap_vfsmnt;</font></div><div><font color="#2D4FC9" face="Courier New">70 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;unsigned short * swap_map;</font></div><div><font color="#2D4FC9" face="Courier New">71 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;unsigned int lowest_bit;</font></div><div><font color="#2D4FC9" face="Courier New">72 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;unsigned int highest_bit;</font></div><div><font color="#2D4FC9" face="Courier New">73 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;unsigned int cluster_next;</font></div><div><font color="#2D4FC9" face="Courier New">74 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;unsigned int cluster_nr;</font></div><div><font color="#2D4FC9" face="Courier New">75 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;int prio;</font></div><div><font color="#2D4FC9" face="Courier New">76 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;int pages;</font></div><div><font color="#2D4FC9" face="Courier New">77 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;unsigned long max;</font></div><div><font color="#2D4FC9" face="Courier New">78 &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;int next;</font></div><div><font color="#2D4FC9" face="Courier New">79 };</font></div></blockquote>&#xA0; &#xA0; &#xA0;swap_info&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x94FE;&#x8868;&#xFF0C;&#x6BCF;&#x4E2A;&#x6210;&#x5458;&#x7528;next&#x6307;&#x5411;&#x4E86;&#x4E0B;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#x6210;&#x5458;&#x7684;&#x7D22;&#x5F15;&#x53F7;&#x3002;&#x8FD9;&#x4E2A;&#x94FE;&#x8868;&#x540C;&#x65F6;&#x7528;&#x53E6;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x63CF;&#x8FF0;&#x3002;&#x8FD9;&#x91CC;&#x6307;&#x660E;&#x4E86;&#x8FD9;&#x4E2A;&#x94FE;&#x8868;&#x7684;&#x5934;&#x5728;&#x54EA;&#x91CC;&#xFF0C;&#x5176;&#x8868;&#x5C3E;&#x6210;&#x5458;&#x7684;next = -1&#x3002;<blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font color="#2D4FC9" face="Courier New">153 struct swap_list_t {</font></div><div><font color="#2D4FC9" face="Courier New">154 &#xA0; &#xA0;&#xA0;</font><span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">int head; /* head of priority-ordered swapfile list */</span></div><div><font color="#2D4FC9" face="Courier New">155 &#xA0; &#xA0; int next; /* swapfile to be used next */</font></div><div><font color="#2D4FC9" face="Courier New">156 };</font></div></blockquote><div>&#xA0; &#xA0; &#xA0;swap area&#x7531;<span style="font-family: &apos;Courier New&apos;;">swap_info_struct&#x63CF;&#x8FF0;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x52A8;&#x6001;&#x7684;&#x589E;&#x52A0;&#x3002;&#x6BCF;&#x4E00;&#x4E2A;swap area&#x6307;&#x5411;&#x4E00;&#x4E2A;swap file&#xFF0C;&#x8BE5;file&#x88AB;&#x5206;&#x5272;&#x6210;&#x82E5;&#x5E72;&#x4E2A;page size&#x7684;slot&#xFF0C;&#x7B2C;0&#x4E2A;slot&#x88AB;&#x7528;&#x6765;&#x5B58;&#x50A8;swap_header&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</span></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font color="#2D4FC9" face="Courier New">25 union swap_header {</font></div><div><font color="#2D4FC9" face="Courier New">26&#xA0;</font>&#xA0; &#xA0; &#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">struct</span></div><div><font color="#2D4FC9" face="Courier New">27&#xA0;</font>&#xA0; &#xA0; &#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">{</span></div><div><font color="#2D4FC9" face="Courier New">28&#xA0;</font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">char reserved[PAGE_SIZE - 10];</span></div><div><font color="#2D4FC9" face="Courier New">29&#xA0;</font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">char magic[10];</span></div><div><font color="#2D4FC9" face="Courier New">30&#xA0;</font>&#xA0; &#xA0; &#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">} magic;</span></div><div><font color="#2D4FC9" face="Courier New">31&#xA0;</font>&#xA0; &#xA0; &#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">struct</span></div><div><font color="#2D4FC9" face="Courier New">32&#xA0;</font>&#xA0; &#xA0; &#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">{</span></div><div><font color="#2D4FC9" face="Courier New">33&#xA0;</font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">char bootbits[1024];</span></div><div><font color="#2D4FC9" face="Courier New">34&#xA0;</font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">unsigned int version;</span></div><div><font color="#2D4FC9" face="Courier New">35&#xA0;</font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">unsigned int last_page;</span></div><div><font color="#2D4FC9" face="Courier New">36&#xA0;</font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">unsigned int nr_badpages;</span></div><div><font color="#2D4FC9" face="Courier New">37&#xA0;</font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">unsigned int padding[125];</span></div><div><font color="#2D4FC9" face="Courier New">38&#xA0;</font>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">unsigned int badpages[1];</span></div><div><font color="#2D4FC9" face="Courier New">39&#xA0;</font>&#xA0; &#xA0; &#xA0;<span style="color: rgb(45, 79, 201); font-family: &apos;Courier New&apos;;">} info;</span></div><div><font color="#2D4FC9" face="Courier New">40 };</font></div></blockquote><div>&#xA0; &#xA0; &#xA0;&#x6DFB;&#x52A0;<span style="font-family: &apos;Courier New&apos;;">padding&#x662F;&#x4E3A;&#x4E86;&#x80FD;&#x548C;&#x78C1;&#x76D8;&#x7684;cluster&#x5BF9;&#x9F50;&#xFF0C;</span><span style="font-family: &apos;Courier New&apos;;">badpages&#x6570;&#x7EC4;&#x9650;&#x5236;&#x4E86;&#x4E00;&#x4E2A;swap area&#x7684;&#x9875;&#x6570;&#xFF0C;&#x5176;&#x5C3A;&#x5BF8;&#x7531;&#x4E0B;&#x9762;&#x7684;&#x516C;&#x5F0F;&#x5F97;&#x5230;&#x3002;&#x6BCF;&#x4E2A;&#x6210;&#x5458;&#x6307;&#x5411;&#x4E86;&#x4E00;&#x4E2A;page&#x7ED3;&#x6784;&#x4F53;&#x3002;</span></div><div>&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;<img class="enMedia" src="/images/swap cache/1537085027013" hash="14fe0b7c21d8c7aa9f25c571de57b141" align="" alt="" longdesc="" width="" height="" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div>&#xA0; &#xA0; &#xA0;swap cache&#x6700;&#x6838;&#x5FC3;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x53EB;&#x505A;swp_entry_t&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x5176;&#x5B9E;&#x4ED6;&#x5C31;&#x662F;&#x4E00;&#x4E2A;unsigned long&#x3002;&#x5F53;&#x9875;&#x9762;&#x88AB;&#x6362;&#x51FA;&#x65F6;&#xFF0C;&#x5176;&#x539F;&#x5148;&#x7684;&#x9875;&#x8868;&#x9879;pte&#x88AB;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x8FD9;&#x4E2A;&#x503C;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;swp_entry_t&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4F4D;&#x5230;&#x8BE5;&#x9875;&#x6570;&#x636E;&#x88AB;&#x5199;&#x5230;&#x54EA;&#x4E2A;swap area&#x7684;&#x54EA;&#x4E2A;&#x4F4D;&#x7F6E;&#x3002;&#x5176;&#x7EC4;&#x6210;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</div><div><img class="enMedia" src="/images/swap cache/1537085027021" hash="bf705025623bd89201ec33f566eb4063" align="" alt="" longdesc="" width="701" height="306" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div>&#xA0; &#xA0; &#xA0;Type&#x6307;&#x5F15;&#x4E86;&#x54EA;&#x4E2A;swap area&#xFF0C;offset&#x6307;&#x5F15;&#x4E86;&#x8BE5;&#x9875;&#x5728;swap_map&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6539;offset&#x7B97;&#x5F97;swap file&#x4E2D;&#x7684;sector&#x4F4D;&#x7F6E;&#x3002;&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0B;&#x9762;&#x7684;&#x51FD;&#x6570;</div><div>&#xA0; &#xA0; &#xA0;(swapper_space.a_ops-&gt;swap_writepage) -&gt;&#xA0;get_swap_bio -&gt;&#xA0;map_swap_page</div><div><br></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><font color="#2D4FC9" face="Courier New">938&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for ( ; ; ) {</font></div><div><font color="#2D4FC9" face="Courier New">939&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; struct list_head *lh;</font></div><div><font color="#2D4FC9" face="Courier New">940</font>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <font color="#41AD1C" face="Courier New">/*&#x4E00;&#x76F4;&#x5FAA;&#x73AF;&#x5230;offset&#x843D;&#x5728;&#x8BE5;sector&#x4E2D;*/</font></div><div><font color="#2D4FC9" face="Courier New">941&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (se-&gt;start_page &lt;= offset &amp;&amp;</font></div><div><font color="#2D4FC9" face="Courier New">942&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; offset &lt; (se-&gt;start_page + se-&gt;nr_pages)) {</font></div><div><font color="#2D4FC9" face="Courier New">943&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; return se-&gt;start_block + (offset - se-&gt;start_page);</font></div><div><font color="#2D4FC9" face="Courier New">944&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; }</font></div><div><font color="#2D4FC9" face="Courier New">945&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; lh = se-&gt;list.next;</font></div><div><font color="#2D4FC9" face="Courier New">946&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; if (lh == &amp;sis-&gt;extent_list)</font></div><div><font color="#2D4FC9" face="Courier New">947&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; lh = lh-&gt;next;</font></div><div><font color="#2D4FC9" face="Courier New">948&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; se = list_entry(lh, struct swap_extent, list);</font></div><div><font color="#2D4FC9" face="Courier New">949&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; sis-&gt;curr_swap_extent = se;</font></div><div><font color="#2D4FC9" face="Courier New">951&#xA0;&#xA0;&#xA0;&#xA0; }</font></div></blockquote><div><font color="#2D4FC9" face="Courier New"><font color="#2D4FC9" face="Courier New"><br></font></font></div>&#xA0; &#xA0; &#xA0;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;swap_entry_t&#x662F;&#x600E;&#x4E48;&#x6765;&#x7684;&#xFF1F;&#x5176;&#x5B9E;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x5728;swap_map&#x6570;&#x7EC4;&#x4E2D;&#x6328;&#x4E2A;&#x627E;&#xFF0C;first fit&#x6CD5;&#x3002;&#x5F53;&#x7136;&#x5177;&#x4F53;&#x8FD8;&#x6709;&#x4E9B;&#x6280;&#x5DE7;&#xFF0C;&#x5176;&#x5B9E;&#x5728;&#x641C;&#x7D22;&#x65F6;&#xFF0C;&#x662F;&#x6309;&#x7167;cluster&#x7684;&#x8303;&#x56F4;&#x5BFB;&#x627E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5FAA;&#x73AF;&#x76F4;&#x5230;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;cluster&#xFF08;256&#x4E2A;&#x7B49;&#x4E8E;0&#x7684;swap_map&#x6210;&#x5458;&#xFF09;&#x4E3A;&#x6B62;&#xFF0C;&#x76EE;&#x7684;&#x662F;to have pages swapped out at the same time close together on the premise that&#xA0;pages swapped out together are related&#xA0;&#x3002;<div><span style="font-family: song, Verdana; font-size: 14px; line-height: 22.390625px; background-color: rgb(255, 255, 255);"><br></span></div><div><font face="song, Verdana"><span style="font-size: 14px; line-height: 22px;"><br></span></font></div></div></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2012/12/25/slab_allocator_（4）——_kmalloc/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2012/12/25/slab_allocator_（4）——_kmalloc/" class="post-title-link" itemprop="url">slab allocator （4）—— kmalloc</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2012-12-25 21:53:57" itemprop="dateCreated datePublished" datetime="2012-12-25T21:53:57+08:00">2012-12-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2013-07-20 22:04:35" itemprop="dateModified" datetime="2013-07-20T22:04:35+08:00">2013-07-20</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2012/12/25/slab_allocator_（4）——_kmalloc/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2012/12/25/slab_allocator_（4）——_kmalloc/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="enNote" style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" title="" lang="" xml:lang="" dir=""><img class="enMedia" src="/images/slab allocator &#xFF08;4&#xFF09;&#x2014;&#x2014; kmalloc/1537085026613" hash="0ab918f826f108e5d247a9bbdcf211fa" align="" alt="" longdesc="" width="1146" height="270" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhougy0717.github.io/2012/12/18/slab_allocator_（2）-_kmem_cache_create/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ben Zhou"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Big Ben"/>
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2012/12/18/slab_allocator_（2）-_kmem_cache_create/" class="post-title-link" itemprop="url">slab allocator （2）—— kmem_cache_create</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2012-12-18 20:54:16" itemprop="dateCreated datePublished" datetime="2012-12-18T20:54:16+08:00">2012-12-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2012-12-20 08:56:03" itemprop="dateModified" datetime="2012-12-20T08:56:03+08:00">2012-12-20</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2012/12/18/slab_allocator_（2）-_kmem_cache_create/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2012/12/18/slab_allocator_（2）-_kmem_cache_create/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><div class="enNote" style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; display: block;" title="" lang="" xml:lang="" dir="">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x662F;slab&#x7CFB;&#x7EDF;&#x7684;&#x6838;&#x5FC3;&#x51FD;&#x6570;&#x4E4B;&#x4E00;&#xFF0C;&#x4ED6;&#x662F;kmalloc&#x7684;&#x540E;&#x76FE;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F5C;&#x4E3A;&#x5206;&#x914D;&#x5185;&#x5B58;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4F9B;&#x9A71;&#x52A8;&#x8C03;&#x7528;&#x3002;&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x53C2;&#x770B;ldd3&#x7684;chp 8&#x7684;&#x540E;&#x5907;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x4E00;&#x8282;&#xFF08;P217&#xFF09;&#x3002;&#x4ED6;&#x5176;&#x5B9E;&#x548C;&#x6211;&#x4EEC;CPU&#x7684;L1&#xFF0C;L2&#x7F13;&#x5B58;&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#x3002;&#x4ED6;&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;&#x5185;&#x5B58;&#x6C60;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x4E2D;&#x5206;&#x914D;&#x82E5;&#x5E72;&#x4E2A;size&#x76F8;&#x540C;&#x7684;&#x5185;&#x5B58;&#x5757;&#x4F7F;&#x7528;&#x3002;<div style="display: block;"><br></div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x5176;&#x8C03;&#x7528;&#x6D41;&#x7A0B;&#x4E3B;&#x7EBF;&#x5982;&#x4E0B;&#xFF1A;</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;<img class="enMedia" src="/images/slab allocator &#xFF08;2&#xFF09;&#x2014;&#x2014; kmem_cache_create/1499486796586" hash="7c2730c8cad130f3604736abf0582ab5" align="" alt="" longdesc="" width="687" height="362" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x4E3B;&#x7EBF;&#x8FD8;&#x662F;&#x5F88;&#x6E05;&#x695A;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x901A;&#x8FC7;kmem_cache_zalloc&#x5206;&#x914D;kmem_cache&#xFF0C;&#x7136;&#x540E;&#x5404;&#x79CD;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x6700;&#x540E;&#x52A0;&#x5165;cache_chain&#x4E2D;&#x3002;&#x4E4B;&#x524D;&#x4E0D;&#x6E05;&#x695A;&#x7684;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x2014;&#x2014;cache_chain&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7528;&#x7684;&#xFF0C;&#x73B0;&#x5728;&#x770B;&#x8D77;&#x6765;&#x5E94;&#x8BE5;&#x662F;&#x6709;&#x7B54;&#x6848;&#x4E86;&#x3002;&#x4ED6;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x4FDD;&#x5B58;&#x5DF2;&#x5206;&#x914D;&#x7684;kmem_cache&#x8BB0;&#x5F55;&#xFF0C;&#x9632;&#x6B62;&#x91CD;&#x540D;&#x7684;cache&#x4EA7;&#x751F;&#xFF0C;&#x65B9;&#x4FBF;proc&#x7CFB;&#x7EDF;&#x663E;&#x793A;&#x8C03;&#x8BD5;&#x4FE1;&#x606F;&#x3002;</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x4E2D;&#x6709;&#x51E0;&#x4E2A;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x5730;&#x65B9;</div><div style="display: block;"><br></div><div style="display: block;">1. kmem_cache&#x7684;&#x521D;&#x59CB;&#x5316;</div><div style="display: block;">&#xA0; &#xA0; &#xA0;1&#xFF09;&#x5F53;size &gt;= (PAGE_SIZE &gt;&gt; 3 = 512KB&#x65F6;&#xFF0C;flags |= CFLGS_OFF_SLAB</div><div style="display: block;">&#xA0; &#xA0; &#xA0;2&#xFF09;calculate_slab_order(cachep, size, align, flags)</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;<img class="enMedia" src="/images/slab allocator &#xFF08;2&#xFF09;&#x2014;&#x2014; kmem_cache_create/1499486796244" hash="10a4a7586d7d29b19d2e2a600adc2ef0" align="" alt="" longdesc="" width="482" height="512" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x6240;&#x8C13;&#x7684;num&#x4E0E;offslab_limit&#x5C31;&#x662F;&#x4E0B;&#x9762;off-slab&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7531;&#x6574;&#x5757;2^order&#x4E2A;&#x9875;&#x9762;&#x51B3;&#x5B9A;&#x7684;object&#x6570;(num)&#xFF0C;&#x548C;&#x53F3;&#x8FB9;kmem_bufctl_t&#x6570;&#x7EC4;&#x51B3;&#x5B9A;&#x7684;object&#x6570;(offslab_limit)&#x3002;&#x53EF;&#x89C1;&#x6709;&#x4E00;&#x4E2A;&#x7EA6;&#x675F;&#x5C31;&#x662F;&#xFF0C;num&#x8981;&#x5C0F;&#x4E8E;offslab_limit&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5DE6;&#x8FB9;&#x5C0F;&#x4E8E;&#x53F3;&#x8FB9;&#x3002;&#x5F88;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x56E0;&#x4E3A;&#x53F3;&#x8FB9;&#x662F;&#x5DE6;&#x8FB9;&#x7684;&#x7BA1;&#x63A7;&#x3002;</div><div style="display: block;"><img class="enMedia" src="/images/slab allocator &#xFF08;2&#xFF09;&#x2014;&#x2014; kmem_cache_create/1499486796738" hash="a6edb8ef026079cb61b86575d2695089" align="" alt="" longdesc="" width="429" height="212" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 3&#xFF09;&#x5982;&#x679C;left_over&#x592A;&#x591A;&#xFF0C;&#x8DB3;&#x591F;&#x653E;&#x5F97;&#x4E0B;slab_size&#xFF0C;&#x4F1A;&#x5C06;off-slab&#x8F6C;&#x53D8;&#x4E3A;on-slab</div><div style="display: block;">2. off-slab&#x65F6;&#xFF0C;slab mngmt&#x653E;&#x5728;&#x54EA;</div><div style="display: block;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x8C03;&#x7528;cachep-&gt;slabp_cache = kmem_find_general_cachep(slab_size, 0u)&#xFF0C;&#x53BB;&#x5BFB;&#x627E;&#x8FD9;&#x4E2A;size cache&#x6765;&#x5B58;&#x653E;slab mngmt&#x3002;</div><div style="display: block;">&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;kmem_find_general_cachep -&gt;&#xA0;__find_general_cachep -&gt; (return malloc_sizes[n]-&gt;cs_cachep)</div><div style="display: block;"><br></div><div style="display: block;">3. CPU cache&#x7684;&#x521D;&#x59CB;&#x5316;</div><div style="display: block;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;setup_cpu_cache(cachep, gfp)</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x590D;&#x6742;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5148;&#x770B;&#x8C03;&#x7528;&#x6D41;&#x7A0B;</div><div style="display: block;"><br></div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;<img class="enMedia" src="/images/slab allocator &#xFF08;2&#xFF09;&#x2014;&#x2014; kmem_cache_create/1499486796416" hash="5fac5be0e836af7f4e8bf4ff71375b8d" align="" alt="" longdesc="" width="902" height="682" border="" hspace="" vspace="" usemap="" style="cursor: default;cursor: default;" title="" lang="" xml:lang="" dir=""></div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x6839;&#x636E;g_cpucache_up&#x5206;&#x6210;&#x4E09;&#x4E2A;&#x90E8;&#x5206;</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 1&#xFF09;FULL&#x72B6;&#x6001;&#xFF0C;&#x6B64;&#x65F6;&#xFF0C;&#x6240;&#x6709;&#x7684;cache&#x521D;&#x59CB;&#x5316;&#x90FD;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;setup_cpu_cache&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;enable_cpucache&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x590D;&#x6742;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x518D;&#x53E6;&#x5F00;&#x65B0;&#x7BC7;&#x4ECB;&#x7ECD;</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 2&#xFF09;PARTIAL_AC/L3&#x72B6;&#x6001;&#xFF0C;&#x6B64;&#x65F6;&#x8C03;&#x7528;&#x6B64;&#x51FD;&#x6570;&#x7684;kmem_cache_create&#x4ECD;&#x5728;kmem_cache_init&#x4E2D;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x624D;&#x521A;&#x5F00;&#x59CB;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5BF9;struct arracy_cache&#x548C;kmem_list3s&#x7528;&#x5230;&#x7684;&#x5185;&#x5B58;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5426;&#x5219;&#x5176;&#x4ED6;cache&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#xFF0C;&#x65E0;&#x6CD5;&#x52A8;&#x6001;&#x5730;&#x4E3A;&#x8FD9;&#x4E24;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#x5206;&#x914D;&#x5185;&#x5B58;</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 3&#xFF09;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#xFF0C;AC&#x548C;L3&#x90FD;&#x5206;&#x914D;&#x597D;&#x4E86;&#xFF0C;&#x5176;&#x4ED6;&#x7684;cache&#x518D;create&#x5C31;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x7684;&#x8C03;&#x7528;kmalloc&#x4E86;</div><div style="display: block;"><br></div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; INDEX_AC&#x7684;array_cache&#x521D;&#x59CB;&#x5316;&#x662F;initarray_generic.cache</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; INDEX_AC / L3&#x7684;kmem_list3&#x521D;&#x59CB;&#x5316;&#x662F;initkmem_list3[SIZE_AC / L3]</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; cache_cache&#x7684;array_cache&#x521D;&#x59CB;&#x5316;&#x662F;initarray_cache&#xFF0C;kmem_list3&#x521D;&#x59CB;&#x5316;&#x662F;initkmem_list3[CACHE_CACHE]</div><div style="display: block;">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x8FD9;&#x4E9B;&#x5728;kmem_cache_init&#x7684;step 4,5&#x90FD;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;&#x7528;kmalloc&#x8FDB;&#x884C;&#x52A8;&#x6001;&#x5206;&#x914D;&#xFF0C;&#x5E76;&#x4E14;array_cache&#x4F1A;&#x7528;memcpy&#x5C06;&#x539F;&#x5148;&#x503C;&#x8D4B;&#x5165;&#xFF0C;list&#x4F1A;&#x7528;splice&#x8FDB;&#x884C;&#x5408;&#x5E76;&#x3002;</div><div style="display: block;">&#xA0; &#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</div></div>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Ben Zhou</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">179</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">66</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/zhougy0717" title="GitHub &rarr; https://github.com/zhougy0717" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:benzhou.guangyu@gmail.com" title="E-Mail &rarr; mailto:benzhou.guangyu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ben Zhou</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.3.7</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.0.1</div>





  <script src='https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({ theme: 'forest' });
    }
  </script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.1"></script>




  

  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  
  

<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'Re6dKwipPweGqNRhK2OybEc1-gzGzoHsz',
    appKey: 'ugNI1WvNfBknqmpQiszrTg2v',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn'
  });
</script>





  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
<script>
if ($('body').find('pre.mermaid').length) {
  $.ajax({
    type: 'GET',
    url: '//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js',
    dataType: 'script',
    cache: true,
    success: function() {
      mermaid.initialize({
        theme: 'forest',
        logLevel: 3,
        flowchart: { curve: 'linear' },
        gantt: { axisFormat: '%m/%d/%Y' },
        sequence: { actorMargin: 50 }
      });
    }
  });
}
</script>


  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

  

  

  

  

  

  

</body>
</html>
